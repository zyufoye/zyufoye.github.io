<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>CodeQLå…¥é—¨ï¼ˆäºŒï¼‰</title>
      <link href="/2025/12/17/CodeQL%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2025/12/17/CodeQL%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="CodeQL-æŸ¥è¯¢è¯­å¥ç¼–å†™"><a href="#CodeQL-æŸ¥è¯¢è¯­å¥ç¼–å†™" class="headerlink" title="CodeQL æŸ¥è¯¢è¯­å¥ç¼–å†™"></a>CodeQL æŸ¥è¯¢è¯­å¥ç¼–å†™</h2><p>ä»¥pythonä¸ºä¾‹ï¼Œç¼–å†™ä¸€ä¸ªç®€å•çš„hello world codeqlæŸ¥è¯¢ã€‚é¦–å…ˆéœ€è¦ä½¿ç”¨ codeql åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œè¿™æ ·æ‰èƒ½ä¸ºå…¶ç¼–å†™æŸ¥è¯¢è¯­å¥ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºæ•°æ®åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">codeql database create test_db --language=python</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æ–‡ä»¶ä¸­ä¼šå¤šå‡ºä¸€ä¸ªæ–‡ä»¶å¤¹ test_db å³ä¸ºå½“å‰é¡¹ç›®çš„ codeql æ•°æ®åº“ã€‚æ¥ä¸‹æ¥éœ€è¦ç¼–å†™æŸ¥è¯¢è¯­å¥ï¼Œä¸€ä¸ªæ ‡å‡†çš„ codeql æŸ¥è¯¢è¯­å¥æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Query metadata</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">import <span class="comment">/* ... CodeQL libraries or modules ... */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ... Optional, define CodeQL classes and predicates ... */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> <span class="comment">/* ... variable declarations ... */</span></span><br><span class="line"><span class="keyword">where</span> <span class="comment">/* ... logical formula ... */</span></span><br><span class="line"><span class="keyword">select</span> <span class="comment">/* ... expressions ... */</span></span><br></pre></td></tr></table></figure><blockquote><p>è¯­å¥å¯ä»¥ç®€å•ç†è§£ä¸ºï¼š<strong>é€šè¿‡ <code>import</code> å¯¼å…¥å“ªäº›åº“ï¼Œç„¶å<code>from</code>ä»å“ªäº›æ•°æ®ä¸­ï¼ŒæŸ¥æ‰¾ <code>select</code>æ»¡è¶³å“ªäº›æ¡ä»¶<code>where</code>çš„ç»“æœã€‚</strong></p></blockquote><p>ä¸ºhello worldç®€å•ç¼–å†™ä¸€ä¸ªæŸ¥è¯¢</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> &quot;hello,world&quot;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ query run å­å‘½ä»¤æŒ‡å®š test_db æ•°æ®åº“æ‰§è¡Œ helloworld.ql æŸ¥è¯¢è¯­å¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">codeql query run -d test_db/ helloworld.ql</span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒæˆåŠŸï¼Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">codeql query run -d test_db/ helloworld.ql</span><br><span class="line"></span><br><span class="line">Compiling query plan <span class="keyword">for</span> /home/zyu/projects/python_codeql_demo/helloworld.ql.</span><br><span class="line">[1/1 comp 745ms] Compiled /home/zyu/projects/python_codeql_demo/helloworld.ql.</span><br><span class="line">helloworld.ql: Evaluation completed (45ms).</span><br><span class="line">|    col0     |</span><br><span class="line">+-------------+</span><br><span class="line">| hello,world |</span><br><span class="line">Shutting down query evaluator.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é™¤äº†è¿™ç§ cli çš„è¿è¡Œæ–¹å¼ï¼Œcodeql è¿˜æä¾›äº†å¦å¤–ä¸¤ç§è¿è¡Œæ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ VScodeæ’ä»¶å’Œ CI&#x2F;CD æ–¹å¼ï¼š</p><ul><li><p>CodeQL_cliï¼šé€‚åˆå¯¹é¡¹ç›®æºç è¿›è¡Œæ‰¹é‡çš„è§„åˆ™æ‰«æå’Œæ£€æµ‹ï¼Œä½¿ç”¨å‘½ä»¤è¡Œè¿›è¡Œæ“ä½œï¼›</p></li><li><p>VSCodeæ’ä»¶ï¼šé€‚åˆä½¿ç”¨ CodeQL è¾…åŠ©è¿›è¡Œä»£ç å®¡è®¡ï¼Œä½¿ç”¨ VSCode è¿›è¡Œæ“ä½œï¼›</p></li><li><p>CI&#x2F;CDï¼šç»“åˆè§„åˆ™åº“å°† CodeQL æ·»åŠ è¿› CI&#x2F;CD æµç¨‹è¿›è¡ŒæŒç»­åŒ–çš„é¡¹ç›®å®‰å…¨ç®¡ç†ï¼Œåœ¨ CI&#x2F;CD æµç¨‹ä¸­è‡ªåŠ¨æ‰§è¡Œï¼›</p></li></ul><span id="more"></span><h2 id="å®˜æ–¹-CodeQL-tutorials"><a href="#å®˜æ–¹-CodeQL-tutorials" class="headerlink" title="å®˜æ–¹ CodeQL tutorials"></a>å®˜æ–¹ CodeQL tutorials</h2><p>CodeQL å®˜æ–¹æä¾›äº† QL æ•™ç¨‹(<a href="https://codeql.github.com/docs/writing-codeql-queries/ql-tutorials/)%E4%BB%A5%E6%B8%B8%E6%88%8F%E7%9A%84%E6%96%B9%E5%BC%8F%E5%B8%AE%E5%8A%A9%E7%94%A8%E6%88%B7%E5%85%A5%E9%97%A8">https://codeql.github.com/docs/writing-codeql-queries/ql-tutorials/)ä»¥æ¸¸æˆçš„æ–¹å¼å¸®åŠ©ç”¨æˆ·å…¥é—¨</a> QL å¹¶ç†è§£åŸºç¡€çš„è¯­æ³•è§„åˆ™ã€‚</p><h3 id="CodeQL-baseline"><a href="#CodeQL-baseline" class="headerlink" title="CodeQL baseline"></a>CodeQL baseline</h3><p>å®˜æ–¹æ–‡æ¡£ä¸­ä»‹ç»ï¼Œæ›´åŠ å¤æ‚çš„é€šç”¨æŸ¥è¯¢çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> <span class="comment">/* ... variable declarations ... */</span></span><br><span class="line"><span class="keyword">where</span> <span class="comment">/* ... logical formulas ... */</span></span><br><span class="line"><span class="keyword">select</span> <span class="comment">/* ... expressions ... */</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹1-ä»¥ä¸‹é¢çš„è¿™ä¸ªä¸ºä¾‹ï¼ŒæŸ¥è¯¢ç»“æœæ˜¯æ•°å­— 42ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> <span class="type">int</span> x, <span class="type">int</span> y</span><br><span class="line"><span class="keyword">where</span> x <span class="operator">=</span> <span class="number">6</span> <span class="keyword">and</span> y <span class="operator">=</span> <span class="number">7</span></span><br><span class="line"><span class="keyword">select</span> x <span class="operator">*</span> y</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">codeql query run -d test_db demo1.ql</span><br><span class="line">Compiling query plan <span class="keyword">for</span> /home/zyu/projects/python_codeql_demo/demo1.ql.</span><br><span class="line">[1/1 comp 805ms] Compiled /home/zyu/projects/python_codeql_demo/demo1.ql.</span><br><span class="line">demo1.ql: Evaluation completed (48ms).</span><br><span class="line">| col0 |</span><br><span class="line">+------+</span><br><span class="line">|   42 |</span><br><span class="line">Shutting down query evaluator.</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹2-å¤šç»“æœæŸ¥è¯¢ç¤ºä¾‹ï¼šæŸ¥è¯¢è®¡ç®— 1 åˆ° 10 ä¹‹é—´çš„æ‰€æœ‰å‹¾è‚¡æ•°ï¼Œé€šè¿‡ç¼–å†™ç±»çš„æ–¹å¼ç®€åŒ–qlä»£ç ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class <span class="type">SmallInt</span> extends <span class="type">int</span> &#123;</span><br><span class="line">  <span class="type">SmallInt</span>() &#123; this <span class="keyword">in</span> [<span class="number">1.</span><span class="number">.10</span>] &#125;</span><br><span class="line">  <span class="type">int</span> square() &#123; <span class="keyword">result</span> <span class="operator">=</span> this<span class="operator">*</span>this &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> <span class="type">SmallInt</span> x, <span class="type">SmallInt</span> y, <span class="type">SmallInt</span> z</span><br><span class="line"><span class="keyword">where</span> x.square() <span class="operator">+</span> y.square() <span class="operator">=</span> z.square()</span><br><span class="line"><span class="keyword">select</span> x, y, z</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">codeql query run -d test_db demo2.ql</span><br><span class="line">Compiling query plan <span class="keyword">for</span> /home/zyu/projects/python_codeql_demo/demo2.ql.</span><br><span class="line">[1/1 comp 900ms] Compiled /home/zyu/projects/python_codeql_demo/demo2.ql.</span><br><span class="line">demo2.ql: Evaluation completed (55ms).</span><br><span class="line">| x | y | z  |</span><br><span class="line">+---+---+----+</span><br><span class="line">| 3 | 4 | 5  |</span><br><span class="line">| 4 | 3 | 5  |</span><br><span class="line">| 6 | 8 | 10 |</span><br><span class="line">| 8 | 6 | 10 |</span><br><span class="line">Shutting down query evaluator.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹3-æŸ¥è¯¢pythonä¸­è¶…è¿‡ 7 ä¸ªå‚æ•°çš„å‡½æ•°</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import python</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> <span class="keyword">Function</span> f</span><br><span class="line"><span class="keyword">where</span> <span class="built_in">count</span>(f.getAnArg()) <span class="operator">&gt;</span> <span class="number">7</span></span><br><span class="line"><span class="keyword">select</span> f</span><br></pre></td></tr></table></figure><p>è¦å¯¼å…¥ç‰¹å®šç¼–ç¨‹è¯­è¨€çš„ CodeQL åº“ï¼Œåœ¨æŸ¥è¯¢å¼€å§‹å¤„è¾“å…¥ <code>import language</code> ã€‚from å­å¥å®šä¹‰äº†ä¸€ä¸ªå˜é‡ f ï¼Œä»£è¡¨ä¸€ä¸ª Python å‡½æ•°ã€‚ where éƒ¨åˆ†å°†å‡½æ•° f é™åˆ¶ä¸ºé‚£äº›å…·æœ‰è¶…è¿‡ 7 ä¸ªå‚æ•°çš„å‡½æ•°ã€‚æœ€åï¼Œ select å­å¥åˆ—å‡ºäº†è¿™äº›å‡½æ•°ã€‚</p><p>åœ¨è¿è¡Œè¿™ä¸ªæŸ¥è¯¢æ—¶é‡åˆ°äº†ä¸€äº›é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">codeql query run -d argdb demo3.ql</span><br><span class="line"></span><br><span class="line">Compiling query plan <span class="keyword">for</span> /home/zyu/projects/python_codeql_demo/demo3.ql.</span><br><span class="line">ERROR: could not resolve module python (/home/zyu/projects/python_codeql_demo/demo3.ql:1,8-14)</span><br><span class="line">ERROR: could not resolve <span class="built_in">type</span> Function (/home/zyu/projects/python_codeql_demo/demo3.ql:3,6-14)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ†æåŸå› ï¼Œé”™è¯¯ä¿¡æ¯ <code>could not resolve module python</code> å’Œ <code>could not resolve type Function</code> è¡¨æ˜ CodeQL ç¼–è¯‘å™¨æ— æ³•æ‰¾åˆ° Python æ ‡å‡†æŸ¥è¯¢åº“ï¼ˆStandard QL Librariesï¼‰ã€‚</p><p>ç¼ºå°‘ qlpack.yml æ–‡ä»¶ï¼šCodeQL ç°åœ¨å¼ºçƒˆä¾èµ– â€œCodeQL Packsâ€ ç³»ç»Ÿã€‚å¦‚æœä½ ç›´æ¥è¿è¡Œä¸€ä¸ªè£¸éœ²çš„ .ql æ–‡ä»¶ï¼Œè€Œè¯¥æ–‡ä»¶æ‰€åœ¨ç›®å½•æ²¡æœ‰å£°æ˜å®ƒä¾èµ– codeql&#x2F;python-allï¼Œç¼–è¯‘å™¨å°±ä¸çŸ¥é“ import python åˆ°åº•æ˜¯æŒ‡å‘å“ªé‡Œçš„åº“ã€‚</p><p>åˆ›å»º qlpack.yml æ–‡ä»¶ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">my-custom-queries</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">1.0</span><span class="number">.0</span></span><br><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">codeql/python-all:</span> <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure><p>ä¹‹åæ‰§è¡Œ codeql pack install å‡ºç°å¦‚ä¸‹æç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">WARNING: Pack <span class="string">&#x27;codeql/xml&#x27;</span> was found via <span class="string">&#x27;--additional-packs&#x27;</span>. If the generated <span class="string">&#x27;codeql-pack.lock.yml&#x27;</span> file is committed to <span class="built_in">source</span> control, other <span class="built_in">users</span> will also have to use <span class="string">&#x27;--additional-packs&#x27;</span> when compiling or running queries.  (/home/zyu/codeql/qlpacks/codeql/xml/1.0.38/qlpack.yml:1,1-1)</span><br><span class="line">......</span><br><span class="line">WARNING: Pack <span class="string">&#x27;codeql/yaml&#x27;</span> was found via <span class="string">&#x27;--additional-packs&#x27;</span>. If the generated <span class="string">&#x27;codeql-pack.lock.yml&#x27;</span> file is committed to <span class="built_in">source</span> control, other <span class="built_in">users</span> will also have to use <span class="string">&#x27;--additional-packs&#x27;</span> when compiling or running queries.  (/home/zyu/codeql/qlpacks/codeql/yaml/1.0.38/qlpack.yml:1,1-1)</span><br><span class="line">WARNING: To avoid these warnings <span class="keyword">in</span> the future, use the <span class="string">&#x27;--no-strict-mode&#x27;</span> option. (/home/zyu/projects/python_codeql_demo/qlpack.yml:1,1-1)</span><br><span class="line"></span><br><span class="line">Dependencies resolved. Installing packages...</span><br><span class="line">Install location: /home/zyu/.codeql/packages</span><br><span class="line">Nothing to install.</span><br><span class="line">Package install location: /home/zyu/.codeql/packages</span><br><span class="line">Nothing downloaded.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è­¦å‘Šéƒ¨åˆ†å¤§è‡´çš„æ„æ€æ˜¯ï¼šæˆ‘çŸ¥é“ä½ éœ€è¦ python-allï¼Œæˆ‘ä¹Ÿæ‰¾åˆ°äº†å®ƒã€‚ä½†æ˜¯ python-all å†…éƒ¨è¿˜ä¾èµ– dataflowã€‚è™½ç„¶æˆ‘ç°åœ¨èƒ½æ‰¾åˆ°å®ƒä»¬ï¼Œä½†å› ä¸ºä½ æ²¡æœ‰ä¸€ä¸ªå…¨å±€çš„ codeql-workspace.yml æ–‡ä»¶æ¥ç»Ÿä¸€ç®¡ç†è¿™äº›è·¯å¾„ï¼Œæˆ‘æ‹…å¿ƒç­‰åˆ°ä½ çœŸæ­£è¿è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œæˆ‘å¯èƒ½ä¼šæ‰¾ä¸åˆ°è¿™äº›åº•å±‚ä¾èµ–ã€‚</p><p><strong>ä½†åœ¨ä½¿ç”¨ CodeQL Bundleï¼ˆä¸‹è½½çš„é‚£ä¸ªå¤§å‹ç¼©åŒ…ï¼‰æ—¶ï¼Œé€šå¸¸ CLI ä¼šè‡ªåŠ¨å¤„ç†è¿™äº›è·¯å¾„ï¼Œæ‰€ä»¥è¿™äº›è­¦å‘Šå¾€å¾€å¯ä»¥å¿½ç•¥ã€‚</strong></p><p>è¿”å›ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">codeql query run -d argdb demo3.ql</span><br><span class="line"></span><br><span class="line">Compiling query plan <span class="keyword">for</span> /home/zyu/projects/python_codeql_demo/demo3.ql.</span><br><span class="line">[1/1 comp 12s] Compiled /home/zyu/projects/python_codeql_demo/demo3.ql.</span><br><span class="line">demo3.ql: Evaluation completed (113ms).</span><br><span class="line">|           f            |</span><br><span class="line">+------------------------+</span><br><span class="line">| Function test_function |</span><br><span class="line">Shutting down query evaluator.</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å®˜æ–¹ç¤ºä¾‹-Find-the-thief"><a href="#å®˜æ–¹ç¤ºä¾‹-Find-the-thief" class="headerlink" title="å®˜æ–¹ç¤ºä¾‹ Find the thief"></a>å®˜æ–¹ç¤ºä¾‹ Find the thief</h3><p>æŠŠä»¥ä¸‹å†…å®¹è½¬æ¢ä¸º ql æŸ¥è¯¢ï¼š</p><table><thead><tr><th>åºå·</th><th>é—®é¢˜</th><th>ç­”æ¡ˆ</th></tr></thead><tbody><tr><td>1</td><td>å°å·èº«é«˜è¶…è¿‡ 150 å˜ç±³å—ï¼Ÿ</td><td>æ˜¯</td></tr><tr><td>2</td><td>å°å·æœ‰é‡‘å‘å—ï¼Ÿ</td><td>ä¸</td></tr><tr><td>3</td><td>å°å·ç§ƒå¤´å—ï¼Ÿ</td><td>ä¸</td></tr><tr><td>4</td><td>å°å·æ˜¯å¦å°äº 30 å²ï¼Ÿ</td><td>ä¸</td></tr><tr><td>5</td><td>å°å·æ˜¯å¦ä½åœ¨åŸå ¡çš„ä¸œè¾¹ï¼Ÿ</td><td>æ˜¯</td></tr><tr><td>6</td><td>å°å·æœ‰é»‘è‰²æˆ–æ£•è‰²å¤´å‘å—ï¼Ÿ</td><td>æ˜¯</td></tr><tr><td>7</td><td>å°å·èº«é«˜æ˜¯å¦è¶…è¿‡ 180 å˜ç±³ä¸”ä½äº 190 å˜ç±³ï¼Ÿ</td><td>ä¸</td></tr><tr><td>8</td><td>å°å·æ˜¯æ‘é‡Œå¹´çºªæœ€å¤§çš„äººå—ï¼Ÿ</td><td>ä¸</td></tr><tr><td>9</td><td>å°å·æ˜¯æ‘é‡Œæœ€é«˜çš„äººå—ï¼Ÿ</td><td>ä¸</td></tr><tr><td>10</td><td>å°å·æ¯”æ‘æ°‘çš„å¹³å‡èº«é«˜çŸ®å—ï¼Ÿ</td><td>æ˜¯</td></tr><tr><td>11</td><td>å°å·æ˜¯æ‘ä¸œéƒ¨æœ€å¹´é•¿çš„äººå—ï¼Ÿ</td><td>æ˜¯</td></tr></tbody></table><p>æŸ¥è¯¢è¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import tutorial</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> Person t</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  <span class="comment">/* 1 */</span> t.getHeight() <span class="operator">&gt;</span> <span class="number">150</span> <span class="keyword">and</span></span><br><span class="line">  <span class="comment">/* 2 */</span> <span class="keyword">not</span> t.getHairColor() <span class="operator">=</span> &quot;blond&quot; <span class="keyword">and</span></span><br><span class="line">  <span class="comment">/* 3 */</span> <span class="keyword">exists</span> (string c <span class="operator">|</span> t.getHairColor() <span class="operator">=</span> c) <span class="keyword">and</span></span><br><span class="line">  <span class="comment">/* 4 */</span> <span class="keyword">not</span> t.getAge() <span class="operator">&lt;</span> <span class="number">30</span> <span class="keyword">and</span></span><br><span class="line">  <span class="comment">/* 5 */</span> t.getLocation() <span class="operator">=</span> &quot;east&quot; <span class="keyword">and</span></span><br><span class="line">  <span class="comment">/* 6 */</span> (t.getHairColor() <span class="operator">=</span> &quot;black&quot; <span class="keyword">or</span> t.getHairColor() <span class="operator">=</span> &quot;brown&quot;) <span class="keyword">and</span></span><br><span class="line">  <span class="comment">/* 7 */</span> <span class="keyword">not</span> (t.getHeight() <span class="operator">&gt;</span> <span class="number">180</span> <span class="keyword">and</span> t.getHeight() <span class="operator">&lt;</span> <span class="number">190</span>) <span class="keyword">and</span></span><br><span class="line">  <span class="comment">/* 8 */</span> <span class="keyword">exists</span>(Person p <span class="operator">|</span> p.getAge() <span class="operator">&gt;</span> t.getAge()) <span class="keyword">and</span></span><br><span class="line">  <span class="comment">/* 9 */</span> <span class="keyword">not</span> t <span class="operator">=</span> <span class="built_in">max</span>(Person p <span class="operator">|</span> <span class="operator">|</span> p <span class="keyword">order</span> <span class="keyword">by</span> p.getHeight()) <span class="keyword">and</span></span><br><span class="line">  <span class="comment">/* 10 */</span> t.getHeight() <span class="operator">&lt;</span> <span class="built_in">avg</span>(<span class="type">float</span> i <span class="operator">|</span> <span class="keyword">exists</span>(Person p <span class="operator">|</span> p.getHeight() <span class="operator">=</span> i) <span class="operator">|</span> i) <span class="keyword">and</span></span><br><span class="line">  <span class="comment">/* 11 */</span> t <span class="operator">=</span> <span class="built_in">max</span>(Person p <span class="operator">|</span> p.getLocation() <span class="operator">=</span> &quot;east&quot; <span class="operator">|</span> p <span class="keyword">order</span> <span class="keyword">by</span> p.getAge())</span><br><span class="line"><span class="keyword">select</span> &quot;The thief is &quot; <span class="operator">+</span> t <span class="operator">+</span> &quot;!&quot;</span><br></pre></td></tr></table></figure><h3 id="å®˜æ–¹ç¤ºä¾‹-Catch-the-fire-starter"><a href="#å®˜æ–¹ç¤ºä¾‹-Catch-the-fire-starter" class="headerlink" title="å®˜æ–¹ç¤ºä¾‹ Catch the fire starter"></a>å®˜æ–¹ç¤ºä¾‹ Catch the fire starter</h3><p>æœ¬èŠ‚ä¸»è¦ä»‹ç»äº† codeql çš„è°“è¯å’Œç±»ã€‚å› ä¸ºå¯¹<strong>è°“è¯</strong>çš„ç†è§£ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œæ‰€ä»¥è¿™é‡Œå¤šä¸€ç‚¹èƒŒæ™¯ä»‹ç»ã€‚</p><p>å­¦ä¹  QL è°“è¯å’Œç±»ï¼Œä½œä¸º QL ä¾¦æ¢è§£å†³ä½ çš„ç¬¬äºŒä¸ªè°œå›¢ã€‚å°±åƒä½ æˆåŠŸæ‰¾åˆ°å°å·å¹¶å°†é‡‘å† å½’è¿˜åŸå ¡ä¸€æ ·ï¼Œå¦ä¸€åœºå¯æ€•çš„çŠ¯ç½ªå‘ç”Ÿäº†ã€‚æ¸…æ™¨ï¼Œå‡ ä¸ªäººåœ¨æ‘åº„åŒ—é¢çš„ç”°é‡é‡Œçºµç«ï¼Œçƒ§æ¯äº†æ‰€æœ‰çš„åº„ç¨¼ï¼ä½ ç°åœ¨ä»¥ QL ä¾¦æ¢ä¸“å®¶çš„å£°èª‰è€Œé—»åï¼Œå› æ­¤å†æ¬¡è¢«è¦æ±‚æ‰¾å‡ºç½ªé­ç¥¸é¦–ã€‚è¿™æ¬¡ï¼Œä½ æœ‰ä¸€äº›é¢å¤–ä¿¡æ¯ã€‚æ‘åº„çš„å—åŒ—ä¸¤ä¾§å­˜åœ¨æ¿€çƒˆç«äº‰ï¼Œè€Œä¸”ä½ çŸ¥é“ç½ªçŠ¯ä½åœ¨å—è¾¹ã€‚é€šè¿‡ä»¥ä¸‹ç¤ºä¾‹å­¦ä¹ å¦‚ä½•åœ¨ QL ä¸­å®šä¹‰è°“è¯å’Œç±»ã€‚è¿™å°†ä½¿ä½ çš„æŸ¥è¯¢é€»è¾‘æ›´æ˜“äºç†è§£ï¼Œå¹¶æœ‰åŠ©äºç®€åŒ–ä½ çš„ä¾¦æ¢å·¥ä½œã€‚</p><p>è¿™æ¬¡ä½ åªéœ€è¦è€ƒè™‘ä¸€ä¸ªç‰¹å®šçš„æ‘æ°‘ç¾¤ä½“ï¼Œå³ä½åœ¨æ‘åº„å—è¾¹çš„äººã€‚ä½ ä¸å¿…åœ¨æ‰€æœ‰æŸ¥è¯¢ä¸­éƒ½å†™ <code>getLocation() = &quot;south&quot; </code>ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªæ–°çš„è°“è¯ <code>isSouthern </code>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">predicate isSouthern(Person p) &#123;</span><br><span class="line">  p.getLocation() <span class="operator">=</span> &quot;south&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°“è¯ <code>isSouthern(p)</code> æ¥å—ä¸€ä¸ªå‚æ•° <code>p</code> å¹¶æ£€æŸ¥ <code>p</code> æ˜¯å¦æ»¡è¶³å±æ€§ <code>p.getLocation() = &quot;south&quot;</code> ã€‚</p><p>è°“è¯çš„åç§°æ€»æ˜¯ä»¥å°å†™å­—æ¯å¼€å¤´ã€‚</p><p>ç‹å† è¢«ç›—åå¼€å§‹å®æ–½æ—…è¡Œé™åˆ¶ã€‚æœ€åˆï¼Œæ‘æ°‘ä»¬å¯ä»¥åœ¨æ‘åº„å†…è‡ªç”±æ—…è¡Œï¼Œæ²¡æœ‰é™åˆ¶ã€‚å› æ­¤ï¼Œè°“è¯ isAllowedIn(string region) å¯¹ä»»ä½•äººå’Œä»»ä½•åœ°åŒºéƒ½æˆç«‹ã€‚ä»¥ä¸‹æŸ¥è¯¢åˆ—å‡ºäº†æ‰€æœ‰æ‘æ°‘ï¼Œå› ä¸ºä»–ä»¬éƒ½å¯ä»¥å»åŒ—æ–¹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Person p</span><br><span class="line"><span class="keyword">where</span> p.isAllowedIn(&quot;north&quot;)</span><br><span class="line"><span class="keyword">select</span> p</span><br></pre></td></tr></table></figure><p>ç„¶è€Œï¼Œåœ¨æœ€è¿‘çš„ç›—çªƒäº‹ä»¶åï¼Œæ‘æ°‘ä»¬å¯¹æ‘å‘¨å›´æ½œä¼çš„ç½ªçŠ¯å˜å¾—æ›´åŠ æ‹…å¿§ï¼Œä»–ä»¬ä¸å†å…è®¸ 10 å²ä»¥ä¸‹çš„å„¿ç«¥ç¦»å¼€ä»–ä»¬çš„å±…ä½åŒºåŸŸã€‚è¿™æ„å‘³ç€ <code>isAllowedIn(string region)</code> ä¸å†å¯¹æ‰€æœ‰äººå’Œæ‰€æœ‰åœ°åŒºæˆç«‹ï¼Œå› æ­¤å¦‚æœ p æ˜¯ä¸€ä¸ªå­©å­ï¼Œåº”è¯¥æš‚æ—¶è¦†ç›–åŸå§‹è°“è¯ã€‚</p><p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªåŒ…å«æ‰€æœ‰ 10 å²ä»¥ä¸‹æ‘æ°‘çš„ç±» <code>Child</code> ã€‚ç„¶åä½ å¯ä»¥å°† <code>isAllowedIn(string region)</code> é‡æ–°å®šä¹‰ä¸º <code>Child</code> çš„æˆå‘˜è°“è¯ï¼Œä»¥å…è®¸å„¿ç«¥åªåœ¨è‡ªå·±çš„åŒºåŸŸå†…ç§»åŠ¨ã€‚è¿™ç”± <code>region = this.getLocation()</code> è¡¨ç¤ºã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Child extends Person &#123;</span><br><span class="line">  <span class="comment">/* the characteristic predicate */</span></span><br><span class="line">  Child() &#123; this.getAge() <span class="operator">&lt;</span> <span class="number">10</span> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* a member predicate */</span></span><br><span class="line">  override predicate isAllowedIn(string region) &#123;</span><br><span class="line">    region <span class="operator">=</span> this.getLocation()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨å°è¯•å°† <code>isAllowedIn(string region)</code> åº”ç”¨äºä¸€ä¸ªäºº <code>p</code> ã€‚å¦‚æœ <code>p</code> ä¸æ˜¯å­©å­ï¼Œåˆ™ä½¿ç”¨åŸå§‹å®šä¹‰ï¼Œä½†å¦‚æœ <code>p</code> æ˜¯å­©å­ï¼Œåˆ™æ–°çš„è°“è¯å®šä¹‰ä¼šè¦†ç›–åŸå§‹å®šä¹‰ã€‚</p><p>çŸ¥é“ç«ç§è€…ä½åœ¨å—æ–¹ï¼Œè€Œä¸”ä»–ä»¬å¿…é¡»èƒ½å¤Ÿå‰å¾€åŒ—æ–¹ã€‚å†™ä¸€ä¸ªæŸ¥è¯¢æ¥æ‰¾å‡ºå¯èƒ½çš„å«Œç–‘äººã€‚ä¹Ÿå¯ä»¥æ‰©å±• select å­å¥æ¥åˆ—å‡ºå«Œç–‘äººçš„å¹´é¾„ã€‚è¿™æ ·å°±èƒ½æ¸…æ¥šåœ°çœ‹åˆ°æ‰€æœ‰å­©å­éƒ½è¢«æ’é™¤åœ¨åå•ä¹‹å¤–ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import tutorial</span><br><span class="line"></span><br><span class="line">predicate isSouthern(Person p) &#123; p.getLocation() <span class="operator">=</span> &quot;south&quot; &#125;</span><br><span class="line"></span><br><span class="line">class Southerner extends Person &#123;</span><br><span class="line">  <span class="comment">/* the characteristic predicate */</span></span><br><span class="line">  Southerner() &#123; isSouthern(this) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Child extends Person &#123;</span><br><span class="line">  <span class="comment">/* the characteristic predicate */</span></span><br><span class="line">  Child() &#123; this.getAge() <span class="operator">&lt;</span> <span class="number">10</span> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* a member predicate */</span></span><br><span class="line">  override predicate isAllowedIn(string region) &#123; region <span class="operator">=</span> this.getLocation() &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> Southerner s</span><br><span class="line"><span class="keyword">where</span> s.isAllowedIn(&quot;north&quot;)</span><br><span class="line"><span class="keyword">select</span> s, s.getAge()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> SAST </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SAST </tag>
            
            <tag> CodeQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinuxæœåŠ¡å™¨ç³»ç»Ÿèµ„æºæŸ¥çœ‹</title>
      <link href="/2025/12/17/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%E6%9F%A5%E7%9C%8B/"/>
      <url>/2025/12/17/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%E6%9F%A5%E7%9C%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="LinuxæœåŠ¡å™¨ç³»ç»Ÿèµ„æºæŸ¥çœ‹"><a href="#LinuxæœåŠ¡å™¨ç³»ç»Ÿèµ„æºæŸ¥çœ‹" class="headerlink" title="LinuxæœåŠ¡å™¨ç³»ç»Ÿèµ„æºæŸ¥çœ‹"></a>LinuxæœåŠ¡å™¨ç³»ç»Ÿèµ„æºæŸ¥çœ‹</h2><p>ç³»ç»Ÿæ€§åœ°æŸ¥çœ‹ Linux æœåŠ¡å™¨èµ„æºï¼Œä¹Ÿå°±æ˜¯çœ‹CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œã€è´Ÿè½½ã€ç³»ç»Ÿç­‰è¿™å‡ ä¸ªå±‚é¢ï¼Œå°±èƒ½äº†è§£æœåŠ¡å™¨æ€§èƒ½ä»¥åŠè¿è¡Œæƒ…å†µã€‚</p><h3 id="uptime"><a href="#uptime" class="headerlink" title="uptime"></a>uptime</h3><p>æŸ¥çœ‹ç³»ç»Ÿè´Ÿè½½å’Œè¿è¡Œæ—¶é—´</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uptime</span></span><br><span class="line"></span><br><span class="line">10:35:15 up  1:34, 13 <span class="built_in">users</span>,  load average: 0.41, 0.30, 0.25</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>10:35:15</code> è¡¨ç¤ºå½“å‰ç³»ç»Ÿæ—¶é—´æ˜¯ 10 ç‚¹ 35 åˆ† 15 ç§’ï¼Œ<code>up 1:34</code> è¡¨ç¤ºç³»ç»Ÿå·²ç»è¿ç»­è¿è¡Œäº† 1 å°æ—¶ 34 åˆ†é’Ÿï¼Œ<code>13 users</code>è¡¨ç¤ºå½“å‰æœ‰ 13 ä¸ªç”¨æˆ·ä¼šè¯ç™»å½•åˆ°ç³»ç»Ÿä¸­ï¼Œ<code>load average: 0.41, 0.30, 0.25</code> è¡¨ç¤ºç³»ç»Ÿè´Ÿè½½å‡å€¼ï¼ˆLoad Averageï¼‰ï¼Œè¡¨ç¤ºæ­£åœ¨è¿è¡Œ + ç­‰å¾…è¿è¡Œçš„è¿›ç¨‹æ•°é‡çš„å¹³å‡å€¼ï¼Œä¸‰ä¸ªæ•°å­—åˆ†åˆ«è¡¨ç¤ºæœ€è¿‘1&#x2F;5&#x2F;15 åˆ†é’Ÿçš„å¹³å‡è´Ÿè½½ã€‚</p><blockquote><p><strong>Load Average &#x3D; åœ¨æŸæ®µæ—¶é—´å†…ï¼Œå¤„äºã€Œå¯è¿è¡ŒçŠ¶æ€ã€å’Œã€Œä¸å¯ä¸­æ–­ç¡çœ çŠ¶æ€ã€è¿›ç¨‹æ•°é‡çš„æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡ï¼ˆEWMAï¼‰ï¼Œç»Ÿè®¡çš„æ˜¯æƒ³ç”¨ CPU çš„è¿›ç¨‹æœ‰å¤šå°‘ã€‚</strong></p></blockquote><h3 id="top"><a href="#top" class="headerlink" title="top"></a>top</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">top</span><br><span class="line"></span><br><span class="line">top - 10:52:33 up  1:52, 11 <span class="built_in">users</span>,  load average: 1.14, 0.57, 0.32</span><br><span class="line">Tasks: 2645 total,   2 running, 2643 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.1 us,  0.0 sy,  0.0 ni, 99.8 <span class="built_in">id</span>,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">MiB Mem : 10 total, 8 free,  6 used,  4 buff/cache</span><br><span class="line">MiB Swap:  3 total, 2 free,  1 used.  2 avail Mem</span><br><span class="line"></span><br><span class="line">    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND</span><br><span class="line">  77552 xrdp      20   0   50360  20344   6856 R  18.0   0.0   0:30.70 xrdp</span><br><span class="line">  77960 mark      20   0 9361988 422920 185124 S  14.1   0.1   0:59.67 gnome-shell</span><br><span class="line">  77569 mark      20   0  382544 138588  80324 S   5.6   0.0   0:11.17 Xorg</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¯¦è§£ top è¾“å‡ºå‘½ä»¤å†…å®¹ï¼š</p><p>ç¬¬ä¸€è¡Œè¡¨ç¤ºæ—¶é—´ã€è¿è¡Œæ—¶é•¿ã€ç™»å½•ç”¨æˆ·ã€å¹³å‡è´Ÿè½½ï¼›</p><p>ç¬¬äºŒè¡Œå±•ç¤ºäº†ä»»åŠ¡æ•°å’Œè¿›ç¨‹çŠ¶æ€ï¼ŒåŒ…å«è¿›ç¨‹&#x2F;çº¿ç¨‹ç»Ÿè®¡æ€»æ•°ã€æ­£åœ¨ CPU ä¸Šè¿è¡Œçš„ï¼ˆæˆ–å‡†å¤‡è¿è¡Œçš„ï¼‰ä»»åŠ¡æ•°ã€ç¡çœ ã€è¿›ç¨‹å’Œåƒµå°¸è¿›ç¨‹æ•°é‡ï¼›</p><p>ç¬¬ä¸‰è¡Œå±•ç¤ºäº† CPU ä½¿ç”¨æ„æˆï¼Œusç”¨æˆ·æ€ã€syå†…æ ¸æ€ã€niè¢«niceè°ƒæ•´è¿‡ä¼˜å…ˆçº§çš„ç”¨æˆ·æ€è¿›ç¨‹ã€id (idle) CPUç©ºé—²ç‡ã€wa CPUåœ¨ç­‰ IOï¼ˆç£ç›˜&#x2F;ç½‘ç»œå­˜å‚¨ï¼‰å¯¼è‡´ç©ºè½¬ç­‰å¾…ç‡ï¼Œhiç¡¬ä¸­æ–­æ¶ˆè€—ï¼Œsiè½¯ä¸­æ–­æ¶ˆè€—ï¼›</p><p>ç¬¬å››è¡Œå±•ç¤ºäº†å†…å­˜ï¼štotalæ€»å†…å­˜ã€freeå®Œå…¨ç©ºé—²å†…å­˜ã€usedçœŸæ­£è¢«è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜ã€buff&#x2F;cacheæ–‡ä»¶ç¼“å­˜å—è®¾å¤‡ç¼“å­˜ï¼›</p><p>ç¬¬äº”è¡Œå±•ç¤ºäº† Swap äº¤æ¢åˆ†åŒºï¼ŒSwapï¼ˆäº¤æ¢åˆ†åŒº&#x2F;äº¤æ¢æ–‡ä»¶ï¼‰æ˜¯å†…å­˜ä¸è¶³æ—¶çš„â€œå¤‡ç”¨ç©ºé—´â€ï¼Œå½“ ç‰©ç†å†…å­˜ï¼ˆRAMï¼‰ä¸å¤Ÿç”¨ æ—¶ï¼ŒLinux ä¼šæŠŠæš‚æ—¶ä¸ç”¨çš„å†…å­˜é¡µäº¤æ¢åˆ°ç£ç›˜ä¸Šçš„ swap ä¸­ï¼Œä»è€Œé˜²æ­¢ç³»ç»Ÿå› å†…å­˜è€—å°½è€Œç›´æ¥å´©æºƒï¼ˆOOMï¼‰ï¼Œè®©ç³»ç»Ÿè¿˜èƒ½ç»§ç»­è¿è¡Œï¼›</p><p>ä¸‹é¢å±•ç¤ºäº†ç³»ç»Ÿè¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯ï¼š</p><p>è¡¨å¤´ï¼š</p><p><code>PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND</code></p><p>PIDï¼šè¿›ç¨‹å·</p><p>USERï¼šæ‰€å±ç”¨æˆ·</p><p>PRï¼šåŠ¨æ€ä¼˜å…ˆçº§ï¼ˆæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼›20 å¸¸è§ï¼‰</p><p>NIï¼šnice å€¼ï¼ˆ-20 åˆ° 19ï¼Œè¶Šå°è¶Šâ€œæŠ¢â€CPUï¼›0 é»˜è®¤ï¼‰</p><p>VIRTï¼šè™šæ‹Ÿå†…å­˜å ç”¨ï¼ˆè¿›ç¨‹å¯è§çš„åœ°å€ç©ºé—´æ€»é‡ï¼ŒåŒ…å«æ˜ å°„æ–‡ä»¶ã€å…±äº«åº“ã€æœªå®é™…ç”¨åˆ°çš„ä¿ç•™ç©ºé—´ç­‰ï¼‰</p><p>RESï¼šå¸¸é©»å†…å­˜ï¼ˆå®é™…å ç”¨ç‰©ç†å†…å­˜ï¼Œæœ€å€¼å¾—å…³æ³¨ï¼‰</p><p>SHRï¼šå…±äº«å†…å­˜éƒ¨åˆ†ï¼ˆå…±äº«åº“ç­‰ï¼‰</p><p>Sï¼šçŠ¶æ€</p><p>R&#x3D;è¿è¡Œï¼ŒS&#x3D;ç¡çœ ï¼ŒD&#x3D;ä¸å¯ä¸­æ–­ç¡çœ (å¸¸è§ IO å¡ä½)ï¼ŒZ&#x3D;åƒµå°¸</p><p>%CPUï¼šCPU å æ¯”ï¼ˆæ³¨æ„ï¼šå¤šæ ¸æ—¶å¯èƒ½ &gt;100%ï¼‰</p><p>%MEMï¼šå†…å­˜å æ¯”</p><p>TIME+ï¼šç´¯è®¡æ¶ˆè€— CPU æ—¶é—´</p><p>COMMANDï¼šå‘½ä»¤å</p><h3 id="lscpu"><a href="#lscpu" class="headerlink" title="lscpu"></a>lscpu</h3><p>æŸ¥çœ‹ cpu æ¶æ„ï¼Œé‡ç‚¹å…³æ³¨ CPU å‹å·ã€æ•°é‡ã€è§£æ„ç­‰ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Architecture: x86_64</span><br><span class="line"></span><br><span class="line">Model name: AMD</span><br><span class="line"></span><br><span class="line">CPU(s):                2</span><br><span class="line">Thread(s) per core:    2</span><br><span class="line">Core(s) per socket:    1</span><br><span class="line">Socket(s):             1</span><br></pre></td></tr></table></figure><h3 id="free-h"><a href="#free-h" class="headerlink" title="free -h"></a>free -h</h3><p>æŸ¥çœ‹å†…å­˜èµ„æº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">free -h</span><br><span class="line">             total       used      free      shared  buff/cache   available</span><br><span class="line">Mem:           5Gi        1Gi       4Gi        87Mi         1Gi         3Gi</span><br><span class="line">Swap:          1Gi         0B       1Gi</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="df-h"><a href="#df-h" class="headerlink" title="df -h"></a>df -h</h3><p>æŸ¥çœ‹ç£ç›˜èµ„æº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -h</span><br><span class="line"></span><br><span class="line">Filesystem      Size  Used Avail  Use%  Mounted on</span><br><span class="line">tmpfs             2G  3.9M    1G   50%  /run</span><br><span class="line">/dev/nvme        10G    5G    5G   50%  /</span><br><span class="line">......</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ip-s-link"><a href="#ip-s-link" class="headerlink" title="ip -s link"></a>ip -s link</h3><p>æŸ¥çœ‹ç½‘ç»œèµ„æºï¼Œè¿™ä¸ªè¦è§†æƒ…å†µè€Œå®šï¼Œè¿˜æœ‰ssã€netstatç­‰å‘½ä»¤ã€‚</p><h3 id="uname-a"><a href="#uname-a" class="headerlink" title="uname -a"></a>uname -a</h3><p>æŸ¥çœ‹ç³»ç»ŸåŠå†…æ ¸ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -a</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> /etc/os-release</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="lspci"><a href="#lspci" class="headerlink" title="lspci"></a>lspci</h3><p>æŸ¥çœ‹ç³»ç»Ÿä¸­å®‰è£…çš„æ‰€æœ‰PCIè®¾å¤‡ã€‚</p><h3 id="nvidia-smi"><a href="#nvidia-smi" class="headerlink" title="nvidia-smi"></a>nvidia-smi</h3><p>æŸ¥çœ‹æ˜¾å¡å‹å·ã€‚</p><h2 id="æœåŠ¡å™¨ä½¿ç”¨è§„èŒƒ"><a href="#æœåŠ¡å™¨ä½¿ç”¨è§„èŒƒ" class="headerlink" title="æœåŠ¡å™¨ä½¿ç”¨è§„èŒƒ"></a>æœåŠ¡å™¨ä½¿ç”¨è§„èŒƒ</h2><p>w æˆ– who æŸ¥çœ‹å½“å‰åœ¨çº¿ç™»å½•çš„ç”¨æˆ·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸‹çš„æ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line"><span class="built_in">cat</span> /etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»ºç”¨æˆ·</span></span><br><span class="line"><span class="built_in">sudo</span> useradd name</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> useradd -m -s /bin/bash name</span><br><span class="line"></span><br><span class="line"><span class="comment"># -m è‡ªåŠ¨åˆ›å»ºå®¶ç›®å½•ï¼Œ-sæŒ‡å®šshell</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºæ–°ç”¨æˆ·æŒ‡å®šå¯†ç </span></span><br><span class="line"><span class="built_in">sudo</span> passwd name</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»™æ–°ç”¨æˆ·è¿½åŠ åˆ° sudo ç»„</span></span><br><span class="line"><span class="built_in">sudo</span> usermod -aG <span class="built_in">sudo</span> name</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç®€åŒ–ç‰ˆï¼Œæ·»åŠ ç”¨æˆ·æ—¶å³æŒ‡å®šå…¶åŠ å…¥sudoç»„</span></span><br><span class="line"><span class="built_in">sudo</span> useradd -m -s /bin/bash -G <span class="built_in">sudo</span> name</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢ç”¨æˆ·ç¯å¢ƒ - è¡¨ç¤ºåŠ è½½ç”¨æˆ·ç¯å¢ƒ</span></span><br><span class="line">su - name </span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Config </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vulnhalla QuickStart</title>
      <link href="/2025/12/16/Vulnhalla-QuickStart/"/>
      <url>/2025/12/16/Vulnhalla-QuickStart/</url>
      
        <content type="html"><![CDATA[<h2 id="Vulnhalla"><a href="#Vulnhalla" class="headerlink" title="Vulnhalla"></a>Vulnhalla</h2><p>Vulnhalla å¯ä»¥è‡ªåŠ¨åŒ–æ‰§è¡Œå®Œæ•´çš„å®‰å…¨åˆ†ææµç¨‹ (<a href="https://github.com/cyberark/Vulnhalla">https://github.com/cyberark/Vulnhalla</a>)</p><ol><li>ä» GitHub è·å–æŒ‡å®šç¼–ç¨‹è¯­è¨€çš„ä»£ç åº“</li><li>ä¸‹è½½å…¶å¯¹åº”çš„ CodeQL æ•°æ®åº“ï¼ˆå¦‚æœå¯ç”¨ï¼‰</li><li>åœ¨æ•°æ®åº“ä¸Šè¿è¡Œ CodeQL æŸ¥è¯¢ä»¥æ£€æµ‹å®‰å…¨æˆ–ä»£ç è´¨é‡é—®é¢˜</li><li>ä½¿ç”¨ LLMï¼ˆChatGPTã€Gemini ç­‰ï¼‰å¯¹ç»“æœè¿›è¡Œåç»­å¤„ç†ï¼Œä»¥åˆ†ç±»å’Œè¿‡æ»¤é—®é¢˜</li></ol><p>é¡¹ç›®æä¾›äº†ç›´æ¥ä» Github fetch repositories çš„èƒ½åŠ›ï¼Œä½†æ˜¯éœ€è¦æœ¬åœ°é…ç½® GitHub API tokenï¼Œä¸ºäº†ç®€åŒ–å®éªŒæµç¨‹ï¼Œå°±ç›´æ¥æŠŠè¦åˆ†æçš„ Program git clone åˆ°æœ¬åœ°ï¼Œç„¶åæœ¬åœ°ç”Ÿæˆ CodeQL Database å†è¿›è¡Œåç»­çš„ç»“æœå¤„ç†ï¼Œ<strong>è¿™ä¸ª Project çš„é‡ç‚¹å°±æ˜¯åœ¨äºç»“æœå¤„ç†</strong>ã€‚</p><h2 id="ğŸš€-QuickStart"><a href="#ğŸš€-QuickStart" class="headerlink" title="ğŸš€ QuickStart"></a>ğŸš€ QuickStart</h2><p>ç¯å¢ƒè¦æ±‚ï¼š</p><ul><li>python 3.11</li><li>CodeQL CLI</li><li>LLM API Key</li></ul><p>è™šæ‹Ÿç¯å¢ƒé…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">conda create -n vulnhalla python=3.11</span><br><span class="line"></span><br><span class="line">conda activate vulnhalla</span><br><span class="line"></span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>miniconda ä¸‹è½½å¯å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="/2025/12/07/Miniconda%E5%AE%89%E8%A3%85/" title="Minicondaå®‰è£…">Minicondaå®‰è£…</a>ã€‚</p><p>é…ç½®æ–‡ä»¶ä¿®æ”¹ project ä¸­ä»¥ OpenAI gpt-4oä¸ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CODEQL_PATH=codeql</span><br><span class="line">GITHUB_TOKEN=ghp_your_token_here</span><br><span class="line">PROVIDER=openai</span><br><span class="line">MODEL=gpt-4o</span><br><span class="line">OPENAI_API_KEY=your-api-key-here</span><br><span class="line">LLM_TEMPERATURE=0.2</span><br><span class="line">LLM_TOP_P=0.2</span><br><span class="line"></span><br><span class="line"># Optional: Logging Configuration</span><br><span class="line">LOG_LEVEL=INFO                  # DEBUG, INFO, WARNING, ERROR</span><br><span class="line">LOG_FILE=                       # Optional: path to log file (e.g., logs/vulnhalla.log)</span><br><span class="line">LOG_FORMAT=default              # default or json</span><br><span class="line"># LOG_VERBOSE_CONSOLE=false     # If true, WARNING/ERROR use full format (timestamp - logger - level - message)</span><br></pre></td></tr></table></figure><p>å‚æ•°è§£æï¼š</p><ul><li>CODEQL_PATHï¼šæŒ‡å®š CodeQL å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„æˆ–å‘½ä»¤åï¼Œç”¨äºè¿è¡Œä»£ç å®‰å…¨åˆ†æï¼ˆå¦‚æ¼æ´æ‰«æï¼‰ã€‚å¦‚æœå·²åŠ å…¥ç³»ç»Ÿ PATHï¼Œç›´æ¥å†™ codeql å³å¯ï¼›</li><li>GITHUB_TOKENï¼šGitHub è®¿é—®ä»¤ç‰Œï¼Œç”¨äºè®¿é—®ç§æœ‰ä»“åº“ã€æ‹‰å–ä»£ç ã€è°ƒç”¨ GitHub APIï¼ˆå¦‚è·å– PRã€Issueã€ä»“åº“ä¿¡æ¯ç­‰ï¼‰ï¼›</li><li>PROVIDER&#x2F;MODEL&#x2F;OPENAI_API_KEYï¼šå¤§æ¨¡å‹ç›¸å…³é…ç½®ï¼Œå¯æ›¿æ¢ä¸ºå¯¹åº”å‚å•†ï¼›</li><li>LLM_TEMPERATUREï¼šæ§åˆ¶æ¨¡å‹è¾“å‡ºçš„éšæœºæ€§ï¼Œå€¼è¶Šä½è¾“å‡ºè¶Šç¨³å®šã€ä¿å®ˆï¼Œé€‚åˆåˆ†æã€å®¡è®¡ã€ä»£ç æ£€æŸ¥ç­‰åœºæ™¯ï¼›</li><li>LLM_TOP_Pï¼šæ§åˆ¶é‡‡æ ·èŒƒå›´ï¼ˆnucleus samplingï¼‰ï¼Œé™åˆ¶æ¨¡å‹åœ¨é«˜æ¦‚ç‡è¯æ±‡ä¸­é€‰æ‹©ï¼Œè¿›ä¸€æ­¥æå‡ç»“æœä¸€è‡´æ€§å’Œå¯æ§æ€§ï¼›</li><li>LOG_LEVEL&#x3D;INFOï¼šæ—¥å¿—çº§åˆ«ï¼Œæ§åˆ¶è¾“å‡ºä¿¡æ¯çš„è¯¦ç»†ç¨‹åº¦ï¼ŒDEBUGæ˜¯æœ€è¯¦ç»†çš„ï¼›</li><li>LOG_FILEï¼šæ—¥å¿—æ–‡ä»¶è¾“å‡ºè·¯å¾„ï¼Œç•™ç©ºè¡¨ç¤ºä»…è¾“å‡ºåˆ°æ§åˆ¶å°ï¼›</li><li>LOG_FORMAT&#x2F;LOG_VERBOSE_CONSOLEï¼šæ—¥å¿—æ ¼å¼å’Œæ—¥å¿—è®°å½•æ ¼å¼ï¼›</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> .env.example .<span class="built_in">env</span></span><br><span class="line"></span><br><span class="line">python setup.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–CodeQLå¥—ä»¶</span></span><br><span class="line"><span class="built_in">cd</span> data/queries/cpp/tools</span><br><span class="line">codeql pack install</span><br><span class="line"><span class="built_in">cd</span> ../issues</span><br><span class="line">codeql pack install</span><br><span class="line"><span class="built_in">cd</span> ../../../..</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å•ä¸ªå‘½ä»¤è¿è¡Œå®Œæ•´çš„ pipelineï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Analyze a specific repository</span></span><br><span class="line">python src/pipeline.py redis/redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># Analyze top 100 repositories</span></span><br><span class="line">python src/pipeline.py</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª pipeline ä¼šè‡ªåŠ¨æ‰§è¡Œï¼šè·å–CodeQLæ•°æ®åº“ï¼Œåœ¨æ‰€æœ‰ä¸‹è½½çš„æ•°æ®åº“ä¸Šè¿è¡Œ CodeQL æŸ¥è¯¢ï¼Œä½¿ç”¨ LLM åˆ†æç»“æœå¹¶ä¿å­˜åˆ° output&#x2F;results&#x2F;ï¼Œæ‰“å¼€ UI æµè§ˆç»“æœã€‚</p><p>Project è¿˜æä¾›äº†ä¸€ä¸ªç¤ºä¾‹è„šæœ¬ï¼Œè¿è¡Œä¸€ä¸ªç«¯åˆ°ç«¯ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python examples/example.py</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª example ä¼šè·å– videolan&#x2F;vlc å’Œ redis&#x2F;redis çš„ CodeQL æ•°æ®åº“ï¼Œåœ¨æ‰€æœ‰ä¸‹è½½çš„æ•°æ®åº“ä¸Šè¿è¡Œ CodeQL æŸ¥è¯¢ï¼Œä½¿ç”¨ LLM åˆ†æç»“æœå¹¶ä¿å­˜åˆ° output&#x2F;results&#x2F;ã€‚</p><p>Vulnhalla åŒ…å«ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„ç”¨æˆ·ç•Œé¢ï¼Œç”¨äºæµè§ˆå’Œæ¢ç´¢åˆ†æç»“æœã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python src/ui/ui_app.py</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">python examples/ui_example.py</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼ŒVulnhalla ç¯å¢ƒé…ç½®å®Œæˆï¼Œå¯è¿è¡Œä¸€ä¸ªå®Œæ•´ pipelineã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Project </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CodeQL </tag>
            
            <tag> Project </tag>
            
            <tag> LLM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CodeQL-MCPæ¶æ„è§£è¯»</title>
      <link href="/2025/12/15/CodeQL-MCP%E6%9E%B6%E6%9E%84%E8%A7%A3%E8%AF%BB/"/>
      <url>/2025/12/15/CodeQL-MCP%E6%9E%B6%E6%9E%84%E8%A7%A3%E8%AF%BB/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç‰‡å†…å®¹ä»¥ <a href="https://github.com/JordyZomer/codeql-mcp">https://github.com/JordyZomer/codeql-mcp</a> ä¸ºåŸºç¡€ï¼Œè¿›è¡Œ CodeQL MCP çš„å¼€å‘å­¦ä¹ ã€‚</p><h2 id="CodeQL-MCP-æ•´ä½“æ¶æ„åˆ†æ"><a href="#CodeQL-MCP-æ•´ä½“æ¶æ„åˆ†æ" class="headerlink" title="CodeQL-MCP æ•´ä½“æ¶æ„åˆ†æ"></a>CodeQL-MCP æ•´ä½“æ¶æ„åˆ†æ</h2><p>é¡¹ç›®ä¸­åŒ…å«äº†ä¸¤ä¸ªæ ¸å¿ƒæ–‡ä»¶ <code>codeqlclient.py</code> å’Œ  <code>server.py</code> ï¼š</p><p><strong><code>codeqlclient.py</code></strong> æ˜¯ä¸€ä¸ªåº•å±‚é€šä¿¡å®¢æˆ·ç«¯ï¼Œè´Ÿè´£ä¸ CodeQL æŸ¥è¯¢æœåŠ¡å™¨å»ºç«‹å¹¶ç®¡ç† JSON-RPC è¿æ¥ã€‚å®ƒå°è£…äº†è¿›ç¨‹å¯åŠ¨ã€è¯·æ±‚å‘é€ã€å“åº”è§£æã€å¼‚æ­¥ä»»åŠ¡è·Ÿè¸ªç­‰å¤æ‚é€»è¾‘ï¼Œæä¾›äº†æ•°æ®åº“æ³¨å†Œã€æŸ¥è¯¢æ‰§è¡Œã€ç»“æœè§£ç ç­‰æ ¸å¿ƒæ“ä½œçš„åŸå§‹æ¥å£ã€‚è¯¥æ–‡ä»¶ä¸ä¾èµ–ä»»ä½•é«˜å±‚æ¡†æ¶ï¼Œä¸“æ³¨äºå¯é ã€é«˜æ•ˆåœ°ä¸ CodeQL å¼•æ“äº¤äº’ï¼Œå¯ä½œä¸ºç‹¬ç«‹åº“åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­å¤ç”¨ã€‚</p><p><strong><code>server.py</code></strong> æ˜¯ä¸€ä¸ªåŸºäº Model Context Protocolï¼ˆMCPï¼‰çš„æœåŠ¡å±‚å®ç°ï¼Œåˆ©ç”¨ FastMCP æ¡†æ¶å°† <code>codeqlclient.py</code> æä¾›çš„åº•å±‚èƒ½åŠ›åŒ…è£…ä¸ºç”¨æˆ·å‹å¥½çš„å¼‚æ­¥ API å·¥å…·ã€‚å®ƒå®šä¹‰äº†æ¸…æ™°çš„ HTTP å¯è°ƒç”¨æ¥å£ï¼Œå¤„ç†å‚æ•°éªŒè¯ã€é”™è¯¯åé¦ˆå’Œç»“æœæ ¼å¼åŒ–ï¼Œä½¿å¤–éƒ¨ç³»ç»Ÿèƒ½é€šè¿‡æ ‡å‡† MCP åè®®ä¾¿æ·åœ°ä½¿ç”¨ CodeQL åŠŸèƒ½ï¼Œè€Œæ— éœ€å…³å¿ƒåº•å±‚é€šä¿¡ç»†èŠ‚ã€‚</p><p>åœ¨ <code>codeqlclient.py</code> ä¸­åŒ…å«äº†ä¸€ä¸ªæ ¸å¿ƒç±»ç»“æ„ CodeQLQueryServer ä¸»è¦æ¨¡å—å¦‚ä¸‹ï¼š</p><ol><li>æœåŠ¡å™¨è¿›ç¨‹ç®¡ç†</li></ol><ul><li>å¯åŠ¨&#x2F;åœæ­¢ ï¼šé€šè¿‡ start() å’Œ stop() æ–¹æ³•ç®¡ç† CodeQL å­è¿›ç¨‹</li><li>è¿›ç¨‹é€šä¿¡ ï¼šä½¿ç”¨æ ‡å‡†è¾“å…¥&#x2F;è¾“å‡ºè¿›è¡Œ JSON-RPC é€šä¿¡</li><li>çº¿ç¨‹ç®¡ç† ï¼š<ul><li>_read_loop() ï¼šä¸»çº¿ç¨‹ï¼Œè¯»å–æœåŠ¡å™¨å“åº”ï¼›_stderr_loop() ï¼šå¤„ç†æ ‡å‡†é”™è¯¯è¾“å‡ºï¼›å¼‚æ­¥å¤„ç†ï¼šæ”¯æŒå¹¶å‘è¯·æ±‚</li></ul></li></ul><ol start="2"><li>é€šä¿¡åè®®å±‚</li></ol><ul><li>JSON-RPC 2.0ï¼šå®šä¹‰æ¶ˆæ¯æ ¼å¼ï¼Œè¯·æ±‚&#x2F;å“åº”ç»“æ„ï¼Œæ”¯æŒå¼‚æ­¥è°ƒç”¨</li></ul><ol start="3"><li>åŠŸèƒ½æ¨¡å—</li></ol><ul><li><p>æ•°æ®åº“ç®¡ç†</p><ul><li>register_databases() ï¼šæ³¨å†Œæ•°æ®åº“</li><li>deregister_databases() ï¼šæ³¨é”€æ•°æ®åº“</li></ul></li><li><p>æŸ¥è¯¢æ‰§è¡Œ</p><ul><li>evaluate_queries() ï¼šæ‰§è¡Œå®Œæ•´æŸ¥è¯¢</li><li>quick_evaluate() ï¼šå¿«é€Ÿè¯„ä¼°ï¼ˆé’ˆå¯¹ç‰¹å®šä»£ç ä½ç½®ï¼‰</li><li>evaluate_and_wait() ï¼šåŒæ­¥æ‰§è¡ŒæŸ¥è¯¢</li><li>quick_evaluate_and_wait() ï¼šåŒæ­¥å¿«é€Ÿè¯„ä¼°</li></ul></li><li><p>ç»“æœå¤„ç†</p><ul><li>decode_bqrs() ï¼šè§£ç  BQRS ç»“æœæ–‡ä»¶</li></ul></li><li><p>ä»£ç åˆ†æè¾…åŠ©</p><ul><li>find_class_identifier_position() ï¼šæŸ¥æ‰¾ç±»æ ‡è¯†ç¬¦ä½ç½®</li><li>find_predicate_identifier_position() ï¼šæŸ¥æ‰¾è°“è¯æ ‡è¯†ç¬¦ä½ç½®</li></ul></li><li><p>è¿›åº¦å›è°ƒæœºåˆ¶ï¼ˆæ”¯æŒå®æ—¶è¿›åº¦æ›´æ–°ï¼‰</p><ul><li>wait_for_progress_done() ï¼šç­‰å¾…è¿›åº¦å®Œæˆ</li><li>wait_for_completion_callback() ï¼šç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ</li><li>wait_for_progress_done() åˆ›å»ºè¿›åº¦è·Ÿè¸ªå™¨</li><li>wait_for_completion_callback() åˆ›å»ºå®Œæˆå¤„ç†å™¨</li></ul></li></ul><blockquote><p>æ•°æ®æµï¼šç”¨æˆ·è¯·æ±‚ -&gt; send_request()-&gt;JSON-RPC æ¶ˆæ¯-&gt;CodeQL æœåŠ¡å™¨-&gt;CodeQL å¼•æ“-&gt;æœåŠ¡å™¨å“åº”-&gt;_read_loop()-&gt;_handle_message()-&gt;å›è°ƒå‡½æ•°</p></blockquote><span id="more"></span><h2 id="å…³é”®æ¨¡å—è§£è¯»"><a href="#å…³é”®æ¨¡å—è§£è¯»" class="headerlink" title="å…³é”®æ¨¡å—è§£è¯»"></a>å…³é”®æ¨¡å—è§£è¯»</h2><h3 id="start"><a href="#start" class="headerlink" title="start()"></a>start()</h3><p>å¯åŠ¨ CodeQL æŸ¥è¯¢æœåŠ¡å™¨è¿›ç¨‹ï¼Œå¹¶å»ºç«‹é€šä¿¡é€šé“ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.proc = subprocess.Popen(</span><br><span class="line">    [</span><br><span class="line">        <span class="variable language_">self</span>.codeql_path,        <span class="comment"># CodeQL å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„</span></span><br><span class="line">        <span class="string">&quot;execute&quot;</span>,               <span class="comment"># æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">        <span class="string">&quot;query-server2&quot;</span>,         <span class="comment"># å¯åŠ¨æŸ¥è¯¢æœåŠ¡å™¨ç‰ˆæœ¬2</span></span><br><span class="line">        <span class="string">&quot;--debug&quot;</span>,               <span class="comment"># å¯ç”¨è°ƒè¯•æ¨¡å¼</span></span><br><span class="line">        <span class="string">&quot;--tuple-counting&quot;</span>,      <span class="comment"># å¯ç”¨å…ƒç»„è®¡æ•°ï¼ˆæ€§èƒ½ç›‘æ§ï¼‰</span></span><br><span class="line">        <span class="string">&quot;--threads=0&quot;</span>,           <span class="comment"># ä½¿ç”¨æ‰€æœ‰å¯ç”¨çº¿ç¨‹ï¼ˆ0=è‡ªåŠ¨ï¼‰</span></span><br><span class="line">        <span class="string">&quot;--evaluator-log-level&quot;</span>, <span class="comment"># è®¾ç½®è¯„ä¼°å™¨æ—¥å¿—çº§åˆ«</span></span><br><span class="line">        <span class="string">&quot;5&quot;</span>,                     <span class="comment"># æ—¥å¿—çº§åˆ«5ï¼ˆè¯¦ç»†ï¼‰</span></span><br><span class="line">        <span class="string">&quot;-v&quot;</span>,                    <span class="comment"># è¯¦ç»†è¾“å‡º</span></span><br><span class="line">        <span class="string">&quot;--log-to-stderr&quot;</span>,       <span class="comment"># æ—¥å¿—è¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯</span></span><br><span class="line">    ],</span><br><span class="line">    stdin=subprocess.PIPE,      <span class="comment"># æ ‡å‡†è¾“å…¥ç®¡é“ï¼ˆç”¨äºå‘é€è¯·æ±‚ï¼‰</span></span><br><span class="line">    stdout=subprocess.PIPE,     <span class="comment"># æ ‡å‡†è¾“å‡ºç®¡é“ï¼ˆç”¨äºæ¥æ”¶å“åº”ï¼‰</span></span><br><span class="line">    stderr=subprocess.PIPE,     <span class="comment"># æ ‡å‡†é”™è¯¯ç®¡é“ï¼ˆç”¨äºæ—¥å¿—/é”™è¯¯ï¼‰</span></span><br><span class="line">    text=<span class="literal">True</span>,                  <span class="comment"># ä»¥æ–‡æœ¬æ¨¡å¼å¤„ç†è¾“å…¥è¾“å‡º</span></span><br><span class="line">    bufsize=<span class="number">1</span>,                  <span class="comment"># è¡Œç¼“å†²æ¨¡å¼</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å¯åŠ¨è¯»å–çº¿ç¨‹ï¼šåˆ›å»ºä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹æ¥æŒç»­è¯»å–æœåŠ¡å™¨çš„æ ‡å‡†è¾“å‡ºï¼Œå¤„ç† JSON-RPC å“åº”ã€‚åŒæ—¶è¿˜æœ‰è¯»å–æ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œé˜²æ­¢ç¼“å†²åŒºé˜»å¡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.reader_thread = threading.Thread(</span><br><span class="line">    target=<span class="variable language_">self</span>._read_loop,  <span class="comment"># ç›®æ ‡å‡½æ•°ï¼šè¯»å–å¾ªç¯</span></span><br><span class="line">    daemon=<span class="literal">True</span>              <span class="comment"># å®ˆæŠ¤çº¿ç¨‹ï¼ˆä¸»ç¨‹åºé€€å‡ºæ—¶è‡ªåŠ¨ç»“æŸï¼‰</span></span><br><span class="line">)</span><br><span class="line"><span class="variable language_">self</span>.reader_thread.start()   <span class="comment"># å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">self</span>.stderr_thread = threading.Thread(</span><br><span class="line">    target=<span class="variable language_">self</span>._stderr_loop,  <span class="comment"># ç›®æ ‡å‡½æ•°ï¼šæ ‡å‡†é”™è¯¯å¾ªç¯</span></span><br><span class="line">    daemon=<span class="literal">True</span>                <span class="comment"># å®ˆæŠ¤çº¿ç¨‹</span></span><br><span class="line">)</span><br><span class="line"><span class="variable language_">self</span>.stderr_thread.start()     <span class="comment"># å¯åŠ¨çº¿ç¨‹</span></span><br></pre></td></tr></table></figure><h3 id="stderr-loop"><a href="#stderr-loop" class="headerlink" title="_stderr_loop()"></a>_stderr_loop()</h3><p>æ ‡å‡†é”™è¯¯å¤„ç†å¾ªç¯ï¼šæŒç»­è¯»å– CodeQLæœåŠ¡å™¨çš„æ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œé˜²æ­¢stderrç®¡é“å µå¡ï¼Œåœ¨ start() ä¸­ä½œä¸ºå®ˆæŠ¤çº¿ç¨‹å¯åŠ¨ã€‚</p><h3 id="read-loop"><a href="#read-loop" class="headerlink" title="_read_loop()"></a>_read_loop()</h3><p>ä¸»è¯»å–å¾ªç¯ï¼šè¯»å–å¹¶è§£ææœåŠ¡å™¨å“åº”ï¼Œå¤„ç† JSON-RPC over HTTP é£æ ¼çš„æ¶ˆæ¯æ ¼å¼ã€‚</p><h3 id="handle-message"><a href="#handle-message" class="headerlink" title="_handle_message()"></a>_handle_message()</h3><p>æ¶ˆæ¯åˆ†å‘å™¨ï¼šæ˜¯æ ¸å¿ƒçš„æ¶ˆæ¯å¤„ç†å‡½æ•°ï¼Œå¤„ç†ä¸‰ç§ç±»å‹çš„æ¶ˆæ¯ï¼š</p><ul><li>è¿›åº¦æ›´æ–°æ¶ˆæ¯ ( ql&#x2F;progressUpdated )ï¼šå¤„ç†æŸ¥è¯¢æ‰§è¡Œè¿›åº¦æ›´æ–°</li><li>è¯„ä¼°è¿›åº¦æ¶ˆæ¯ ( evaluation&#x2F;progress )ï¼šå¤„ç†è¯„ä¼°æ“ä½œçš„è¿›åº¦ä¿¡æ¯</li><li>è¯·æ±‚å“åº”æ¶ˆæ¯ï¼šå¤„ç†å¼‚æ­¥è¯·æ±‚çš„å“åº”</li></ul><h3 id="send"><a href="#send" class="headerlink" title="_send()"></a>_send()</h3><p>å‘é€è¯·æ±‚ï¼šå‘é€JSON-RPC è¯·æ±‚åˆ°æœåŠ¡å™¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">_send</span>(<span class="params">self, payload</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.proc <span class="keyword">or</span> <span class="keyword">not</span> <span class="variable language_">self</span>.proc.stdin:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;[!] Tried to send but process not running.&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        data = json.dumps(payload)</span><br><span class="line">        content = <span class="string">f&quot;Content-Length: <span class="subst">&#123;<span class="built_in">len</span>(data)&#125;</span>\r\n\r\n<span class="subst">&#123;data&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;\n[â†’] Sending request:\n<span class="subst">&#123;json.dumps(payload, indent=<span class="number">2</span>)&#125;</span>\n&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.proc.stdin.write(content)</span><br><span class="line">        <span class="variable language_">self</span>.proc.stdin.flush()</span><br></pre></td></tr></table></figure><h3 id="send-request"><a href="#send-request" class="headerlink" title="send_request()"></a>send_request()</h3><p>é«˜çº§å‘é€æ¥å£ï¼šå‘é€å¼‚æ­¥è¯·æ±‚å¹¶ç®¡ç†å›è°ƒï¼Œä¸ºæ¯ä¸ªè¯·æ±‚ç”Ÿæˆå”¯ä¸€IDï¼Œå…³è”è¯·æ±‚ ID ä¸å›è°ƒå‡½æ•°ï¼Œæ”¯æŒè¿›åº¦å›è°ƒæ³¨å†Œå’ŒçŠ¶æ€è·Ÿè¸ªã€‚</p><h3 id="stop"><a href="#stop" class="headerlink" title="stop()"></a>stop()</h3><p>åœæ­¢æœåŠ¡å™¨</p><h3 id="find-class-identifier-position"><a href="#find-class-identifier-position" class="headerlink" title="find_class_identifier_position()"></a>find_class_identifier_position()</h3><p>åœ¨ QL æ–‡ä»¶ä¸­æŸ¥æ‰¾ç±»åæ ‡è¯†ç¬¦çš„ä½ç½®ï¼Œè¿”å›åŸºäº 1 çš„è¡Œåˆ—åæ ‡ã€‚CodeQL å¿«é€Ÿè¯„ä¼°åŠŸèƒ½çš„å…³é”®ç»„ä»¶ï¼Œé€šè¿‡å®šä½ä»£ç ä¸­çš„ç‰¹å®šæ ‡è¯†ç¬¦ï¼Œå®ç°å¯¹éƒ¨åˆ†ä»£ç çš„é’ˆå¯¹æ€§åˆ†æã€‚</p><h3 id="find-predicate-identifier-position"><a href="#find-predicate-identifier-position" class="headerlink" title="find_predicate_identifier_position()"></a>find_predicate_identifier_position()</h3><p>åœ¨ QL æ–‡ä»¶ä¸­æŸ¥æ‰¾è°“è¯ï¼ˆpredicateï¼‰åç§°çš„ä½ç½®ï¼Œè¿”å›åŸºäº 1 çš„è¡Œåˆ—åæ ‡ã€‚</p><p>ç±»åæŸ¥æ‰¾å’Œè°“è¯æŸ¥æ‰¾å¯ä»¥ç”¨äºæ”¯æŒCodeQLçš„å¿«é€Ÿè¯„ä¼°åŠŸèƒ½ï¼Œå°±æ˜¯åªæ‰§è¡ŒæŸ¥è¯¢çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ‰§è¡Œå…¨é‡æŸ¥è¯¢ï¼Œå¯ä»¥è¿›è¡Œå¿«é€Ÿè¿­ä»£å’Œè°ƒè¯•ã€‚</p><h3 id="register-databases-deregister-databases"><a href="#register-databases-deregister-databases" class="headerlink" title="register_databases() &amp;&amp; deregister_databases()"></a>register_databases() &amp;&amp; deregister_databases()</h3><p>æ³¨å†Œæ³¨é”€æ•°æ®åº“ï¼šå‘ CodeQL æŸ¥è¯¢æœåŠ¡å™¨æ³¨å†Œä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®åº“ï¼Œä½¿å…¶å¯ç”¨äºæŸ¥è¯¢æ‰§è¡Œã€‚</p><p>è¿™æ˜¯CodeQLå®¢æˆ·ç«¯èµ„æºç®¡ç†çš„æ ¸å¿ƒï¼Œç¡®ä¿æ•°æ®åº“åœ¨æŸ¥è¯¢æ‰§è¡Œå‰æ­£ç¡®æ³¨å†Œï¼Œåœ¨æ‰§è¡ŒååŠæ—¶æ¸…ç†ï¼Œæ˜¯é«˜æ•ˆä½¿ç”¨ CodeQL æœåŠ¡å™¨çš„å…³é”®ç»„ä»¶ã€‚</p><h3 id="evaluate-queries"><a href="#evaluate-queries" class="headerlink" title="evaluate_queries()"></a>evaluate_queries()</h3><p>æ‰§è¡Œå®Œæ•´çš„ CodeQL æŸ¥è¯¢ ï¼šåœ¨æŒ‡å®šçš„æ•°æ®åº“ä¸Šè¿è¡Œä¸€ä¸ª QL æŸ¥è¯¢æ–‡ä»¶ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ°è¾“å‡ºæ–‡ä»¶ã€‚</p><ul><li>query_path ï¼šQL æŸ¥è¯¢æ–‡ä»¶è·¯å¾„</li><li>db_path ï¼šCodeQL æ•°æ®åº“è·¯å¾„</li><li>output_path ï¼šç»“æœè¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼ˆBQRS æ ¼å¼ï¼‰</li><li>callback ï¼šå¼‚æ­¥å®Œæˆå›è°ƒï¼ˆå¯é€‰ï¼‰</li><li>progress_callback ï¼šè¿›åº¦å›è°ƒï¼ˆå¯é€‰ï¼‰</li></ul><p>é»˜è®¤å®Œæˆå¤„ç†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">on_done</span>(<span class="params">result</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[evaluateQueries] done:&quot;</span>, result)</span><br><span class="line">    <span class="keyword">if</span> result.get(<span class="string">&quot;resultType&quot;</span>) != <span class="number">0</span>:  <span class="comment"># 0è¡¨ç¤ºæˆåŠŸ</span></span><br><span class="line">        <span class="keyword">raise</span> RuntimeError(<span class="string">f&quot;CodeQL evaluation failed: <span class="subst">&#123;result.get(<span class="string">&#x27;message&#x27;</span>, <span class="string">&#x27;Unknown error&#x27;</span>)&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>å‘é€å¼‚æ­¥è¯·æ±‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">self</span>.send_request(</span><br><span class="line">    <span class="string">&quot;evaluation/runQuery&quot;</span>,      <span class="comment"># JSON-RPCæ–¹æ³•</span></span><br><span class="line">    params,                     <span class="comment"># å‚æ•°</span></span><br><span class="line">    callback <span class="keyword">or</span> on_done,        <span class="comment"># ä½¿ç”¨ç”¨æˆ·å›è°ƒæˆ–é»˜è®¤å›è°ƒ</span></span><br><span class="line">    progress_callback=progress_callback  <span class="comment"># è¿›åº¦å›è°ƒ</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å‡½æ•°ä¼šæ‰§è¡Œæ•´ä¸ª QL æ–‡ä»¶çš„æ‰€æœ‰æŸ¥è¯¢ï¼Œæ”¯æŒå›è°ƒå’Œè¿›åº¦è·Ÿè¸ªã€‚</p><h3 id="evaluate-and-wait"><a href="#evaluate-and-wait" class="headerlink" title="evaluate_and_wait()"></a>evaluate_and_wait()</h3><p>åŒæ­¥æ‰§è¡Œå®Œæ•´æŸ¥è¯¢çš„ä¾¿æ·æ–¹æ³•ï¼Œå…¶ä¸­åŒ…è£…äº† evaluate_queries() çš„å¼‚æ­¥åŠŸèƒ½ï¼Œä½¿ç”¨ wait_for_progress_done() ç­‰å¾…æŸ¥è¯¢å®Œæˆï¼Œç®€åŒ–äº†åŒæ­¥ä½¿ç”¨åœºæ™¯ã€‚</p><h3 id="quick-evaluate-and-wait"><a href="#quick-evaluate-and-wait" class="headerlink" title="quick_evaluate_and_wait()"></a>quick_evaluate_and_wait()</h3><p>åŒæ­¥æ‰§è¡Œå¿«é€Ÿè¯„ä¼°ï¼ŒåŒ…è£…äº†quick_evaluate() çš„å¼‚æ­¥åŠŸèƒ½ï¼Œä½†æ˜¯éœ€è¦æŒ‡å®šä»£ç ä½ç½®ï¼ˆè¡Œã€åˆ—ï¼‰ã€‚</p><h3 id="quick-evaluate"><a href="#quick-evaluate" class="headerlink" title="quick_evaluate()"></a>quick_evaluate()</h3><p>æ‰§è¡Œå¿«é€Ÿè¯„ä¼°ï¼ˆQuick Evaluationï¼‰ ï¼šåªæ‰§è¡Œ QL æŸ¥è¯¢æ–‡ä»¶ä¸­ ç‰¹å®šä»£ç ç‰‡æ®µ çš„æŸ¥è¯¢ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ–‡ä»¶ã€‚</p><ul><li>file_path ï¼šQL æŸ¥è¯¢æ–‡ä»¶è·¯å¾„</li><li>db_path ï¼šCodeQL æ•°æ®åº“è·¯å¾„</li><li>output_path ï¼šç»“æœè¾“å‡ºæ–‡ä»¶è·¯å¾„</li><li>start_line , start_col ï¼šèµ·å§‹ä½ç½®ï¼ˆ1-basedï¼‰</li><li>end_line , end_col ï¼šç»“æŸä½ç½®ï¼ˆ1-basedï¼‰</li><li>callback ï¼šå¼‚æ­¥å®Œæˆå›è°ƒ</li><li>progress_callback ï¼šè¿›åº¦å›è°ƒ</li></ul><h3 id="wait-for-progress-done-wait-for-completion-callback"><a href="#wait-for-progress-done-wait-for-completion-callback" class="headerlink" title="wait_for_progress_done() &amp;&amp; wait_for_completion_callback()"></a>wait_for_progress_done() &amp;&amp; wait_for_completion_callback()</h3><p>åŠŸèƒ½ ï¼šåˆ›å»ºä¸€ä¸ªè¿›åº¦å®Œæˆç­‰å¾…å™¨ å’Œ å®Œæˆå›è°ƒç­‰å¾…å™¨ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯ å¼‚æ­¥è½¬åŒæ­¥ çš„å·¥å…·ï¼š</p><ul><li>å°†å¼‚æ­¥å›è°ƒæ¨¡å¼è½¬æ¢ä¸ºåŒæ­¥ç­‰å¾…æ¨¡å¼</li><li>ç®€åŒ–äº†ä¸éœ€è¦å¤æ‚å¼‚æ­¥å¤„ç†çš„åœºæ™¯</li><li>æä¾›äº†æ›´ç›´è§‚çš„APIä½¿ç”¨æ–¹å¼</li></ul><h2 id="MCP-Server-æ„å»º"><a href="#MCP-Server-æ„å»º" class="headerlink" title="MCP Server æ„å»º"></a>MCP Server æ„å»º</h2><p>åŸºäº FastMCP æ¡†æ¶æ„å»ºçš„ CodeQL åˆ†ææœåŠ¡å™¨ï¼Œæä¾›äº† 6 ä¸ªå·¥å…·æ¥ä¸ CodeQL è¿›è¡Œäº¤äº’ã€‚</p><h3 id="æ ¸å¿ƒç»„ä»¶"><a href="#æ ¸å¿ƒç»„ä»¶" class="headerlink" title="æ ¸å¿ƒç»„ä»¶"></a>æ ¸å¿ƒç»„ä»¶</h3><p>æœåŠ¡å™¨åˆå§‹åŒ–ï¼šä½¿ç”¨ FastMCP åˆ›å»ºåä¸º â€œCodeQLâ€ çš„ MCP æœåŠ¡å™¨ï¼Œå®ä¾‹åŒ– CodeQLQueryServer å¹¶å¯åŠ¨ï¼Œç”¨äºå¤„ç† CodeQL æŸ¥è¯¢æ“ä½œã€‚</p><h3 id="å·¥å…·è¯´æ˜"><a href="#å·¥å…·è¯´æ˜" class="headerlink" title="å·¥å…·è¯´æ˜"></a>å·¥å…·è¯´æ˜</h3><ol><li>register_database</li></ol><p>æ³¨å†Œ CodeQL æ•°æ®åº“åˆ°æŸ¥è¯¢æœåŠ¡å™¨ã€‚éªŒè¯æ•°æ®åº“è·¯å¾„å’Œå¿…éœ€çš„ src.zip æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚</p><ol start="2"><li>quick_evaluate</li></ol><p>å¿«é€Ÿè¯„ä¼° CodeQL æŸ¥è¯¢æ–‡ä»¶ä¸­çš„ç‰¹å®šç±»æˆ–è°“è¯ï¼Œè‡ªåŠ¨å®šä½ç¬¦å·ä½ç½®å¹¶æ‰§è¡Œè¯„ä¼°ã€‚</p><ol start="3"><li>decode_bqrs</li></ol><p>è§£ç  CodeQL ç»“æœæ–‡ä»¶ï¼ˆ.bqrs æ ¼å¼ï¼‰ï¼Œæ”¯æŒ CSVï¼ˆç”¨äºé—®é¢˜æŸ¥è¯¢ï¼‰æˆ– JSONï¼ˆç”¨äºè·¯å¾„é—®é¢˜ï¼‰æ ¼å¼ã€‚</p><ol start="4"><li>evaluate_query</li></ol><p>åœ¨æŒ‡å®šæ•°æ®åº“ä¸Šè¿è¡Œå®Œæ•´çš„ CodeQL æŸ¥è¯¢æ–‡ä»¶ã€‚</p><ol start="5"><li>find_class_position</li></ol><p>æŸ¥æ‰¾æŸ¥è¯¢æ–‡ä»¶ä¸­ç±»å®šä¹‰çš„å‡†ç¡®ä½ç½®ï¼ˆè¡Œå·å’Œåˆ—å·ï¼‰ã€‚</p><ol start="6"><li>find_predicate_position</li></ol><p>æŸ¥æ‰¾æŸ¥è¯¢æ–‡ä»¶ä¸­è°“è¯å®šä¹‰çš„å‡†ç¡®ä½ç½®ï¼ˆè¡Œå·å’Œåˆ—å·ï¼‰ã€‚</p><h3 id="MCP-Server-ä»£ç "><a href="#MCP-Server-ä»£ç " class="headerlink" title="MCP Server ä»£ç "></a>MCP Server ä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">mcp = FastMCP(<span class="string">&quot;CodeQL&quot;</span>)</span><br><span class="line">qs = CodeQLQueryServer()</span><br><span class="line">qs.start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@mcp.tool()</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">register_database</span>(<span class="params">db_path: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;This tool registers a CodeQL database given a path&quot;&quot;&quot;</span></span><br><span class="line">    db_path_resolved = Path(db_path).resolve()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> db_path_resolved.exists():</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Database path does not exist: <span class="subst">&#123;db_path&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    source_zip = db_path_resolved / <span class="string">&quot;src.zip&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> source_zip.exists():</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Missing required src.zip in: <span class="subst">&#123;db_path&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    db_entry = &#123;</span><br><span class="line">        <span class="string">&quot;uri&quot;</span>: Path(db_path).resolve().as_uri(),</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;sourceArchiveZip&quot;</span>: (Path(db_path) / <span class="string">&quot;src.zip&quot;</span>).resolve().as_uri(),</span><br><span class="line">            <span class="string">&quot;dbDir&quot;</span>: Path(db_path).resolve().as_uri(),</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">    callback, done, result_holder = qs.wait_for_completion_callback()</span><br><span class="line">    qs.register_databases(</span><br><span class="line">        [db_path],</span><br><span class="line">        callback=callback,</span><br><span class="line">        progress_callback=<span class="keyword">lambda</span> msg: <span class="built_in">print</span>(<span class="string">&quot;[progress] register:&quot;</span>, msg),</span><br><span class="line">    )</span><br><span class="line">    done.wait()</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;Database registered: <span class="subst">&#123;db_path&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@mcp.tool()</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">quick_evaluate</span>(<span class="params"></span></span><br><span class="line"><span class="params">    file: <span class="built_in">str</span>, db: <span class="built_in">str</span>, symbol: <span class="built_in">str</span>, output_path: <span class="built_in">str</span> = <span class="string">&quot;/tmp/quickeval.bqrs&quot;</span></span></span><br><span class="line"><span class="params"></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;This will allow you to quick_evaluate either a class or a predicate in a codeql query&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        start, scol, end, ecol = qs.find_class_identifier_position(file, symbol)</span><br><span class="line">    <span class="keyword">except</span> ValueError:</span><br><span class="line">        start, scol, end, ecol = qs.find_predicate_identifier_position(</span><br><span class="line">            file, symbol</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        qs.quick_evaluate_and_wait(</span><br><span class="line">            file, db, output_path, start, scol, end, ecol</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">except</span> RuntimeError <span class="keyword">as</span> re:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;CodeQL evaluation failed: <span class="subst">&#123;re&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">return</span> output_path</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@mcp.tool()</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">decode_bqrs</span>(<span class="params">bqrs_path: <span class="built_in">str</span>, fmt: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;This can be used to decode CodeQL results, format is either csv for problem queries or json for path-problems&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> qs.decode_bqrs(bqrs_path, fmt)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@mcp.tool()</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">evaluate_query</span>(<span class="params"></span></span><br><span class="line"><span class="params">    query_path: <span class="built_in">str</span>, db_path: <span class="built_in">str</span>, output_path: <span class="built_in">str</span> = <span class="string">&quot;/tmp/eval.bqrs&quot;</span></span></span><br><span class="line"><span class="params"></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Runs a CodeQL query on a given database&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        qs.evaluate_and_wait(query_path, db_path, output_path)</span><br><span class="line">    <span class="keyword">except</span> RuntimeError <span class="keyword">as</span> re:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;CodeQL evaluation failed: <span class="subst">&#123;re&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">return</span> output_path</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@mcp.tool()</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">find_class_position</span>(<span class="params">file: <span class="built_in">str</span>, name: <span class="built_in">str</span></span>) -&gt; <span class="built_in">dict</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Finds startline, startcol, endline endcol of a class for quickeval&quot;&quot;&quot;</span></span><br><span class="line">    start, scol, end, ecol = qs.find_class_identifier_position(file, name)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&quot;start_line&quot;</span>: start,</span><br><span class="line">        <span class="string">&quot;start_col&quot;</span>: scol,</span><br><span class="line">        <span class="string">&quot;end_line&quot;</span>: end,</span><br><span class="line">        <span class="string">&quot;end_col&quot;</span>: ecol,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@mcp.tool()</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">find_predicate_position</span>(<span class="params">file: <span class="built_in">str</span>, name: <span class="built_in">str</span></span>) -&gt; <span class="built_in">dict</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Finds startline, startcol, endline endcol of a predicate for quickeval&quot;&quot;&quot;</span></span><br><span class="line">    start, scol, end, ecol = qs.find_predicate_identifier_position(file, name)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&quot;start_line&quot;</span>: start,</span><br><span class="line">        <span class="string">&quot;start_col&quot;</span>: scol,</span><br><span class="line">        <span class="string">&quot;end_line&quot;</span>: end,</span><br><span class="line">        <span class="string">&quot;end_col&quot;</span>: ecol,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Starting CodeQL MCP server...&quot;</span>)</span><br><span class="line">    mcp.run(host=<span class="string">&quot;0.0.0.0&quot;</span>, port=<span class="number">8000</span>)</span><br></pre></td></tr></table></figure><h2 id="MCP-Server-æµ‹è¯•"><a href="#MCP-Server-æµ‹è¯•" class="headerlink" title="MCP Server æµ‹è¯•"></a>MCP Server æµ‹è¯•</h2><p>ä»¥æ³¨å†Œæ•°æ®åº“ä¸ºä¾‹ï¼Œè¿›è¡ŒMCP ServeråŠŸèƒ½æµ‹è¯•ï¼š</p><p>é¦–å…ˆå¯åŠ¨ MCP Serverï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">(really_mcp) PS D:\Projects\codeql-mcp&gt; uv run mcp run server.py -t sse</span><br><span class="line">[*] Read loop started</span><br><span class="line">INFO:     Started server process [23464]</span><br><span class="line">INFO:     Waiting <span class="keyword">for</span> application startup.</span><br><span class="line">INFO:     Application startup complete.</span><br><span class="line">INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ cursor çš„ MCP tools é¡µé¢åŠ è½½å¯¹åº”å·¥å…·ï¼Œé€‰æ‹©å¯ç”¨çŠ¶æ€ï¼š</p><p><img src="/../uploads/CodeQL_MCP_1.png"></p><p>å¯¹åº”é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><p><img src="/../uploads/CodeQL_MCP_2.png"></p><p>MCP ServerçŠ¶æ€ä¸ Tools è°ƒç”¨æƒ…å†µï¼š</p><p><img src="/../uploads/CodeQL_MCP_3.png"></p><p>ä»¥ä¸ŠéªŒè¯ CodeQL MCP å¯æˆåŠŸè°ƒç”¨å¹¶æ‰§è¡Œã€‚</p><p>ä¸æœåŠ¡å™¨é€šä¿¡çš„æ•°æ®åŒ…æ•°æ®ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Accepted</span><br><span class="line">[12/15/25 20:26:54] INFO     Processing request of type CallToolRequest                   server.py:674</span><br><span class="line">[DEBUG] Sending evaluation/registerDatabases with progressId=0</span><br><span class="line"></span><br><span class="line">[â†’] Sending request:</span><br><span class="line">&#123;</span><br><span class="line">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span><br><span class="line">  &quot;id&quot;: 1,</span><br><span class="line">  &quot;method&quot;: &quot;evaluation/registerDatabases&quot;,</span><br><span class="line">  &quot;params&quot;: &#123;</span><br><span class="line">    &quot;body&quot;: &#123;</span><br><span class="line">      &quot;databases&quot;: [</span><br><span class="line">        &quot;D:\\Code\\codeql-mcp\\Test_demo\\test_db&quot;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;progressId&quot;: 0</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[stdout] Content-Length: 102</span><br><span class="line">[raw response body] &#123;&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:1,&quot;result&quot;:&#123;&quot;registeredDatabases&quot;:[&quot;D:\\Code\\codeql-mcp\\Test_demo\\test_db&quot;]&#125;&#125;</span><br><span class="line"></span><br><span class="line">[â†] Received response:</span><br><span class="line">&#123;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span><br><span class="line">  &quot;id&quot;: 1,</span><br><span class="line">  &quot;result&quot;: &#123;</span><br><span class="line">    &quot;registeredDatabases&quot;: [</span><br><span class="line">      &quot;D:\\Code\\codeql-mcp\\Test_demo\\test_db&quot;</span><br><span class="line">  &quot;id&quot;: 1,</span><br><span class="line">  &quot;result&quot;: &#123;</span><br><span class="line">    &quot;registeredDatabases&quot;: [</span><br><span class="line">      &quot;D:\\Code\\codeql-mcp\\Test_demo\\test_db&quot;</span><br><span class="line">  &quot;result&quot;: &#123;</span><br><span class="line">    &quot;registeredDatabases&quot;: [</span><br><span class="line">      &quot;D:\\Code\\codeql-mcp\\Test_demo\\test_db&quot;</span><br><span class="line">    &quot;registeredDatabases&quot;: [</span><br><span class="line">      &quot;D:\\Code\\codeql-mcp\\Test_demo\\test_db&quot;</span><br><span class="line">      &quot;D:\\Code\\codeql-mcp\\Test_demo\\test_db&quot;</span><br><span class="line">    ]</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">INFO:     127.0.0.1:56577 - &quot;POST /messages/?session_id=d8bc9c141a864777b7a094f0a6abc6ad HTTP/1.1&quot; 202 Accepted</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CodeQL </tag>
            
            <tag> MCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MCP stdioä¸sseæ¨¡å¼çš„åŒºåˆ«</title>
      <link href="/2025/12/15/MCP-stdio%E4%B8%8Esse%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2025/12/15/MCP-stdio%E4%B8%8Esse%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<h2 id="SSE-å’Œ-stdio-æ¨¡å¼å¯¹æ¯”"><a href="#SSE-å’Œ-stdio-æ¨¡å¼å¯¹æ¯”" class="headerlink" title="SSE å’Œ stdio æ¨¡å¼å¯¹æ¯”"></a>SSE å’Œ stdio æ¨¡å¼å¯¹æ¯”</h2><h3 id="æ¶æ„å·®å¼‚"><a href="#æ¶æ„å·®å¼‚" class="headerlink" title="æ¶æ„å·®å¼‚"></a>æ¶æ„å·®å¼‚</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">stdio æ¨¡å¼ï¼š</span><br><span class="line">Cursor/Claude Desktop</span><br><span class="line">    â””â”€ å¯åŠ¨å­è¿›ç¨‹ï¼špython server.py</span><br><span class="line">        â””â”€ stdin/stdout é€šä¿¡</span><br><span class="line">        â””â”€ æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸç”±å®¢æˆ·ç«¯ç®¡ç†</span><br><span class="line"></span><br><span class="line">SSE æ¨¡å¼ï¼š</span><br><span class="line">ç‹¬ç«‹è¿è¡Œï¼špython server.py (åå°æŒç»­è¿è¡Œ)</span><br><span class="line">    â†‘</span><br><span class="line">    â””â”€ HTTP SSE è¿æ¥</span><br><span class="line">    â†‘</span><br><span class="line">Cursor/Claude Desktop (é€šè¿‡ HTTP è¿æ¥)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è¯¦ç»†å¯¹æ¯”"><a href="#è¯¦ç»†å¯¹æ¯”" class="headerlink" title="è¯¦ç»†å¯¹æ¯”"></a>è¯¦ç»†å¯¹æ¯”</h3><table><thead><tr><th>ç‰¹æ€§</th><th>stdio æ¨¡å¼</th><th>SSE æ¨¡å¼</th></tr></thead><tbody><tr><td><strong>å¯åŠ¨æ–¹å¼</strong></td><td>å®¢æˆ·ç«¯è‡ªåŠ¨å¯åŠ¨</td><td>æ‰‹åŠ¨å¯åŠ¨ï¼ˆç‹¬ç«‹è¿›ç¨‹ï¼‰</td></tr><tr><td><strong>é€šä¿¡åè®®</strong></td><td>stdin&#x2F;stdout ç®¡é“</td><td>HTTP + Server-Sent Events</td></tr><tr><td><strong>è¿æ¥æ–¹å¼</strong></td><td>å•ä¸€å®¢æˆ·ç«¯</td><td>å¤šå®¢æˆ·ç«¯æ”¯æŒ</td></tr><tr><td><strong>è°ƒè¯•éš¾åº¦</strong></td><td>éš¾ï¼ˆæ—¥å¿—æ··åœ¨ä¸€èµ·ï¼‰</td><td>æ˜“ï¼ˆå¯ç›´æ¥æŸ¥çœ‹ç»ˆç«¯ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>ç”Ÿäº§ç¯å¢ƒ</td><td>å¼€å‘è°ƒè¯•</td></tr><tr><td><strong>è¿›ç¨‹ç®¡ç†</strong></td><td>è‡ªåŠ¨ï¼ˆéšå®¢æˆ·ç«¯ï¼‰</td><td>æ‰‹åŠ¨ï¼ˆéœ€è¦å•ç‹¬ç®¡ç†ï¼‰</td></tr><tr><td><strong>ç½‘ç»œè¦æ±‚</strong></td><td>æ— </td><td>éœ€è¦ç›‘å¬ç«¯å£</td></tr><tr><td><strong>æ—¥å¿—å¯è§æ€§</strong></td><td>ä½</td><td>é«˜</td></tr></tbody></table><h3 id="æµ‹è¯•æ—¶ä¸ºä»€ä¹ˆé€‰æ‹©-SSEï¼Ÿ"><a href="#æµ‹è¯•æ—¶ä¸ºä»€ä¹ˆé€‰æ‹©-SSEï¼Ÿ" class="headerlink" title="æµ‹è¯•æ—¶ä¸ºä»€ä¹ˆé€‰æ‹© SSEï¼Ÿ"></a>æµ‹è¯•æ—¶ä¸ºä»€ä¹ˆé€‰æ‹© SSEï¼Ÿ</h3><ul><li><p>âœ… å¼€å‘è°ƒè¯•æ›´æ–¹ä¾¿ï¼šå¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯çœ‹åˆ°æ‰€æœ‰æ—¥å¿—ï¼Œæ‰‹åŠ¨é‡å¯æœåŠ¡å™¨ï¼Œç”¨æµè§ˆå™¨æµ‹è¯•è¿æ¥ï¼›</p></li><li><p>âœ… å¤šå®¢æˆ·ç«¯æ”¯æŒï¼šå¤šä¸ª IDE å¯ä»¥åŒæ—¶è¿æ¥ï¼Œå¯ä»¥åŒæ—¶åœ¨ Cursor å’Œ Claude Desktop ä¸­ä½¿ç”¨ï¼›</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> MCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MCPç¼–ç¨‹å¿«é€Ÿå…¥é—¨ï¼ˆä¸‰ï¼‰</title>
      <link href="/2025/12/12/MCP%E7%BC%96%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>/2025/12/12/MCP%E7%BC%96%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="MCP-Server-å¼€å‘å®è·µ"><a href="#MCP-Server-å¼€å‘å®è·µ" class="headerlink" title="MCP Server å¼€å‘å®è·µ"></a>MCP Server å¼€å‘å®è·µ</h2><p>å¯¹äºå¤§éƒ¨åˆ† AI å¼€å‘è€…æ¥è¯´ï¼ŒMCP åªéœ€è¦å…³å¿ƒ Server çš„å®ç°ï¼Œé€šè¿‡ä¸€ä¸ªç®€å•ç¤ºä¾‹å­¦ä¹ å¦‚ä½•å®ç°ä¸€ä¸ª MCP Serverã€‚</p><p>MCP Server å¯ä»¥æä¾›ä¸‰ç§ä¸»è¦ç±»å‹çš„åŠŸèƒ½ï¼š</p><ul><li>Resourcesï¼ˆèµ„æºï¼‰ï¼šç±»ä¼¼æ–‡ä»¶çš„æ•°æ®ï¼Œå¯ä»¥è¢«å®¢æˆ·ç«¯è¯»å–ï¼›</li><li>Toolsï¼ˆå·¥å…·ï¼‰ï¼šå¯ä»¥è¢«LLMè°ƒç”¨çš„å‡½æ•°ï¼›</li><li>Promptï¼ˆæç¤ºï¼‰ï¼šé¢„å…ˆç¼–å†™çš„æ¨¡ç‰ˆï¼Œå¸®åŠ©ç”¨æˆ·å®Œæˆç‰¹å®šä»»åŠ¡ï¼›</li></ul><p>ä»»åŠ¡ï¼šä½¿ç”¨Pythonå®ç°ä¸€ä¸ªMCP Serverï¼Œç”¨æ¥ç»Ÿè®¡å½“å‰æ¡Œé¢ä¸Šçš„ txt æ–‡ä»¶æ•°é‡å’Œè·å–å¯¹åº”æ–‡ä»¶çš„åå­—ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">from</span> mcp.server.fastmcp <span class="keyword">import</span> FastMCP</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º MCP Server</span></span><br><span class="line">mcp = FastMCP(<span class="string">&quot;æ¡Œé¢ TXT æ–‡ä»¶ç»Ÿè®¡å™¨&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@mcp.tool()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">count_desktop_txt_files</span>() -&gt; <span class="built_in">int</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Count the number of .txt files on the desktop.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># Get the desktop path</span></span><br><span class="line">    username = os.getenv(<span class="string">&quot;USER&quot;</span>) <span class="keyword">or</span> os.getenv(<span class="string">&quot;USERNAME&quot;</span>)</span><br><span class="line">    desktop_path = Path(<span class="string">f&quot;C:\\Users\\<span class="subst">&#123;username&#125;</span>\\Desktop&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Count .txt files</span></span><br><span class="line">    txt_files = <span class="built_in">list</span>(desktop_path.glob(<span class="string">&quot;*.txt&quot;</span>))</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(txt_files)</span><br><span class="line"></span><br><span class="line"><span class="meta">@mcp.tool()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">list_desktop_txt_files</span>() -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Get a list of all .txt filenames on the desktop.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># Get the desktop path</span></span><br><span class="line">    username = os.getenv(<span class="string">&quot;USER&quot;</span>) <span class="keyword">or</span> os.getenv(<span class="string">&quot;USERNAME&quot;</span>)</span><br><span class="line">    desktop_path = Path(<span class="string">f&quot;C:\\Users\\<span class="subst">&#123;username&#125;</span>\\Desktop&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Get all .txt files</span></span><br><span class="line">    txt_files = <span class="built_in">list</span>(desktop_path.glob(<span class="string">&quot;*.txt&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Return the filenames</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> txt_files:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;No .txt files found on desktop.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Format the list of filenames</span></span><br><span class="line">    file_list = <span class="string">&quot;\n&quot;</span>.join([<span class="string">f&quot;- <span class="subst">&#123;file.name&#125;</span>&quot;</span> <span class="keyword">for</span> file <span class="keyword">in</span> txt_files])</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;Found <span class="subst">&#123;<span class="built_in">len</span>(txt_files)&#125;</span> .txt files on desktop:\n<span class="subst">&#123;file_list&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># Initialize and run the server</span></span><br><span class="line">    mcp.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="MCP-Server-æµ‹è¯•"><a href="#MCP-Server-æµ‹è¯•" class="headerlink" title="MCP Server æµ‹è¯•"></a>MCP Server æµ‹è¯•</h3><p>æµ‹è¯• MCP Serverï¼Œ <code>mcp dev server.py</code> ï¼Œè¿›è¡ŒæœåŠ¡æµ‹è¯•ã€‚</p><p><img src="/../uploads/MCP_12.png"></p><p>å¦‚å›¾æ‰€ç¤ºï¼ŒæˆåŠŸç”Ÿæˆäº†å¯¹åº”çš„ Tool Result ï¼Œå³ä¸ºæµ‹è¯•æˆåŠŸã€‚</p><h3 id="æ¥å…¥-Claude-Desktop"><a href="#æ¥å…¥-Claude-Desktop" class="headerlink" title="æ¥å…¥ Claude Desktop"></a>æ¥å…¥ Claude Desktop</h3><p>è¿™é‡Œ Claude Desktop æ³¨å†Œæ—¶éœ€è¦æ‰‹æœºå·ç»‘å®šï¼Œç›®å‰æ²¡æœ‰å¤–å›½æ‰‹æœºå·ï¼Œæ‰€ä»¥æ‰¾äº†ä¸ªå¹³æ›¿çš„å¹³å° Traeã€‚</p><p>é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;server_txt&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:\\Users\\77319\\.local\\bin\\uv.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;--directory&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;D:\\Code\\mcp-demo&quot;</span><span class="punctuation">,</span> <span class="comment">// ä½ çš„é¡¹ç›®è·¯å¾„ï¼ˆè¿™é‡Œæ˜¯æˆ‘çš„ï¼‰</span></span><br><span class="line">        <span class="string">&quot;run&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;server_txt.py&quot;</span> <span class="comment">// ä½ çš„ MCP Server æ–‡ä»¶å</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æ‰‹åŠ¨æ·»åŠ  MCP é…ç½®ï¼š</p><p><img src="/../uploads/MCP_13.png"></p><p>é€‰æ‹© MCP ï¼š</p><p><img src="/../uploads/MCP_14.png"></p><p>æå‡ºé—®é¢˜ï¼šå¸®æˆ‘åˆ†ææ¡Œé¢txtæ–‡ä»¶çš„å«ä¹‰</p><p>æ€è€ƒè¿‡ç¨‹ï¼š</p><p>ç”¨æˆ·è®©æˆ‘æ¨æµ‹æ¡Œé¢txtæ–‡ä»¶åçš„å«ä¹‰ï¼Œä¹‹å‰å·²ç»é€šè¿‡MCPå·¥å…·è·å–åˆ°æ¡Œé¢ä¸Šæœ‰3ä¸ªtxtæ–‡ä»¶ï¼š</p><ul><li>3.å¤šæ¨¡æ€ä¿¡æ¯èåˆ.txt</li><li>API Key.txt</li><li>å¯†ç æœ¬.txt<br>æˆ‘éœ€è¦åŸºäºæ–‡ä»¶åæ¥æ¨æµ‹å®ƒä»¬çš„å«ä¹‰ï¼Œä¸éœ€è¦æŸ¥çœ‹æ–‡ä»¶å†…å®¹ã€‚è®©æˆ‘åˆ†ææ¯ä¸ªæ–‡ä»¶åï¼š</li></ul><ol><li><p>â€œ3.å¤šæ¨¡æ€ä¿¡æ¯èåˆ.txtâ€ï¼š</p><ul><li>â€œ3.â€ å¯èƒ½è¡¨ç¤ºè¿™æ˜¯ä¸€ç³»åˆ—æ–‡ä»¶ä¸­çš„ç¬¬3ä¸ª</li><li>â€œå¤šæ¨¡æ€ä¿¡æ¯èåˆâ€ æ˜¯ä¸€ä¸ªä¸“ä¸šæœ¯è¯­ï¼Œé€šå¸¸æŒ‡å°†ä¸åŒç±»å‹çš„æ•°æ®ï¼ˆå¦‚æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰ï¼‰ç»“åˆèµ·æ¥è¿›è¡Œåˆ†æå’Œå¤„ç†</li><li>è¿™ä¸ªæ–‡ä»¶å¯èƒ½åŒ…å«å…³äºå¤šæ¨¡æ€ä¿¡æ¯èåˆæŠ€æœ¯çš„ç¬”è®°ã€ç ”ç©¶æˆ–èµ„æ–™</li></ul></li><li><p>â€œAPI Key.txtâ€ï¼š</p><ul><li>â€œAPI Keyâ€ æ˜¯åº”ç”¨ç¨‹åºæ¥å£å¯†é’¥çš„ç¼©å†™ï¼Œç”¨äºèº«ä»½éªŒè¯å’Œæˆæƒ</li><li>è¿™ä¸ªæ–‡ä»¶å¯èƒ½åŒ…å«å„ç§æœåŠ¡æˆ–å¹³å°çš„APIå¯†é’¥</li></ul></li><li><p>â€œå¯†ç æœ¬.txtâ€ï¼š</p><ul><li>â€œå¯†ç æœ¬â€ é€šå¸¸æŒ‡å­˜å‚¨å¯†ç çš„æ–‡æ¡£</li><li>è¿™ä¸ªæ–‡ä»¶å¯èƒ½åŒ…å«å„ç§è´¦æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ä¿¡æ¯</li></ul></li></ol><p>æˆ‘éœ€è¦å°†è¿™äº›åˆ†ææ•´ç†æˆä¸€ä¸ªæ¸…æ™°çš„å›åº”ã€‚</p><p>å›å¤å†…å®¹ï¼š</p><p>åŸºäºä¹‹å‰è·å–çš„æ¡Œé¢ä¸Šçš„txtæ–‡ä»¶åï¼Œæˆ‘å¯ä»¥æ¨æµ‹å®ƒä»¬çš„å«ä¹‰ã€‚è®©æˆ‘åˆ†ææ¯ä¸ªæ–‡ä»¶åå¹¶æä¾›åˆç†çš„è§£é‡Šã€‚åŸºäºæ¡Œé¢txtæ–‡ä»¶åï¼Œæˆ‘å¯ä»¥åšå‡ºä»¥ä¸‹æ¨æµ‹ï¼š</p><ol><li><p><strong>3.å¤šæ¨¡æ€ä¿¡æ¯èåˆ.txt</strong></p><ul><li>â€œ3.â€ å¯èƒ½è¡¨ç¤ºè¿™æ˜¯ä¸€ç³»åˆ—ç›¸å…³æ–‡ä»¶ä¸­çš„ç¬¬3ä¸ª</li><li>â€œå¤šæ¨¡æ€ä¿¡æ¯èåˆâ€ æ˜¯äººå·¥æ™ºèƒ½é¢†åŸŸçš„ä¸“ä¸šæœ¯è¯­ï¼ŒæŒ‡å°†ä¸åŒç±»å‹çš„æ•°æ®ï¼ˆå¦‚æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ç­‰ï¼‰ç»“åˆèµ·æ¥è¿›è¡Œåˆ†æå’Œå¤„ç†çš„æŠ€æœ¯</li><li>è¿™ä¸ªæ–‡ä»¶å¾ˆå¯èƒ½åŒ…å«å…³äºå¤šæ¨¡æ€ä¿¡æ¯èåˆæŠ€æœ¯çš„ç ”ç©¶èµ„æ–™ã€å­¦ä¹ ç¬”è®°æˆ–é¡¹ç›®æ–‡æ¡£</li></ul></li><li><p><strong>API Key.txt</strong></p><ul><li>â€œAPI Keyâ€ï¼ˆåº”ç”¨ç¨‹åºæ¥å£å¯†é’¥ï¼‰æ˜¯ç”¨äºèº«ä»½éªŒè¯å’Œæˆæƒçš„å®‰å…¨å‡­è¯</li><li>è¿™ä¸ªæ–‡ä»¶å¯èƒ½å­˜å‚¨äº†å„ç§åœ¨çº¿æœåŠ¡ã€å¼€å‘å¹³å°æˆ–åº”ç”¨ç¨‹åºçš„APIå¯†é’¥ï¼Œæ–¹ä¾¿ç”¨æˆ·åœ¨å¼€å‘æˆ–ä½¿ç”¨ç›¸å…³æœåŠ¡æ—¶å¿«é€Ÿè·å–</li></ul></li><li><p><strong>å¯†ç æœ¬.txt</strong></p><ul><li>â€œå¯†ç æœ¬â€ æ˜¯ä¸€ä¸ªå¸¸è§çš„æœ¯è¯­ï¼ŒæŒ‡ä¸“é—¨ç”¨äºè®°å½•å¯†ç çš„æ–‡æ¡£</li><li>è¿™ä¸ªæ–‡ä»¶å¾ˆå¯èƒ½åŒ…å«äº†ç”¨æˆ·åœ¨å„ç§ç½‘ç«™ã€åº”ç”¨ç¨‹åºæˆ–æœåŠ¡ä¸Šçš„è´¦æˆ·åç§°å’Œå¯¹åº”çš„å¯†ç ä¿¡æ¯ï¼Œç”¨äºé›†ä¸­ç®¡ç†å’Œè®°å¿†</li></ul></li></ol><p>è¿™äº›æ–‡ä»¶éƒ½ä¸æ•°å­—ä¿¡æ¯ç®¡ç†å’ŒæŠ€æœ¯ç›¸å…³ï¼Œå¯èƒ½æ˜¯ç”¨æˆ·åœ¨å­¦ä¹ ã€å·¥ä½œæˆ–æ—¥å¸¸ä½¿ç”¨è®¡ç®—æœºæ—¶åˆ›å»ºçš„é‡è¦å‚è€ƒæ–‡æ¡£ã€‚</p><p>ä¸Šè¿°ç»“æœè¡¨æ˜ MCP Server å·²ç»å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> MCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OSCPå­¦ä¹ å¿ƒå¾—</title>
      <link href="/2025/12/12/OSCP%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/"/>
      <url>/2025/12/12/OSCP%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ OSCP çš„å­¦ä¹ å’Œç»ƒä¹ ä»¥åŠæ‰“é¶åœºæˆ–è€…æ¸—é€æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘è®¤ä¸ºæœ¬è´¨ä¸Šä¸æ˜¯æŒæ¡äº†å¤šå°‘å·¥å…·ï¼Œè€Œæ˜¯åœ¨è§„å®šæ—¶é—´å†…ï¼Œèƒ½ä¸èƒ½æŠŠæ¸—é€çš„å…¨æµç¨‹è·‘å®Œï¼Œå…³é”®æ­¥éª¤ä¸Šæ€ç»´èƒ½å¦å‘æ•£ï¼Œèƒ½å¦æœ‰è¾ƒä¸ºå…¨é¢çš„æ€è€ƒå’Œæšä¸¾ï¼Œæ‰€ä»¥é‡å¿ƒè¿˜æ˜¯åœ¨æ€è·¯ä¸Šï¼Œæ¸—é€çš„æ€è·¯å’Œåº”å¯¹å…³é”®ç‚¹æ—¶çš„ç»éªŒï¼Œæ‰€ä»¥è®°å½•ä¸€äº›è‡ªå·±çš„æ€è€ƒã€‚</p><h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>é‡ç‚¹åœ¨äºè¦†ç›–é¢å’Œå¯ç”¨æ€§ï¼š</p><ul><li>è¦†ç›–é¢ï¼šå…¨ç«¯å£ï¼ˆæœåŠ¡ï¼‰æ‰«æï¼Œä¸è¦æ¼æ‰æœåŠ¡ï¼Œä¸ç„¶å¯èƒ½ä¼šæ‰¾ä¸åˆ°æ­£ç¡®çš„å…¥å£ç‚¹ï¼›</li><li>å¯ç”¨æ€§ï¼šä¸åŒæœåŠ¡ã€ç‰ˆæœ¬éƒ½æœ‰ä»€ä¹ˆæ¼æ´ï¼Œæ˜¯å¦å…·å¤‡åˆ©ç”¨æ¡ä»¶ï¼Œæ— æ³•åˆ©ç”¨çš„è¯æ˜¯ä¸æ˜¯åŠ äº†ä»€ä¹ˆé™åˆ¶ï¼Œæ˜¯éœ€è¦ç»•è¿‡é™åˆ¶è¿˜æ˜¯éœ€è¦è½¬å˜è·¯å¾„ï¼Œè¿™äº›å±äºèƒ½å¦å®ç°åˆ©ç”¨çš„èŒƒç•´ï¼›</li></ul><blockquote><p><strong>ä¿¡æ¯æ”¶é›†è¦å¾—å‡ºä¸€ä¸ªç»“è®ºï¼šæˆ‘åˆ°åº•èƒ½æ‰“å“ªäº›å…¥å£ï¼Ÿå“ªäº›å…¥å£æœ€å¯èƒ½å®ç°è¾¹ç•Œçªç ´ï¼Ÿ</strong></p></blockquote><h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><p>æ¼æ´åˆ©ç”¨é˜¶æ®µä¸è¦ç›²ç›®è·‘expï¼Œæœ€å¥½æ˜¯å…ˆéªŒè¯æ§åˆ¶ç¨‹åº¦ï¼Œå†æ‹¿shellã€‚</p><p>å…ˆç¡®å®šæ¼æ´æ˜¯å¦çœŸå®å­˜åœ¨ï¼Œæ¼æ´å¯æ§ç‚¹åœ¨å“ªé‡Œï¼Œè¾“å…¥å¦‚ä½•å½±å“è¾“å‡ºï¼Œç„¶åå†ç¡®è®¤æ§åˆ¶æ·±åº¦ï¼ˆèƒ½å¦è¯»å†™æ–‡ä»¶&#x2F;å‘½ä»¤æ‰§è¡Œ&#x2F;é‰´æƒç»•è¿‡ï¼‰ï¼Œæœ€ååœ¨æ‹¿ç¨³å®šshellã€‚</p><blockquote><p><strong>å…ˆçœ‹èƒ½ä¸èƒ½éªŒè¯æ¸…æ¥šï¼Œåœ¨è€ƒè™‘èƒ½å¦ä¸€æ­¥åˆ°ä½ã€‚</strong></p></blockquote><h2 id="æƒé™æå‡"><a href="#æƒé™æå‡" class="headerlink" title="æƒé™æå‡"></a>æƒé™æå‡</h2><p>ææƒå¹¶æ²¡æœ‰æ·±å…¥å­¦ä¹ å¤ªå¤šï¼Œä½†æ˜¯æ„Ÿè§‰åº”è¯¥åœ¨äºæ‰¾åˆ°â€œæƒé™è¾¹ç•Œè¢«ç ´åâ€çš„è¯æ®ï¼Œå¯ä»¥æ ¹æ®å†å²ç»éªŒå¯»æ‰¾çº¿ç´¢ï¼Œæ‰¾åˆ°ç¨³å®šå¯å¤ç°çš„æ€è·¯ã€‚</p><h2 id="æ¨ªå‘ç§»åŠ¨"><a href="#æ¨ªå‘ç§»åŠ¨" class="headerlink" title="æ¨ªå‘ç§»åŠ¨"></a>æ¨ªå‘ç§»åŠ¨</h2><blockquote><p><strong>ä¿¡ä»»å…³ç³»+å‡­è¯æµå‘</strong>: ä»ä»¥æ§åˆ¶ä¸»æœºæŠŠå½±å“åŠ›æ‰©åˆ°æ›´æœ‰ä»·å€¼çš„ä¸»æœº&#x2F;è´¦å·&#x2F;ç½‘æ®µç­‰ã€‚</p></blockquote><hr><p>â­<strong>æŒç»­æ›´æ–° To be continuedâ€¦â€¦</strong></p>]]></content>
      
      
      <categories>
          
          <category> OSCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OSCP </tag>
            
            <tag> Penetration Test </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MCPç¼–ç¨‹å¿«é€Ÿå…¥é—¨ï¼ˆäºŒï¼‰</title>
      <link href="/2025/12/11/MCP%E7%BC%96%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2025/12/11/MCP%E7%BC%96%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¨¡å‹å¦‚ä½•ç¡®å®šå·¥å…·é€‰ç”¨ï¼Ÿ"><a href="#æ¨¡å‹å¦‚ä½•ç¡®å®šå·¥å…·é€‰ç”¨ï¼Ÿ" class="headerlink" title="æ¨¡å‹å¦‚ä½•ç¡®å®šå·¥å…·é€‰ç”¨ï¼Ÿ"></a>æ¨¡å‹å¦‚ä½•ç¡®å®šå·¥å…·é€‰ç”¨ï¼Ÿ</h2><p>Anthropic è¯¦ç»†è§£é‡Šäº†è¿™ä¸ªé—®é¢˜ï¼šæ¨¡å‹åœ¨ä»€ä¹ˆæ—¶å€™ç¡®å®šä½¿ç”¨å“ªäº›å·¥å…·ã€‚</p><p>å½“ç”¨æˆ·æå‡ºä¸€ä¸ªé—®é¢˜æ—¶ï¼š</p><ol><li>å®¢æˆ·ç«¯ï¼ˆClaude Desktop &#x2F; Cursorï¼‰å°†é—®é¢˜å‘é€ç»™ Claudeï¼›</li><li>Claude åˆ†æå¯ç”¨çš„å·¥å…·ï¼Œå¹¶å†³å®šä½¿ç”¨å“ªä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰ï¼›</li><li>å®¢æˆ·ç«¯é€šè¿‡ MCP Server æ‰§è¡Œæ‰€é€‰çš„å·¥å…·ï¼›</li><li>å·¥å…·çš„æ‰§è¡Œç»“æœè¢«é€å›ç»™ Claudeï¼›</li><li>Claude ç»“åˆæ‰§è¡Œç»“æœæ„é€ æœ€ç»ˆçš„ prompt å¹¶ç”Ÿæˆè‡ªç„¶è¯­è¨€çš„å›åº”ï¼›</li><li>å›åº”æœ€ç»ˆå±•ç¤ºç»™ç”¨æˆ·ï¼</li></ol><p>MCP Server æ˜¯ç”± Claude ä¸»åŠ¨é€‰æ‹©å¹¶è°ƒç”¨çš„ï¼Œè¿™ä¸ªä¸»åŠ¨é€‰æ‹©çš„è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸¤æ­¥ï¼š</p><ol><li>ç”± LLMï¼ˆClaudeï¼‰ç¡®å®šä½¿ç”¨å“ªäº› MCP Serverï¼›</li><li>æ‰§è¡Œå¯¹åº”çš„ MCP Server å¹¶å¯¹æ‰§è¡Œç»“æœè¿›è¡Œé‡æ–°å¤„ç†ï¼›</li></ol><p>MCP æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="/../uploads/MCP_11.jpg"></p><p>æµç¨‹å›¾å±•ç¤ºäº† LLM åœ¨æ¥æ”¶åˆ°ç”¨æˆ·è¾“å…¥åï¼Œæ ¹æ®ç³»ç»Ÿæç¤ºä¸­æä¾›çš„æŒ‡ä»¤ä¸å·¥å…·æè¿°ï¼Œå†³å®šæ˜¯å¦éœ€è¦è°ƒç”¨å¤–éƒ¨å·¥å…·ï¼ˆåŒ…æ‹¬ MCP Server æä¾›çš„å·¥å…·ï¼‰ã€‚<br>é¦–å…ˆï¼Œç”¨æˆ·è¾“å…¥ä¸ç³»ç»Ÿ promptï¼ˆåŒ…å«å·¥å…·çš„ç»“æ„åŒ–æè¿°ï¼‰ä¸€åŒäº¤ç»™æ¨¡å‹ç”Ÿæˆ Message1ã€‚å¦‚æœæ¨¡å‹åˆ¤æ–­æŸä¸ªä»»åŠ¡éœ€è¦å€ŸåŠ©å·¥å…·å®Œæˆï¼ˆCase 1ï¼‰ï¼Œå®ƒä¼šç”Ÿæˆä¸€æ®µç»“æ„åŒ–çš„ Tool call JSONï¼Œå¹¶ç”±å¤–éƒ¨æ‰§è¡Œç¯å¢ƒæˆ– MCP Server è´Ÿè´£å®é™…æ‰§è¡Œå·¥å…·é€»è¾‘ã€‚æ‰§è¡Œç»“æœå†è¿”å›ç»™æ¨¡å‹ï¼Œæ¨¡å‹åŸºäºè¿™ä»½ç»“æœç”Ÿæˆæœ€ç»ˆå›ç­”ï¼›<br>å¦‚æœæ¨¡å‹åˆ¤æ–­ä¸éœ€è¦å·¥å…·ï¼ˆCase 2ï¼‰ï¼Œåˆ™ç›´æ¥ç”Ÿæˆæœ€ç»ˆè¾“å‡ºã€‚<br>æ•´ä¸ªæµç¨‹ä½“ç°äº†ï¼šLLM è´Ÿè´£â€œå†³å®šç”¨ä»€ä¹ˆå·¥å…·åŠå¦‚ä½•è°ƒç”¨â€ï¼Œè€Œ MCP Servers ç­‰å¤–éƒ¨ç³»ç»Ÿè´Ÿè´£â€œå®é™…æ‰§è¡Œä»»åŠ¡å¹¶è¿”å›æ•°æ®â€ï¼Œä»è€Œå®ç°æ¨¡å‹ä¸å¤–éƒ¨èƒ½åŠ›çš„åä½œã€‚</p><span id="more"></span><h2 id="æ¨¡å‹å¦‚ä½•æ™ºèƒ½é€‰æ‹©å·¥å…·ï¼Ÿ"><a href="#æ¨¡å‹å¦‚ä½•æ™ºèƒ½é€‰æ‹©å·¥å…·ï¼Ÿ" class="headerlink" title="æ¨¡å‹å¦‚ä½•æ™ºèƒ½é€‰æ‹©å·¥å…·ï¼Ÿ"></a>æ¨¡å‹å¦‚ä½•æ™ºèƒ½é€‰æ‹©å·¥å…·ï¼Ÿ</h2><p>æ¨¡å‹å¦‚ä½•ç¡®å®šè¯¥ä½¿ç”¨å“ªäº›å·¥å…·ï¼ŒMCP å®˜æ–¹æä¾›çš„ client example ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">self</span>):</span><br><span class="line">     <span class="comment"># åˆå§‹åŒ–æ‰€æœ‰çš„ mcp server</span></span><br><span class="line">     <span class="keyword">for</span> server <span class="keyword">in</span> <span class="variable language_">self</span>.servers:</span><br><span class="line">         <span class="keyword">await</span> server.initialize()</span><br><span class="line"> â€‹</span><br><span class="line">     <span class="comment"># è·å–æ‰€æœ‰çš„ tools å‘½åä¸º all_tools</span></span><br><span class="line">     all_tools = []</span><br><span class="line">     <span class="keyword">for</span> server <span class="keyword">in</span> <span class="variable language_">self</span>.servers:</span><br><span class="line">         tools = <span class="keyword">await</span> server.list_tools()</span><br><span class="line">         all_tools.extend(tools)</span><br><span class="line"> â€‹</span><br><span class="line">     <span class="comment"># å°†æ‰€æœ‰çš„ tools çš„åŠŸèƒ½æè¿°æ ¼å¼åŒ–æˆå­—ç¬¦ä¸²ä¾› LLM ä½¿ç”¨</span></span><br><span class="line">     <span class="comment"># tool.format_for_llm() æˆ‘æ”¾åˆ°äº†è¿™æ®µä»£ç æœ€åï¼Œæ–¹ä¾¿é˜…è¯»ã€‚</span></span><br><span class="line">     <span class="comment"># ä¸º LLM ç”Ÿæˆå·¥å…·è¯´æ˜æ–‡æ¡£ï¼Œå‘Šè¯‰æ¨¡å‹ï¼šæœ‰å“ªäº›å·¥å…·ã€å„è‡ªå¹²å•¥ã€è¦ä»€ä¹ˆå‚æ•°ã€‚</span></span><br><span class="line">     tools_description = <span class="string">&quot;\n&quot;</span>.join(</span><br><span class="line">         [tool.format_for_llm() <span class="keyword">for</span> tool <span class="keyword">in</span> all_tools]</span><br><span class="line">     )</span><br><span class="line"> â€‹</span><br><span class="line">     <span class="comment"># è¿™é‡Œå°±ä¸ç®€åŒ–äº†ï¼Œä»¥ä¾›å‚è€ƒï¼Œå®é™…ä¸Šå°±æ˜¯åŸºäº prompt å’Œå½“å‰æ‰€æœ‰å·¥å…·çš„ä¿¡æ¯</span></span><br><span class="line">     <span class="comment"># è¯¢é—® LLMï¼ˆClaudeï¼‰ åº”è¯¥ä½¿ç”¨å“ªäº›å·¥å…·ã€‚</span></span><br><span class="line">     system_message = (</span><br><span class="line">         <span class="string">&quot;You are a helpful assistant with access to these tools:\n\n&quot;</span></span><br><span class="line">         <span class="string">f&quot;<span class="subst">&#123;tools_description&#125;</span>\n&quot;</span></span><br><span class="line">         <span class="string">&quot;Choose the appropriate tool based on the user&#x27;s question. &quot;</span></span><br><span class="line">         <span class="string">&quot;If no tool is needed, reply directly.\n\n&quot;</span></span><br><span class="line">         <span class="string">&quot;IMPORTANT: When you need to use a tool, you must ONLY respond with &quot;</span></span><br><span class="line">         <span class="string">&quot;the exact JSON object format below, nothing else:\n&quot;</span></span><br><span class="line">         <span class="string">&quot;&#123;\n&quot;</span></span><br><span class="line">         <span class="string">&#x27;    &quot;tool&quot;: &quot;tool-name&quot;,\n&#x27;</span></span><br><span class="line">         <span class="string">&#x27;    &quot;arguments&quot;: &#123;\n&#x27;</span></span><br><span class="line">         <span class="string">&#x27;        &quot;argument-name&quot;: &quot;value&quot;\n&#x27;</span></span><br><span class="line">         <span class="string">&quot;    &#125;\n&quot;</span></span><br><span class="line">         <span class="string">&quot;&#125;\n\n&quot;</span></span><br><span class="line">         <span class="string">&quot;After receiving a tool&#x27;s response:\n&quot;</span></span><br><span class="line">         <span class="string">&quot;1. Transform the raw data into a natural, conversational response\n&quot;</span></span><br><span class="line">         <span class="string">&quot;2. Keep responses concise but informative\n&quot;</span></span><br><span class="line">         <span class="string">&quot;3. Focus on the most relevant information\n&quot;</span></span><br><span class="line">         <span class="string">&quot;4. Use appropriate context from the user&#x27;s question\n&quot;</span></span><br><span class="line">         <span class="string">&quot;5. Avoid simply repeating the raw data\n\n&quot;</span></span><br><span class="line">         <span class="string">&quot;Please use only the tools that are explicitly defined above.&quot;</span></span><br><span class="line">     )</span><br><span class="line">     messages = [&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>, <span class="string">&quot;content&quot;</span>: system_message&#125;]</span><br><span class="line"> â€‹</span><br><span class="line">     <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">         <span class="comment"># Final... å‡è®¾è¿™é‡Œå·²ç»å¤„ç†äº†ç”¨æˆ·æ¶ˆæ¯è¾“å…¥.</span></span><br><span class="line">         messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: user_input&#125;)</span><br><span class="line"> â€‹</span><br><span class="line">         <span class="comment"># å°† system_message å’Œç”¨æˆ·æ¶ˆæ¯è¾“å…¥ä¸€èµ·å‘é€ç»™ LLM</span></span><br><span class="line">         llm_response = <span class="variable language_">self</span>.llm_client.get_response(messages)</span><br><span class="line"> â€‹</span><br><span class="line">     ... <span class="comment"># åé¢å’Œç¡®å®šä½¿ç”¨å“ªäº›å·¥å…·æ— å…³</span></span><br><span class="line">     </span><br><span class="line"> â€‹</span><br><span class="line"> <span class="keyword">class</span> <span class="title class_">Tool</span>:</span><br><span class="line">     <span class="string">&quot;&quot;&quot;Represents a tool with its properties and formatting.&quot;&quot;&quot;</span></span><br><span class="line"> â€‹</span><br><span class="line">     <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"></span></span><br><span class="line"><span class="params">         self, name: <span class="built_in">str</span>, description: <span class="built_in">str</span>, input_schema: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]</span></span><br><span class="line"><span class="params">     </span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">         <span class="variable language_">self</span>.name: <span class="built_in">str</span> = name</span><br><span class="line">         <span class="variable language_">self</span>.description: <span class="built_in">str</span> = description</span><br><span class="line">         <span class="variable language_">self</span>.input_schema: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>] = input_schema</span><br><span class="line"> â€‹</span><br><span class="line">     <span class="comment"># æŠŠå·¥å…·çš„åå­— / å·¥å…·çš„ç”¨é€”ï¼ˆdescriptionï¼‰å’Œå·¥å…·æ‰€éœ€è¦çš„å‚æ•°ï¼ˆargs_descï¼‰è½¬åŒ–ä¸ºæ–‡æœ¬</span></span><br><span class="line">     <span class="keyword">def</span> <span class="title function_">format_for_llm</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">         <span class="string">&quot;&quot;&quot;Format tool information for LLM.</span></span><br><span class="line"><span class="string"> â€‹</span></span><br><span class="line"><span class="string">         Returns:</span></span><br><span class="line"><span class="string">             A formatted string describing the tool.</span></span><br><span class="line"><span class="string">         &quot;&quot;&quot;</span></span><br><span class="line">         args_desc = []</span><br><span class="line">         <span class="keyword">if</span> <span class="string">&quot;properties&quot;</span> <span class="keyword">in</span> <span class="variable language_">self</span>.input_schema:</span><br><span class="line">             <span class="keyword">for</span> param_name, param_info <span class="keyword">in</span> <span class="variable language_">self</span>.input_schema[<span class="string">&quot;properties&quot;</span>].items():</span><br><span class="line">                 arg_desc = (</span><br><span class="line">                     <span class="string">f&quot;- <span class="subst">&#123;param_name&#125;</span>: <span class="subst">&#123;param_info.get(<span class="string">&#x27;description&#x27;</span>, <span class="string">&#x27;No description&#x27;</span>)&#125;</span>&quot;</span></span><br><span class="line">                 )</span><br><span class="line">                 <span class="keyword">if</span> param_name <span class="keyword">in</span> <span class="variable language_">self</span>.input_schema.get(<span class="string">&quot;required&quot;</span>, []):</span><br><span class="line">                     arg_desc += <span class="string">&quot; (required)&quot;</span></span><br><span class="line">                 args_desc.append(arg_desc)</span><br><span class="line"> â€‹</span><br><span class="line">         <span class="keyword">return</span> <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"> Tool: <span class="subst">&#123;self.name&#125;</span></span></span><br><span class="line"><span class="string"> Description: <span class="subst">&#123;self.description&#125;</span></span></span><br><span class="line"><span class="string"> Arguments:</span></span><br><span class="line"><span class="string"> <span class="subst">&#123;<span class="built_in">chr</span>(<span class="number">10</span>).join(args_desc)&#125;</span></span></span><br><span class="line"><span class="string"> &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>æ¨¡å‹ä¼šé€šè¿‡ Prompt æ¥ç¡®å®šå½“å‰æœ‰å“ªäº›å·¥å…·ï¼Œé€šè¿‡å°†å·¥å…·çš„å…·ä½“ä½¿ç”¨æè¿°ä»¥æ–‡æœ¬çš„å½¢å¼ä¼ é€’ç»™æ¨¡å‹ï¼Œä¾›æ¨¡å‹äº†è§£æœ‰å“ªäº›å·¥å…·ä»¥åŠç»“åˆå®æ—¶æƒ…å†µè¿›è¡Œé€‰æ‹©ã€‚</p><blockquote><p><strong>ä»æ‰€æœ‰ MCP Server ä¸­â€œæ”¶é›†å·¥å…· â†’ è½¬æˆç»™ LLM çœ‹å¾—æ‡‚çš„æ–‡å­—è¯´æ˜ â†’ æ‹¼åˆ° system prompt é‡Œ â†’ è®© LLM æ ¹æ®è¿™äº›å·¥å…·æè¿°æ¥å†³å®šè¦ä¸è¦è°ƒç”¨å·¥å…·ã€è°ƒç”¨å“ªä¸ªå·¥å…·ã€‚</strong></p></blockquote><p>åœ¨æ•´ä¸ª MCP çš„å¤§å›¾æ™¯é‡Œï¼Œè¿™æ®µä»£ç æ‰®æ¼”çš„æ˜¯<strong>ä¸­é—´åè°ƒè€… &#x2F; é€‚é…å±‚</strong>ï¼š</p><ol><li>å¯¹ä¸‹æ¸¸ï¼ˆMCP Serversï¼‰</li></ol><ul><li><p>è´Ÿè´£åˆå§‹åŒ–æ‰€æœ‰ MCP Server</p></li><li><p>é€šè¿‡ list_tools() æ¢æµ‹æ¯ä¸ª server æš´éœ²çš„å·¥å…·</p></li><li><p>æŠŠå·¥å…·çš„ JSON Schema ç­‰ç»“æ„åŒ–ä¿¡æ¯ï¼ŒæŠ½è±¡æˆ Tool å¯¹è±¡</p></li></ul><ol start="2"><li>å¯¹ä¸Šæ¸¸ï¼ˆLLMï¼‰</li></ol><ul><li><p>æŠŠæ‰€æœ‰å·¥å…·ä¿¡æ¯æ•´åˆå¹¶è½¬æˆäººç±»è¯­è¨€è¯´æ˜ï¼ˆformat_for_llmï¼‰</p></li><li><p>æŠŠè¯´æ˜å¡è¿› system promptï¼Œå‘Šè¯‰ LLM å®ƒæœ‰å“ªäº›èƒ½åŠ›å¯ä»¥ç”¨</p></li><li><p>é€šè¿‡ä¸¥æ ¼çš„ JSON æ ¼å¼çº¦æŸï¼Œè®© LLM ä»¥ç¨³å®šå¯è§£æçš„æ–¹å¼è¿”å›â€œæˆ‘è¦ç”¨å“ªä¸ªå·¥å…·+å‚æ•°â€</p></li></ul><ol start="3"><li>å¯¹ä¸­é—´é€»è¾‘ï¼ˆRouter &#x2F; Orchestratorï¼‰</li></ol><ul><li><p>åç»­æ ¹æ® LLM çš„å·¥å…·é€‰æ‹© JSON å†å»è°ƒç”¨ç›¸åº” MCP server çš„ tool</p></li><li><p>æŠŠç»“æœåé¦ˆç»™ LLMï¼Œè®©å®ƒç”Ÿæˆè‡ªç„¶è¯­è¨€ç­”å¤</p></li></ul><blockquote><p><strong>å®ƒè®©â€œå¤š MCP Server çš„å·¥å…·â€å¯¹ LLM çœ‹èµ·æ¥åƒä¸€ç»„ç»Ÿä¸€ã€æ¸…æ™°ã€å¯é€‰æ‹©çš„å·¥å…·èœå•ã€‚</strong></p></blockquote><h2 id="å·¥å…·æ‰§è¡Œå’Œç»“æœåé¦ˆæœºåˆ¶"><a href="#å·¥å…·æ‰§è¡Œå’Œç»“æœåé¦ˆæœºåˆ¶" class="headerlink" title="å·¥å…·æ‰§è¡Œå’Œç»“æœåé¦ˆæœºåˆ¶"></a>å·¥å…·æ‰§è¡Œå’Œç»“æœåé¦ˆæœºåˆ¶</h2><p>å·¥å…·çš„æ‰§è¡Œå°±æ˜¯æŠŠ system prompt æŒ‡ä»¤å’Œå·¥å…·è°ƒç”¨æè¿°ï¼Œè¿˜æœ‰ç”¨æˆ·æ¶ˆæ¯ä¸€èµ·å‘é€ç»™æ¨¡å‹ï¼Œç„¶åæ¥æ”¶æ¨¡å‹çš„å›å¤ã€‚å½“æ¨¡å‹åˆ†æç”¨æˆ·è¯·æ±‚åï¼Œå®ƒä¼šå†³å®šæ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·ã€‚å¦‚æœå›å¤ä¸­åŒ…å«ç»“æ„åŒ– json æ ¼å¼çš„å·¥å…·è°ƒç”¨è¯·æ±‚ï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæ ¹æ®è¿™ä¸ª json ä»£ç æ‰§è¡Œå¯¹åº”çš„å·¥å…·ã€‚</p><p>å¦‚æœæ¨¡å‹æ‰§è¡Œäº† tool callï¼Œåˆ™å·¥å…·æ‰§è¡Œçš„ç»“æœ result ä¼šå’Œ system prompt å’Œç”¨æˆ·æ¶ˆæ¯ä¸€èµ·é‡æ–°å‘é€ç»™æ¨¡å‹ï¼Œè¯·æ±‚æ¨¡å‹ç”Ÿæˆæœ€ç»ˆå›å¤ã€‚åŒæ—¶ï¼Œå¦‚æœ tool call çš„ json ä»£ç å­˜åœ¨é—®é¢˜æˆ–è€…æ¨¡å‹äº§ç”Ÿäº†å¹»è§‰ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼š skip æ‰æ— æ•ˆçš„è°ƒç”¨è¯·æ±‚ã€‚</p><p>å·¥å…·æ‰§è¡Œçš„ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">self</span>):</span><br><span class="line">     ... <span class="comment"># ä¸Šé¢å·²ç»ä»‹ç»è¿‡äº†ï¼Œæ¨¡å‹å¦‚ä½•é€‰æ‹©å·¥å…·</span></span><br><span class="line"> â€‹</span><br><span class="line">     <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">         <span class="comment"># å‡è®¾è¿™é‡Œå·²ç»å¤„ç†äº†ç”¨æˆ·æ¶ˆæ¯è¾“å…¥.</span></span><br><span class="line">         messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: user_input&#125;)</span><br><span class="line"> â€‹</span><br><span class="line">         <span class="comment"># è·å– LLM çš„è¾“å‡º</span></span><br><span class="line">         llm_response = <span class="variable language_">self</span>.llm_client.get_response(messages)</span><br><span class="line"> â€‹</span><br><span class="line">         <span class="comment"># å¤„ç† LLM çš„è¾“å‡ºï¼ˆå¦‚æœæœ‰ tool call åˆ™æ‰§è¡Œå¯¹åº”çš„å·¥å…·ï¼‰</span></span><br><span class="line">         result = <span class="keyword">await</span> <span class="variable language_">self</span>.process_llm_response(llm_response)</span><br><span class="line"> â€‹</span><br><span class="line">         <span class="comment"># å¦‚æœ result ä¸ llm_response ä¸åŒï¼Œè¯´æ˜æ‰§è¡Œäº† tool call ï¼ˆæœ‰é¢å¤–ä¿¡æ¯äº†ï¼‰</span></span><br><span class="line">         <span class="comment"># åˆ™å°† tool call çš„ç»“æœé‡æ–°å‘é€ç»™ LLM è¿›è¡Œå¤„ç†ã€‚</span></span><br><span class="line">         <span class="keyword">if</span> result != llm_response:</span><br><span class="line">             messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>, <span class="string">&quot;content&quot;</span>: llm_response&#125;)</span><br><span class="line">             messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>, <span class="string">&quot;content&quot;</span>: result&#125;)</span><br><span class="line"> â€‹</span><br><span class="line">             final_response = <span class="variable language_">self</span>.llm_client.get_response(messages)</span><br><span class="line">             logging.info(<span class="string">&quot;\nFinal response: %s&quot;</span>, final_response)</span><br><span class="line">             messages.append(</span><br><span class="line">                 &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>, <span class="string">&quot;content&quot;</span>: final_response&#125;</span><br><span class="line">             )</span><br><span class="line">         <span class="comment"># å¦åˆ™ä»£è¡¨æ²¡æœ‰æ‰§è¡Œ tool callï¼Œåˆ™ç›´æ¥å°† LLM çš„è¾“å‡ºè¿”å›ç»™ç”¨æˆ·ã€‚</span></span><br><span class="line">         <span class="keyword">else</span>:</span><br><span class="line">             messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>, <span class="string">&quot;content&quot;</span>: llm_response&#125;) </span><br></pre></td></tr></table></figure><p>ä¸¤ä¸ªè¦ç‚¹ï¼š</p><ol><li>å·¥å…·å¯¹åº”çš„æ–‡æ¡£å¾ˆé‡è¦ï¼š æ¨¡å‹é€šè¿‡å·¥å…·æè¿°æ–‡æœ¬æ¥ç†è§£å’Œé€‰æ‹©å·¥å…·ï¼Œå› æ­¤ç²¾å¿ƒç¼–å†™å·¥å…·çš„åç§°ã€docstring å’Œå‚æ•°è¯´æ˜è‡³å…³é‡è¦ï¼›</li><li>ç”±äº MCP çš„é€‰æ‹©æ˜¯åŸºäº prompt çš„ï¼Œæ‰€ä»¥ä»»ä½•æ¨¡å‹å…¶å®éƒ½é€‚é… MCPï¼Œåªè¦èƒ½æä¾›å¯¹åº”çš„å·¥å…·æè¿°ã€‚ä½†æ˜¯å½“ä½ ä½¿ç”¨é Claude æ¨¡å‹æ—¶ï¼ŒMCP ä½¿ç”¨çš„æ•ˆæœå’Œä½“éªŒéš¾ä»¥ä¿è¯ï¼ˆæ²¡æœ‰åšä¸“é—¨çš„è®­ç»ƒï¼Œè¿™ä¸ªä¸å¤ªç¡®å®šï¼Œåç»­éœ€è¦æµ‹è¯•ä¸€ä¸‹ï¼‰ã€‚</li></ol><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ol><li><strong>MCP çš„æœ¬è´¨</strong>ï¼šå®ƒæ˜¯ä¸€ä¸ªç»Ÿä¸€çš„åè®®æ ‡å‡†ï¼Œä½¿ AI æ¨¡å‹èƒ½å¤Ÿä»¥ä¸€è‡´çš„æ–¹å¼è¿æ¥å„ç§æ•°æ®æºå’Œå·¥å…·ï¼Œç±»ä¼¼äº AI ä¸–ç•Œçš„â€USB-Câ€æ¥å£ã€‚</li><li><strong>MCP çš„ä»·å€¼</strong>ï¼šå®ƒè§£å†³äº†ä¼ ç»Ÿ function call çš„å¹³å°ä¾èµ–é—®é¢˜ï¼Œæä¾›äº†æ›´ç»Ÿä¸€ã€å¼€æ”¾ã€å®‰å…¨ã€çµæ´»çš„å·¥å…·è°ƒç”¨æœºåˆ¶ï¼Œè®©ç”¨æˆ·å’Œå¼€å‘è€…éƒ½èƒ½ä»ä¸­å—ç›Šã€‚</li><li>ä½¿ç”¨ä¸å¼€å‘ï¼šå¯¹äºæ™®é€šç”¨æˆ·ï¼ŒMCP æä¾›äº†ä¸°å¯Œçš„ç°æˆå·¥å…·ï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸äº†è§£ä»»ä½•æŠ€æœ¯ç»†èŠ‚çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼›å¯¹äºå¼€å‘è€…ï¼ŒMCP æä¾›äº†æ¸…æ™°çš„æ¶æ„å’Œ SDKï¼Œä½¿å·¥å…·å¼€å‘å˜å¾—ç›¸å¯¹ç®€å•ã€‚</li></ol><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><ul><li>MCP(Model Context Protocol)ä¸€ç¯‡å°±å¤Ÿäº†ï¼š<a href="https://zhuanlan.zhihu.com/p/29001189476">https://zhuanlan.zhihu.com/p/29001189476</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> MCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HEXOé“¾æ¥ç«™å†…æ–‡ç« æ–¹æ³•</title>
      <link href="/2025/12/11/HEXO%E9%93%BE%E6%8E%A5%E7%AB%99%E5%86%85%E6%96%87%E7%AB%A0%E6%96%B9%E6%B3%95/"/>
      <url>/2025/12/11/HEXO%E9%93%BE%E6%8E%A5%E7%AB%99%E5%86%85%E6%96%87%E7%AB%A0%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>Hexoé“¾æ¥ç«™å†…æ–‡ç« æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% post_link markdown-learning-by-maxiang ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹è¿™ç¯‡æ–‡ç«  %&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>markdown-learning-by-maxiang</code> ä¸ºæ–‡ç« åç§°ï¼Œæˆ‘æµ‹è¯•äº†åŒç›®å½•ä¸‹ä¿®æ”¹ä¸ºè‡ªå·±æ–‡ç« åç§°å¯ä»¥æˆåŠŸï¼Œæ³¨æ„ä¸è¦åŠ è·¯å¾„ï¼Œå¦‚æœæ–‡ç« åç§°æœ‰ç©ºæ ¼å°±ç”¨åŒå¼•å·å¼•èµ·æ¥ã€‚<code>ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹è¿™ç¯‡æ–‡ç« </code> æ˜¯æ˜¾ç¤ºçš„å†…å®¹ï¼Œå¦‚æœä¸å†™çš„è¯å°±é»˜è®¤æ˜¯æ–‡ç« åç§°ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://github.com/iissnan/hexo-theme-next/issues/978">https://github.com/iissnan/hexo-theme-next/issues/978</a></p>]]></content>
      
      
      <categories>
          
          <category> Config </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Config </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Function Callå’ŒMCPçš„åŒºåˆ«</title>
      <link href="/2025/12/11/Function-Call%E5%92%8CMCP%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2025/12/11/Function-Call%E5%92%8CMCP%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<h2 id="Function-Callå’ŒMCPçš„æ ¸å¿ƒåŒºåˆ«æ¢³ç†ï¼ˆç”±GPT-5-1-ç”Ÿæˆï¼‰"><a href="#Function-Callå’ŒMCPçš„æ ¸å¿ƒåŒºåˆ«æ¢³ç†ï¼ˆç”±GPT-5-1-ç”Ÿæˆï¼‰" class="headerlink" title="Function Callå’ŒMCPçš„æ ¸å¿ƒåŒºåˆ«æ¢³ç†ï¼ˆç”±GPT 5.1 ç”Ÿæˆï¼‰"></a>Function Callå’ŒMCPçš„æ ¸å¿ƒåŒºåˆ«æ¢³ç†ï¼ˆç”±GPT 5.1 ç”Ÿæˆï¼‰</h2><h2 id="ğŸ§©æ ¸å¿ƒåŒºåˆ«æ€»ç»“"><a href="#ğŸ§©æ ¸å¿ƒåŒºåˆ«æ€»ç»“" class="headerlink" title="ğŸ§©æ ¸å¿ƒåŒºåˆ«æ€»ç»“"></a>ğŸ§©æ ¸å¿ƒåŒºåˆ«æ€»ç»“</h2><table><thead><tr><th>ç‰¹æ€§</th><th>Function Call</th><th>MCPï¼ˆModel Context Protocolï¼‰</th></tr></thead><tbody><tr><td><strong>å®šä½</strong></td><td>è®©æ¨¡å‹æŒ‰ç…§å¼€å‘è€…å®šä¹‰çš„ç»“æ„åŒ–æ–¹å¼è¿”å›â€œè°ƒç”¨æŸå‡½æ•°æ‰€éœ€çš„å‚æ•°â€ã€‚</td><td>è®©æ¨¡å‹ä¸å¤–éƒ¨å·¥å…·ã€æœåŠ¡ã€æ•°æ®æºé€šè¿‡ç»Ÿä¸€åè®®è¿›è¡ŒåŒå‘é€šä¿¡ã€‚</td></tr><tr><td><strong>è§’è‰²</strong></td><td>æ¨¡å‹åªâ€œäº§ç”Ÿå‘½ä»¤â€ï¼ˆå‡½æ•°+å‚æ•°ï¼‰ï¼Œä¸æ‰§è¡Œã€‚æ‰§è¡Œç”±å¤–éƒ¨åº”ç”¨å®Œæˆã€‚</td><td>é™¤ç”Ÿæˆè°ƒç”¨å¤–ï¼Œè¿˜å¯ä»¥<strong>å‘ç°ã€æ³¨å†Œã€è°ƒåº¦ã€æ‰§è¡Œ</strong>å¤–éƒ¨èµ„æºã€‚</td></tr><tr><td><strong>å¤æ‚åº¦</strong></td><td>ç®€å•ã€è½»é‡çº§ã€å¤šæ•°åœºæ™¯å¤Ÿç”¨ã€‚</td><td>æ›´åº•å±‚ã€æ›´é€šç”¨ï¼Œå¯è¿æ¥å¤æ‚ç³»ç»Ÿã€‚</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>è°ƒç”¨æŸä¸ªç‰¹å®šå‡½æ•°ã€å¤„ç†ç»“æ„åŒ–ä»»åŠ¡ã€‚</td><td>æ¥å…¥å¤šä¸ªå·¥å…·ã€å¤šæ•°æ®æºã€æ’ä»¶ç³»ç»Ÿã€ä¼ä¸šçº§å·¥ä½œæµã€‚</td></tr></tbody></table><hr><span id="more"></span><h2 id="ğŸ§ Function-Call-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ğŸ§ Function-Call-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ğŸ§ Function Call æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ğŸ§ Function Call æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><strong>Function Call</strong> æ˜¯æ¨¡å‹è¾“å‡ºçš„ä¸€ç§ç»“æ„åŒ–æ ¼å¼ï¼Œæ¨¡å‹è¾“å‡ºå®ƒæƒ³è°ƒç”¨ä»€ä¹ˆå‡½æ•°å¹¶ä¸”è¦ä¼ ä»€ä¹ˆå‚æ•°ã€‚æ¨¡å‹åªè´Ÿè´£<strong>è¾“å‡ºç»“æ„åŒ– JSON</strong>ï¼Œå®é™…æ‰§è¡Œç”±ç›¸å…³ç¨‹åºå®Œæˆã€‚</p><p><strong>Function Call</strong>æä¾›çš„æ˜¯ API å±‚çš„èƒ½åŠ›ï¼Œç”±å¼€å‘è€…å®šä¹‰å¯è°ƒç”¨å‡½æ•°åˆ—è¡¨ï¼Œæ¨¡å‹äº§å‡ºï¼šå‡½æ•°å + å‚æ•°ï¼Œé€‚ç”¨äºç®€å•é€»è¾‘ã€‚</p><h3 id="âœ”-Function-Call-ç¤ºä¾‹"><a href="#âœ”-Function-Call-ç¤ºä¾‹" class="headerlink" title="âœ” Function Call ç¤ºä¾‹"></a>âœ” Function Call ç¤ºä¾‹</h3><p>å‡è®¾å¼€å‘è€…å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;get_weather&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è·å–åŸå¸‚å¤©æ°”&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;parameters&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;object&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;required&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;city&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç”¨æˆ·é—®ï¼š</p><blockquote><p>â€œæ˜å¤©åŒ—äº¬å¤©æ°”å¦‚ä½•ï¼Ÿâ€</p></blockquote><p>æ¨¡å‹å¯èƒ½è¿”å›ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;get_weather&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;arguments&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;åŒ—äº¬&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç„¶å <strong>ç›¸å…³ç¨‹åº</strong> æ‰§è¡Œ get_weather(â€œåŒ—äº¬â€) å¹¶æŠŠç»“æœå†è¿”å›ç»™æ¨¡å‹æˆ–ç”¨æˆ·ã€‚</p><p>ğŸ“Œ <strong>å…³é”®ç‚¹ï¼šæ¨¡å‹ä¸ä¼šæ‰§è¡Œï¼Œåªä¼šè¿”å›ç»“æ„ä½“ã€‚</strong></p><h2 id="ğŸ§ MCPï¼ˆModel-Context-Protocolï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ğŸ§ MCPï¼ˆModel-Context-Protocolï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ğŸ§ MCPï¼ˆModel Context Protocolï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ğŸ§ MCPï¼ˆModel Context Protocolï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>MCP æ˜¯ä¸€ä¸ª<strong>é€šç”¨åè®®</strong>ï¼Œç”¨äºç®¡ç†å·¥å…·ï¼ˆtoolsï¼‰ï¼Œè¿æ¥å¤–éƒ¨æ•°æ®æºï¼ˆdatabaseã€æ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰ï¼Œè®©æ¨¡å‹èƒ½å¤Ÿå‘ç°å¹¶è°ƒç”¨è¿™äº›èµ„æºï¼ŒåŒæ—¶ç»Ÿä¸€ä¸åŒå·¥å…·çš„æ¥å£æ ¼å¼ã€‚</p><p>å¯ä»¥æŠŠ MCP ç†è§£ä¸ºï¼š</p><blockquote><p><strong>æ¨¡å‹ä¸å¤–éƒ¨ä¸–ç•Œçš„â€œæ“ä½œç³»ç»ŸæŠ½è±¡å±‚â€</strong><br>å®ƒè®©æ¨¡å‹èƒ½ç›´æ¥è®¿é—®æ–‡ä»¶ã€æ•°æ®åº“ã€ç½‘ç»œç­‰å·¥å…·ã€‚</p></blockquote><p>å®ƒçš„â€œèƒ½åŠ›â€æ¯” Function Call å¼ºå¾—å¤šï¼Œå› ä¸ºï¼š</p><p>ğŸ‘‰ <strong>Function Call åªèƒ½è°ƒç”¨å¼€å‘äººå‘˜æ‰‹å·¥å†™æ­»çš„å‡½æ•°</strong><br>ğŸ‘‰ <strong>MCP å¯ä»¥åŠ¨æ€åŠ è½½å·¥å…·åŒ…ã€æ–‡ä»¶ç³»ç»ŸæœåŠ¡ã€ç¯å¢ƒæœåŠ¡ï¼Œè®©æ¨¡å‹åƒæ“ä½œç³»ç»Ÿç”¨æˆ·ä¸€æ ·è®¿é—®èµ„æº</strong></p><hr><h3 id="âœ”-MCP-ç¤ºä¾‹"><a href="#âœ”-MCP-ç¤ºä¾‹" class="headerlink" title="âœ” MCP ç¤ºä¾‹"></a>âœ” MCP ç¤ºä¾‹</h3><p>å‡è®¾ MCP æä¾›ä¸€ä¸ªå·¥å…· <code>fs.read_file</code>ã€‚</p><p>ç”¨æˆ·é—®ï¼š</p><blockquote><p>â€œæ‰“å¼€ &#x2F;docs&#x2F;intro.md è¯»ç»™æˆ‘å¬â€</p></blockquote><p>æ¨¡å‹å®é™…ä¼šäº§ç”Ÿè¿™æ ·çš„æ¶ˆæ¯ï¼ˆé Function Call é£æ ¼ï¼Œè€Œæ˜¯ MCP æ¶ˆæ¯åè®®ï¼‰ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;call_tool&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tool&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fs.read_file&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;arguments&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/docs/intro.md&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æœåŠ¡ç«¯ä¼šæ‰§è¡Œ <strong>read_file</strong> å¹¶è¿”å›æ–‡ä»¶å†…å®¹ã€‚</p><p>æ¨¡å‹å¯ä»¥ç»§ç»­è¯·æ±‚ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;call_tool&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tool&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fs.write_file&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;arguments&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/docs/notes.txt&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è¿™é‡Œæ˜¯æˆ‘æ€»ç»“çš„å†…å®¹...&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½“ç° MCP çš„æœ¬è´¨ï¼š</p><ul><li>æ¨¡å‹çŸ¥é“æœ‰å“ªäº›å·¥å…·å¯ç”¨</li><li>æ¨¡å‹ç›´æ¥â€œæ“æ§â€è¿™äº›å·¥å…·</li><li>å…·æœ‰ç±»ä¼¼â€œæ–‡ä»¶è¯»å†™â€ç­‰å¤æ‚èƒ½åŠ›</li><li>ä¸éœ€è¦å¼€å‘è€…æå‰ç¡¬ç¼–ç æ‰€æœ‰å‡½æ•°</li></ul><h2 id="â­å°ç»“"><a href="#â­å°ç»“" class="headerlink" title="â­å°ç»“"></a>â­å°ç»“</h2><table><thead><tr><th>ç»´åº¦</th><th>Function Call</th><th>MCP</th></tr></thead><tbody><tr><td>å·¥å…·å‘ç°</td><td>æ‰‹å·¥å®šä¹‰</td><td>è‡ªåŠ¨æ³¨å†Œï¼Œæ¨¡å‹å¯è‡ªåŠ¨å­¦ä¹ å·¥å…·èƒ½åŠ›</td></tr><tr><td>è°ƒç”¨æ–¹å¼</td><td>ç»“æ„åŒ– JSON</td><td>åŒå‘åè®®ã€æ¶ˆæ¯é€šä¿¡</td></tr><tr><td>æ‰©å±•æ€§</td><td>æ¯åŠ ä¸€ä¸ªåŠŸèƒ½éƒ½è¦æ–°å¢å‡½æ•°å®šä¹‰</td><td>æ–°å¢ MCP æœåŠ¡å³å¯æ‰©å±•å·¥å…·èƒ½åŠ›</td></tr><tr><td>æ¨¡å‹èƒ½åŠ›</td><td>è¢«åŠ¨</td><td>ä¸»åŠ¨ã€å¯è§„åˆ’è°ƒç”¨æµç¨‹</td></tr><tr><td>åœºæ™¯</td><td>ç®€å• API è°ƒç”¨ã€æ•°æ®ç»“æ„åŒ–</td><td>IDEã€æ•°æ®åº“é›†æˆã€æ–‡ä»¶ç³»ç»Ÿã€GitHub æ“ä½œã€ä¼ä¸šè‡ªåŠ¨åŒ–</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> MCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MCPç¼–ç¨‹å¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰</title>
      <link href="/2025/12/11/MCP%E7%BC%96%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2025/12/11/MCP%E7%BC%96%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="MCP-æ¦‚å¿µ"><a href="#MCP-æ¦‚å¿µ" class="headerlink" title="MCP æ¦‚å¿µ"></a>MCP æ¦‚å¿µ</h2><p>MCP ç¼–ç¨‹å¿«é€Ÿå…¥é—¨ï¼ŒMCP å…¨ç§° Model Context Protocol æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼Œå…¶å®šä¹‰äº† LLMs ä¸å¤–éƒ¨ä¸–ç•Œçš„äº’åŠ¨æ–¹å¼ï¼ŒMCP æä¾›äº†ä¸€ç§æ ‡å‡†åŒ–æ–¹æ³•ï¼Œä½¿ä»»æ„ LLMs èƒ½å¤Ÿè½»æ¾è¿æ¥å„ç§æ•°æ®æºå’Œå·¥å…·ï¼Œå®ç°ä¿¡æ¯çš„é«˜æ•ˆäº¤äº’å’Œå¤„ç†ã€‚</p><p>ç›®å‰çš„ AI æœç€ä¸¤ä¸ªæ–¹å‘å‘å±•ï¼š<strong>æŒæ¡æ›´å¤šä¿¡æ¯</strong> æˆ– <strong>æ§åˆ¶æ›´å¤šå·¥å…·</strong>ï¼Œåœ¨æ²¡æœ‰è”ç½‘æœç´¢ä¹‹å‰ï¼ŒLLM çš„æ•°æ®æ¥æºåªæœ‰è®­ç»ƒæ—¶å’Œæ¨ç†æ—¶æˆ‘ä»¬æä¾›çš„æ•°æ®ã€‚</p><p>åœ¨MCPå‡ºç°ä¹‹å‰ï¼Œå¦‚æœLLMè¦è®¿é—®å¤–éƒ¨æ•°æ®ï¼Œé€šå¸¸ä½¿ç”¨<code>Function Call</code>çš„æ–¹å¼ï¼Œ<code>Function Call</code>é€šè¿‡ç»™æ¨¡å‹é¢„è®¾å‡½æ•°æè¿°ï¼ˆåŒ…æ‹¬å‡½æ•°åã€å‚æ•°è¯´æ˜ã€è¿”å›å€¼æ ¼å¼ç­‰ï¼‰ï¼Œè®©æ¨¡å‹åœ¨åˆé€‚çš„æ—¶å€™è¿”å›ä¸€ä¸ªç¬¦åˆç»“æ„çš„ JSON æ ¼å¼ï¼Œå¤–éƒ¨ç³»ç»Ÿå†è§£æè¿™ä¸ª JSONï¼Œè°ƒç”¨å®é™…çš„åç«¯å‡½æ•°ã€‚å…³äº <code>Function Call</code> å’Œ<code>MCP</code> çš„å…·ä½“åŒºåˆ«åœ¨ <a href="/2025/12/11/Function-Call%E5%92%8CMCP%E7%9A%84%E5%8C%BA%E5%88%AB/" title="Function Callå’ŒMCPçš„åŒºåˆ«">Function Callå’ŒMCPçš„åŒºåˆ«</a></p><p>ä½† <code>Function Call</code> çš„æ–¹å¼æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„å¼€å‘è§„èŒƒï¼Œä½ å¼€å‘çš„å‡½æ•°æˆ‘ä¸èƒ½ç”¨ï¼Œæˆ‘å¼€å‘çš„å‡½æ•°ä½ ä¸èƒ½ç”¨ï¼Œè€Œä¸”å¼€å‘èµ·æ¥å¾ˆéº»çƒ¦ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒMCP å‡ºç°äº†ã€‚MCPä½œä¸ºLLMsçš„æ ‡å‡†åŒ–å·¥å…·ç®±ï¼Œå¯ä»¥é€šè¿‡MCPè°ƒç”¨å¤–ç•Œçš„AIå·¥å…·ï¼Œè€ŒAIå·¥å…·åœ¨å¼€å‘çš„æ—¶å€™ä¹Ÿéœ€è¦éµå¾ªMCPåè®®ã€‚MCP å…è®¸åº”ç”¨ä»¥æ ‡å‡†åŒ–çš„æ–¹å¼å‘ LLM æä¾›ä¸Šä¸‹æ–‡ï¼Œå¹¶å°†<strong>æä¾›ä¸Šä¸‹æ–‡çš„é€»è¾‘</strong>ä¸<strong>å®é™…çš„LLMäº¤äº’é€»è¾‘â€</strong>è§£è€¦ã€‚</p><p>åœ¨æ²¡æœ‰ MCP ä¹‹å‰ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›è®©æ¨¡å‹ä½¿ç”¨æœ¬åœ°æ•°æ®ï¼Œé€šå¸¸éœ€è¦æŠŠè¿™äº›æ•°æ®ç›´æ¥å¤åˆ¶åˆ°å¯¹è¯æ¡†ä¸­ï¼Œè®©æ¨¡å‹ä»æ–‡æœ¬ä¸­è·å–ä¿¡æ¯ã€‚è€Œæœ‰äº† MCP ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºç‰¹å®šèƒ½åŠ›ç¼–å†™ä¸€ä¸ª MCP Serverï¼Œä¾‹å¦‚æ•°æ®åº“è¯»å–ã€GitHub æ“ä½œã€æ–‡ä»¶ç³»ç»Ÿè®¿é—®æˆ–è·å–å½“å‰æ—¶é—´ç­‰ã€‚æ¨¡å‹é€šè¿‡ MCP ä¸è¿™äº› Server é€šä¿¡ï¼Œå°±èƒ½åœ¨æ— éœ€æ‰‹åŠ¨ç²˜è´´æ•°æ®çš„æƒ…å†µä¸‹ï¼Œå®æ—¶è®¿é—®è¿™äº›å¤–éƒ¨èµ„æºã€‚</p><p><img src="/../uploads/MCP_1.png"></p><p>MCP æœåŠ¡å™¨å¯ä»¥æä¾›ä¸‰ç§ä¸»è¦ç±»å‹çš„åŠŸèƒ½:</p><ol><li>èµ„æºè®¿é—®ï¼šå®¢æˆ·ç«¯è¯»å–æ–‡ä»¶ç­‰æ•°æ®ï¼›</li><li>å·¥å…·è°ƒç”¨ï¼šç”±LLMè°ƒç”¨çš„å‡½æ•°ï¼›</li><li>Promptæ¨¡æ¿ï¼šé¢„å…ˆç¼–å†™çš„å¸®åŠ©å®¢æˆ·å®Œæˆç‰¹å®šä»»åŠ¡çš„Promptï¼›</li></ol><span id="more"></span><h2 id="MCP-Deno-å¼€å‘"><a href="#MCP-Deno-å¼€å‘" class="headerlink" title="MCP Deno å¼€å‘"></a>MCP Deno å¼€å‘</h2><p>ä½¿ç”¨pythonçš„SDKï¼Œç®€å•å®ç°ä¸‹é¢åŠŸèƒ½ï¼Œç”¨æ¥åŠ æ·±ç†è§£ï¼š</p><ol><li>æ„å»ºå¯è¿æ¥åˆ°ä»»ä½• MCP Server çš„ MCP Client</li><li>åˆ›å»ºå…¬å¼€èµ„æºã€æç¤ºå’Œå·¥å…·çš„ MCP Server</li><li>ä½¿ç”¨ stdio å’Œ SSE ç­‰æ ‡å‡†ä¼ è¾“</li><li>å¤„ç†æ‰€æœ‰ MCP åè®®æ¶ˆæ¯å’Œç”Ÿå‘½å‘¨æœŸäº‹ä»¶</li></ol><p>ä¸€èˆ¬å…³äºMCPçš„é¡¹ç›®ï¼Œå¼€å‘è€…ä»¬éƒ½å–œæ¬¢ç”¨uvæ¥ç®¡ç†ï¼Œä¸æ™“å¾—ä¸ºä»€ä¹ˆï¼Œä½†æ˜¯è·Ÿç€ç”¨ä¸€ä¸‹ï¼Œç›¸å…³å®‰è£…ä½¿ç”¨æ–¹æ³•å‚ç…§ <a href="/2025/12/10/uv%E4%BD%BF%E7%94%A8/" title="uvä½¿ç”¨">uvä½¿ç”¨</a> ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ–°çš„é¡¹ç›®</span></span><br><span class="line">uv init mcp-demo</span><br><span class="line"><span class="built_in">cd</span> mcp-demo</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">uv venv</span><br><span class="line"><span class="built_in">source</span> .venv/bin/activate</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–</span></span><br><span class="line">uv add <span class="string">&quot;mcp[cli]&quot;</span> </span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€ä¸ªuvç®¡ç†çš„python MCP é¡¹ç›®å°±åˆå§‹åŒ–å®Œæˆäº†ã€‚</p><p>æ¥ä¸‹æ¥ç¼–å†™ç¬¬ä¸€ä¸ªç®€å•Demoï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mcp.server.fastmcp <span class="keyword">import</span> FastMCP</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º FastMCP å®ä¾‹</span></span><br><span class="line">mcp = FastMCP(<span class="string">&quot;Demo&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹å·¥å…·</span></span><br><span class="line"><span class="meta">@mcp.tool()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">echo</span>(<span class="params">text: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">return</span> text</span><br><span class="line"></span><br><span class="line"><span class="meta">@mcp.tool()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a: <span class="built_in">int</span>, b: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹èµ„æº</span></span><br><span class="line"><span class="meta">@mcp.resource(<span class="params"><span class="string">&quot;greeting://&#123;name&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;Hello, <span class="subst">&#123;name&#125;</span>!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨æœåŠ¡</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;FastMCP Demo Server is running ......&quot;</span>)</span><br><span class="line">    mcp.run()</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ä»£ç ä¸­ï¼Œä½¿ç”¨äº†FastMCPæ¥åˆå§‹åŒ–ä¸€ä¸ªMCP Serverå®ä¾‹ï¼Œåˆ†åˆ«åˆ›å»ºäº†ä¸‰ä¸ªå‡½æ•°ï¼š</p><ul><li>echoï¼šå­—ç¬¦ä¸²è¾“å‡ºï¼›</li><li>addï¼šä¸¤ä¸ªæ•°å­—ç›¸åŠ ï¼›</li><li>greetï¼šè¾“å…¥å­—ç¬¦ä¸²ï¼Œæ‹¼æ¥åè¿”å›å­—ç¬¦ä¸²ï¼›</li></ul><p>é€šè¿‡ä¸¤ä¸ªæ³¨è§£ï¼Œèµ‹äºˆäº†å‡½æ•°ä¸åŒçš„èƒ½åŠ›ï¼š</p><ul><li>@tool()ï¼šå‡½æ•°å¯ä»¥ç›´æ¥è¢«AIè°ƒç”¨ï¼›</li><li>@resource()ï¼šåƒAPIæ¥å£ä¸€æ ·è¢«è°ƒç”¨ï¼Œå…¶ä¸­çš„å‚æ•° greeting:&#x2F;&#x2F;{name} æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ URIï¼Œ å¯ä»¥æ‹†è§£ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚greeting æ˜¯éšä¾¿èµ·çš„å‰ç¼€ï¼Œnameæ˜¯åŠ¨æ€å‚æ•°çš„åç§°ï¼Œåœ¨è®¿é—®çš„æ—¶å€™éœ€è¦ä¼ å…¥ã€‚</li></ul><p>æµ‹è¯•å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mcp dev server.py</span><br></pre></td></tr></table></figure><p><code>mcp dev</code>æ˜¯å¼€å‘è°ƒè¯•æ¨¡å¼ï¼Œè¾“å…¥è¿™æ¡å‘½ä»¤åï¼Œä¼šæ‰“å¼€ä¸€ä¸ª MCP Inspector ï¼Œå¯ä»¥ç›´è§‚åœ°æ£€æŸ¥å’Œæµ‹è¯• MCP Serverï¼ˆserver.pyï¼‰æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p><p><img src="/../uploads/MCP_2.png"></p><p>ç‚¹å‡» Connect ï¼Œé€‰æ‹© Toolsï¼ŒList Toolsï¼Œå³å¯åˆ—å‡º MCP ä¸­å®šä¹‰çš„å·¥å…·ï¼Œå¯ä»¥è¾“å…¥æµ‹è¯•å†…å®¹è¿›è¡Œ run toolsæµ‹è¯•:</p><p><img src="/../uploads/MCP_3.png"></p><p>åœ¨ Resources æ ‡ç­¾é¡µä¸‹ï¼Œå¯ä»¥çœ‹åˆ°å®šä¹‰çš„èµ„æºå‡½æ•° greet:</p><p><img src="/../uploads/MCP_4.png"></p><p>ä¼ å…¥åŠ¨æ€å‚æ•°ï¼Œmcp server å°±ä¼šè¿”å› json æ ¼å¼çš„å“åº”ï¼Œå¹¶å°†æˆ‘ä»¬è¾“å…¥çš„ api æ‹¼æ¥åè¿”å›ã€‚</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>åšå®¢è®°å½•äº†å¯¹äº MCP çš„ç†è§£ï¼Œä»¥åŠä¸€ä¸ªç®€å•çš„Demoï¼Œåç»­åœ¨è¿™ä¸ªåŸºç¡€ä¸Šç»§ç»­å®Œå–„ã€‚</p><p>å¯¹ MCP Server çš„å¼€å‘æ˜¯ MCPåº”ç”¨çš„é‡ç‚¹ï¼Œä½œè€…æåˆ° MCP Server å…¶å®å°±æ˜¯å®šä¹‰ä¸€äº›å‡½æ•°ï¼Œè®©æ™ºèƒ½ä½“è°ƒç”¨ã€‚åœ¨å‡½æ•°ä¸­å¯ä»¥å®ç°ç®€å•é€»è¾‘ã€æ¥å£è°ƒç”¨å’Œå„ç§æ“ä½œï¼Œå¹¶é€šè¿‡æ³¨è§£èµ‹äºˆå‡½æ•°ä¸åŒçš„èƒ½åŠ›ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li>ä»€ä¹ˆæ˜¯MCPï¼Ÿæœ¬åœ°å¦‚ä½•å¼€å‘MCP Serverï¼š<a href="https://cloud.tencent.com/developer/article/2511642">https://cloud.tencent.com/developer/article/2511642</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> MCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SARIFæ–‡ä»¶æ¶æ„è§£è¯»</title>
      <link href="/2025/12/10/SARIF%E6%96%87%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%A7%A3%E8%AF%BB/"/>
      <url>/2025/12/10/SARIF%E6%96%87%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%A7%A3%E8%AF%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="SARIF-æ–‡ä»¶æ¶æ„æ¶æ„è§£è¯»"><a href="#SARIF-æ–‡ä»¶æ¶æ„æ¶æ„è§£è¯»" class="headerlink" title="SARIF æ–‡ä»¶æ¶æ„æ¶æ„è§£è¯»"></a>SARIF æ–‡ä»¶æ¶æ„æ¶æ„è§£è¯»</h2><p>SARIFï¼ˆStatic Analysis Results Interchange Formatï¼‰æœ¬è´¨æ˜¯ä¸€ä¸ª JSON æ—¥å¿—è§„èŒƒï¼Œç”¨äºç»Ÿä¸€è¡¨è¾¾é™æ€åˆ†æï¼ˆSASTã€Lintã€CodeQLã€ä¾èµ–æ‰«æç­‰ï¼‰çš„æ‰«æç»“æœï¼Œæ–¹ä¾¿ä¸åŒå·¥å…·ä¹‹é—´å…±äº«ã€èšåˆã€å±•ç¤ºä¸è¿½è¸ªã€‚</p><p>SARIF ç®€å•æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;$schema&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;https://json.schemastore.org/sarif-2.1.0.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;2.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;runs&quot;</span> <span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;tool&#x27;<span class="punctuation">,</span> &#x27;invocations&#x27;<span class="punctuation">,</span> &#x27;artifacts&#x27;<span class="punctuation">,</span> &#x27;results&#x27;<span class="punctuation">,</span> &#x27;columnKind&#x27;<span class="punctuation">,</span>&#x27;properties&#x27;<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>SARIF &#x3D; å¤šæ¬¡è¿è¡Œ runs çš„é›†åˆï¼Œæ¯æ¬¡è¿è¡ŒåŒ…å«ï¼šå·¥å…·ä¿¡æ¯ + è¿è¡Œå…ƒæ•°æ® + è¢«åˆ†æå¯¹è±¡ï¼ˆartifactsï¼‰+ åˆ†æç»“æœï¼ˆresultsï¼‰</p></blockquote><p>å¯¹å„éƒ¨åˆ†å†…å®¹ä»‹ç»å¦‚ä¸‹ï¼š</p><ol><li>tool å·¥å…·ä¿¡æ¯ï¼šæ£€æŸ¥å‘˜èº«ä»½ä¿¡æ¯å’Œæ£€æŸ¥æ‰‹å†Œï¼Œè®°å½•äº†ç”¨å“ªä¸ªå·¥å…·è¿›è¡Œäº†æ‰«æï¼Œç‰ˆæœ¬å·æ˜¯å¤šå°‘ï¼ŒåŒ…å«äº† driver é©±åŠ¨ç¨‹åºä¿¡æ¯ å’Œ rules æ£€æŸ¥è§„åˆ™æ¸…å•ï¼›</li><li>invocations è°ƒç”¨ä¿¡æ¯ï¼šæ£€æŸ¥å‘˜çš„å·¥ä½œæ—¥å¿—ï¼Œè®°å½•äº†è¿™æ¬¡æ£€æŸ¥æ˜¯åœ¨ä»€ä¹ˆç¯å¢ƒä¸‹è¿›è¡Œçš„ï¼Œä»¥åŠæ˜¯å¦é¡ºåˆ©å®Œæˆï¼ŒexecutionSuccessful: true&#x2F;falseï¼›</li><li>artifacts è¢«æ‰«æçš„æ–‡ä»¶ï¼šæ£€æŸ¥äº†å“ªäº›åœ°ç‚¹ï¼Œåˆ—å‡ºäº†æ‰€æœ‰è¢« CodeQL æ‰«æè¿‡çš„æºæ–‡ä»¶ï¼ˆSource Codeï¼‰ï¼ŒåŒ…å«æ–‡ä»¶çš„è·¯å¾„ï¼ˆlocationï¼‰ï¼Œæœ‰æ—¶ä¹ŸåŒ…å«æ–‡ä»¶çš„å…·ä½“å†…å®¹æˆ–å“ˆå¸Œå€¼ï¼Œæ–¹ä¾¿åç»­å®šä½ï¼›</li><li><strong>results ç»“æœ</strong> ï¼šè¿™æ˜¯é—®é¢˜æ¸…å•ï¼Œè¿™æ˜¯æ•´ä»½æŠ¥å‘Šé‡Œæœ€é‡è¦çš„éƒ¨åˆ†ï¼Œåˆ—å‡ºäº†æ‰«æå‡ºæ¥çš„æ‰€æœ‰ Bugå’Œæ¼æ´ä¿¡æ¯ï¼Œå…³é”®å•ï¼šruleId è®°å½•è¿åäº†å“ªæ¡è§„åˆ™ï¼ˆå¯¹åº” tool é‡Œçš„è§„åˆ™ï¼‰ï¼Œmessage è®°å½•é—®é¢˜çš„å…·ä½“æè¿°ï¼Œlocations è®°å½•äº†é—®é¢˜åœ¨å“ªä¸ªæ–‡ä»¶çš„ç¬¬å‡ è¡Œã€ç¬¬å‡ åˆ—ï¼›</li><li>columnKind åˆ—çš„è®¡ç®—æ–¹å¼ï¼šç”¨äºå‘Šè¯‰ IDEï¼ˆå¦‚ VS Codeï¼‰å¦‚ä½•æ­£ç¡®é«˜äº®ä»£ç ï¼›</li><li>properties é™„åŠ å±æ€§ï¼šè®°å½•äº†æ‚é¡¹ä¿¡æ¯ï¼Œå­˜æ”¾æ ‡å‡†å­—æ®µé‡Œæ”¾ä¸ä¸‹çš„ã€æˆ–è€…å·¥å…·ç‰¹æœ‰çš„è‡ªå®šä¹‰æ•°æ®ï¼Œå¯èƒ½ä¼šåŒ…å«æ„å»ºæ—¶çš„æ ‡ç­¾ï¼ˆBuild Tagsï¼‰ã€é¡¹ç›®çš„å…ƒæ•°æ®ï¼ˆProject Metadataï¼‰å’Œä¸€äº›ç»™ç‰¹å®šæ˜¾ç¤ºé¢æ¿ç”¨çš„ç»Ÿè®¡æ•°æ®ï¼›</li></ol><p>é€šä¿—çš„è®²ï¼Œå°±æ˜¯è¿™ä¸€æ¬¡æ‰«æ (run)ï¼Œæ˜¯ç”±åä¸º CodeQL çš„ (tool) è¿›è¡Œçš„ã€‚å®ƒåœ¨ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´ä»¥ç‰¹å®šçš„å‚æ•°è¿è¡Œ (invocations)ï¼ŒæŒ‰ç…§ç‰¹å®šçš„åˆ»åº¦æ ‡å‡† (columnKind)ï¼Œæ‰«æäº†è¿™ä¸€å †æ–‡ä»¶ (artifacts)ï¼Œæœ€åå‘ç°äº†è¿™äº›æ¼æ´ (results)ï¼Œå¹¶åœ¨æœ€åè´´äº†ä¸€äº›æ ‡ç­¾ (properties)ã€‚</p><span id="more"></span><h2 id="å…³é”®ä¿¡æ¯æå–"><a href="#å…³é”®ä¿¡æ¯æå–" class="headerlink" title="å…³é”®ä¿¡æ¯æå–"></a>å…³é”®ä¿¡æ¯æå–</h2><p>è¦åœ¨ CodeQL ç”Ÿæˆçš„ SARIF æŠ¥å‘Šä¸­æå–<strong>æ¼æ´ç‚¹ï¼ˆSinkï¼‰</strong>ã€<strong>æ¼æ´ä½ç½®</strong>ã€<strong>æ•°æ®æµï¼ˆSource åˆ° Sinkï¼‰ä»¥åŠæ§åˆ¶æµ</strong>ä¿¡æ¯ï¼Œéœ€è¦ç ”ç©¶ <code>runs</code> -&gt; <code>results</code> æ•°ç»„ä¸­çš„å¯¹è±¡ã€‚</p><p>SARIF å°†è¿™äº›å¤æ‚çš„é€»è¾‘å°è£…åœ¨äº†ä¸€ä¸ªå±‚çº§åˆ†æ˜çš„ç»“æ„ä¸­ã€‚ä»¥ä¸‹æ˜¯æå–è¿™äº›å…³é”®ä¿¡æ¯æ‰€å¯¹åº”çš„å…·ä½“å­—æ®µå’Œè§£æé€»è¾‘ï¼š</p><hr><h3 id="æå–æ ¸å¿ƒæ¨¡å—ï¼šresults-æ•°ç»„"><a href="#æå–æ ¸å¿ƒæ¨¡å—ï¼šresults-æ•°ç»„" class="headerlink" title="æå–æ ¸å¿ƒæ¨¡å—ï¼šresults æ•°ç»„"></a>æå–æ ¸å¿ƒæ¨¡å—ï¼š<code>results</code> æ•°ç»„</h3><p>æ‰€æœ‰çš„æ¼æ´ä¿¡æ¯éƒ½åœ¨ <code>runs[0].results</code> åˆ—è¡¨é‡Œï¼Œéœ€è¦éå†è¿™ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡ä»£è¡¨ä¸€ä¸ªå…·ä½“çš„æ¼æ´å®ä¾‹ã€‚</p><h3 id="è¯¦ç»†æå–æŒ‡å—"><a href="#è¯¦ç»†æå–æŒ‡å—" class="headerlink" title="è¯¦ç»†æå–æŒ‡å—"></a>è¯¦ç»†æå–æŒ‡å—</h3><p>éœ€è¦å…³æ³¨ <code>results</code> å¯¹è±¡ä¸‹çš„ä»¥ä¸‹å­—æ®µï¼š</p><h4 id="A-æ¼æ´çš„åŸºæœ¬ä¿¡æ¯"><a href="#A-æ¼æ´çš„åŸºæœ¬ä¿¡æ¯" class="headerlink" title="A. æ¼æ´çš„åŸºæœ¬ä¿¡æ¯"></a>A. æ¼æ´çš„åŸºæœ¬ä¿¡æ¯</h4><ul><li><strong>æ¼æ´åç§°&#x2F;ç±»å‹</strong>ï¼š<code>ruleId</code><ul><li>ä¾‹å¦‚ï¼š<code>java/sql-injection</code></li></ul></li><li><strong>æ¼æ´ç®€è¦æè¿°</strong>ï¼š<code>message.text</code><ul><li>ä¾‹å¦‚ï¼šâ€This query depends on a user-provided value.â€</li></ul></li></ul><h4 id="B-æ¼æ´ä½ç½®-çˆ†å‘ç‚¹-Sink"><a href="#B-æ¼æ´ä½ç½®-çˆ†å‘ç‚¹-Sink" class="headerlink" title="B. æ¼æ´ä½ç½® &#x2F; çˆ†å‘ç‚¹ &#x2F; Sink"></a>B. æ¼æ´ä½ç½® &#x2F; çˆ†å‘ç‚¹ &#x2F; Sink</h4><p>è¿™æ˜¯ CodeQL è®¤ä¸ºæ¼æ´æœ€ç»ˆå‘ç”Ÿçš„åœ°æ–¹ï¼ˆä¾‹å¦‚æ‰§è¡Œ SQL æŸ¥è¯¢çš„é‚£ä¸€è¡Œï¼‰ã€‚</p><ul><li><strong>æå–å­—æ®µ</strong>ï¼š<code>locations</code> æ•°ç»„</li><li><strong>å…³é”®é€»è¾‘</strong>ï¼šé€šå¸¸å– <code>locations[0]</code>ï¼ˆæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ä½œä¸ºä¸»è¦ä½ç½®ã€‚</li><li><strong>å…·ä½“å†…å®¹</strong>ï¼š<ul><li><strong>æ–‡ä»¶è·¯å¾„</strong>ï¼š<code>locations[0].physicalLocation.artifactLocation.uri</code></li><li><strong>èµ·å§‹è¡Œå·</strong>ï¼š<code>locations[0].physicalLocation.region.startLine</code></li><li><strong>ä»£ç ç‰‡æ®µ</strong>ï¼ˆå¦‚æœæœ‰ï¼‰ï¼š<code>locations[0].physicalLocation.region.snippet.text</code></li></ul></li></ul><h4 id="C-æ•°æ®æµä¸æ§åˆ¶æµ"><a href="#C-æ•°æ®æµä¸æ§åˆ¶æµ" class="headerlink" title="C. æ•°æ®æµä¸æ§åˆ¶æµ"></a>C. æ•°æ®æµä¸æ§åˆ¶æµ</h4><p>è¿™æ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æœ€æœ‰ä»·å€¼çš„éƒ¨åˆ†ï¼Œæè¿°äº†æ±¡ç‚¹æ•°æ®ï¼ˆTaint Dataï¼‰æ˜¯å¦‚ä½•ä»<strong>è¾“å…¥æºï¼ˆSourceï¼‰</strong>ä¸€æ­¥æ­¥æµå‘<strong>çˆ†å‘ç‚¹ï¼ˆSinkï¼‰</strong>çš„ã€‚</p><p>CodeQL å°†æ•°æ®æµå’Œæ§åˆ¶æµç»Ÿä¸€æ”¾åœ¨ <code>codeFlows</code> å­—æ®µä¸­ã€‚</p><ul><li><strong>æå–å­—æ®µ</strong>ï¼š<code>codeFlows</code> æ•°ç»„</li><li><strong>ç»“æ„é€»è¾‘</strong>ï¼š<ol><li><code>codeFlows</code> ä¸‹é€šå¸¸åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª <code>threadFlows</code>ï¼ˆCodeQL é€šå¸¸åªç»™å‡ºä¸€ä¸ªæœ€å…·ä»£è¡¨æ€§çš„è·¯å¾„ï¼‰ã€‚</li><li><code>threadFlows</code> ä¸‹æ˜¯ä¸€ä¸ª <code>locations</code> åˆ—è¡¨ï¼Œè¿™æ˜¯ä¸€ä¸ª<strong>æœ‰åºæ•°ç»„</strong>ï¼Œä»£è¡¨äº†ä»£ç æ‰§è¡Œçš„æ­¥éª¤ã€‚</li></ol></li></ul><p><strong>å¦‚ä½•è§£æè¿™ä¸ªè·¯å¾„é“¾æ¡ï¼š</strong></p><ul><li><strong>Sourceï¼ˆæ±¡ç‚¹æºå¤´&#x2F;ç”¨æˆ·è¾“å…¥ï¼‰</strong>ï¼š<ul><li>é€šå¸¸æ˜¯ <code>threadFlows[0].locations</code> æ•°ç»„çš„<strong>ç¬¬ä¸€ä¸ªå…ƒç´ </strong>ã€‚</li><li>æå–ï¼š<code>...locations[0].location.physicalLocation</code> (æ–‡ä»¶å’Œè¡Œå·)</li><li>å«ä¹‰ï¼šä¾‹å¦‚ <code>request.getParameter(&quot;id&quot;)</code>ï¼Œè¿™æ˜¯æ•°æ®è¿›å…¥ç³»ç»Ÿçš„ä½ç½®ã€‚</li></ul></li><li><strong>Flow Pathï¼ˆä¼ æ’­è·¯å¾„&#x2F;æ§åˆ¶æµï¼‰</strong>ï¼š<ul><li>æ˜¯ <code>threadFlows[0].locations</code> æ•°ç»„çš„<strong>ä¸­é—´å…ƒç´ </strong>ã€‚</li><li>è¿™äº›æ­¥éª¤å±•ç¤ºäº†æ•°æ®ç»è¿‡äº†å“ªäº›å‡½æ•°è°ƒç”¨ã€èµ‹å€¼æ“ä½œæˆ–åˆ¤æ–­é€»è¾‘ã€‚</li><li><strong>å…³é”®æå–</strong>ï¼š<code>location.message.text</code> â€”â€” è¿™é‡Œé€šå¸¸ä¼šè¯´æ˜â€œæ•°æ®è¢«ä¼ é€’ç»™å‚æ•° xâ€æˆ–â€œæ•°æ®é€šè¿‡å‡½æ•°è¿”å›å€¼ä¼ æ’­â€ã€‚</li></ul></li><li><strong>Sinkï¼ˆçˆ†å‘ç‚¹&#x2F;æœ€ç»ˆä½ç½®ï¼‰</strong>ï¼š<ul><li>é€šå¸¸æ˜¯ <code>threadFlows[0].locations</code> æ•°ç»„çš„<strong>æœ€åä¸€ä¸ªå…ƒç´ </strong>ã€‚</li><li>è¿™åº”è¯¥ä¸ä¸Šé¢æåˆ°çš„ <strong>B. æ¼æ´ä½ç½®</strong> é‡åˆã€‚</li></ul></li></ul><hr><h3 id="æ€»ç»“ï¼šéœ€è¦æå–çš„-JSON-è·¯å¾„æ˜ å°„è¡¨"><a href="#æ€»ç»“ï¼šéœ€è¦æå–çš„-JSON-è·¯å¾„æ˜ å°„è¡¨" class="headerlink" title="æ€»ç»“ï¼šéœ€è¦æå–çš„ JSON è·¯å¾„æ˜ å°„è¡¨"></a>æ€»ç»“ï¼šéœ€è¦æå–çš„ JSON è·¯å¾„æ˜ å°„è¡¨</h3><p>ä¸ºäº†æ–¹ä¾¿ç¼–å†™è„šæœ¬ï¼ˆå¦‚ Pythonï¼‰æå–ï¼Œè¿™æ˜¯ä¸€ä¸ªé€ŸæŸ¥è¡¨ï¼š</p><table><thead><tr><th align="left">ä¿¡æ¯ç±»å‹</th><th align="left">SARIF JSON è·¯å¾„ (å‡è®¾å½“å‰åœ¨ results[i] å¯¹è±¡ä¸‹)</th><th align="left">è§£é‡Š</th></tr></thead><tbody><tr><td align="left"><strong>æ¼æ´ç±»å‹</strong></td><td align="left"><code>ruleId</code></td><td align="left">æ¼æ´çš„ IDï¼Œå¦‚ SQL æ³¨å…¥</td></tr><tr><td align="left"><strong>æ¼æ´æè¿°</strong></td><td align="left"><code>message.text</code></td><td align="left">äººç±»å¯è¯»çš„è§£é‡Š</td></tr><tr><td align="left"><strong>æ¼æ´æ–‡ä»¶</strong></td><td align="left"><code>locations[0].physicalLocation.artifactLocation.uri</code></td><td align="left">å‘ç”Ÿæ¼æ´çš„æ–‡ä»¶å</td></tr><tr><td align="left"><strong>æ¼æ´è¡Œå·</strong></td><td align="left"><code>locations[0].physicalLocation.region.startLine</code></td><td align="left">å‘ç”Ÿæ¼æ´çš„è¡Œå·</td></tr><tr><td align="left"><strong>æ•°æ®æµè·¯å¾„</strong></td><td align="left"><code>codeFlows[0].threadFlows[0].locations</code></td><td align="left">è¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«å®Œæ•´è·¯å¾„</td></tr><tr><td align="left"><strong>æ•°æ®æº (Source)</strong></td><td align="left"><code>codeFlows[0].threadFlows[0].locations[0]</code></td><td align="left">è·¯å¾„çš„ç¬¬ä¸€æ­¥</td></tr><tr><td align="left"><strong>ä¼ æ’­è¿‡ç¨‹</strong></td><td align="left"><code>codeFlows[0].threadFlows[0].locations[1:-1]</code></td><td align="left">è·¯å¾„çš„ä¸­é—´æ­¥éª¤</td></tr><tr><td align="left"><strong>çˆ†å‘ç‚¹ (Sink)</strong></td><td align="left"><code>codeFlows[0].threadFlows[0].locations[-1]</code></td><td align="left">è·¯å¾„çš„æœ€åä¸€æ­¥</td></tr></tbody></table><h3 id="4-ä¸¾ä¾‹è¯´æ˜"><a href="#4-ä¸¾ä¾‹è¯´æ˜" class="headerlink" title="4. ä¸¾ä¾‹è¯´æ˜"></a>4. ä¸¾ä¾‹è¯´æ˜</h3><p>å‡è®¾è¿™æ˜¯ä¸€ä¸ª SQL æ³¨å…¥çš„ <code>result</code> ç‰‡æ®µï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;ruleId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java/sql-injection&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Query depends on user input.&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;locations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  <span class="comment">// ---&gt; è¿™é‡Œæ˜¯ B: æ¼æ´æœ€ç»ˆçˆ†å‘çš„ä½ç½® (Sink)</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;physicalLocation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;artifactLocation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/DB.java&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;region&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;startLine&quot;</span><span class="punctuation">:</span> <span class="number">42</span> <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;codeFlows&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// ---&gt; è¿™é‡Œæ˜¯ C: å®Œæ•´çš„æ•°æ®æµ/æ§åˆ¶æµè·¯å¾„</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;threadFlows&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;locations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="comment">// æ­¥éª¤ 1: Source (æ•°æ®æº)</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;physicalLocation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/Controller.java&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;region&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;startLine&quot;</span><span class="punctuation">:</span> <span class="number">15</span> <span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;User input source...&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">              <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="comment">// æ­¥éª¤ 2: ä¸­é—´ä¼ æ’­</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;physicalLocation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/Service.java&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;region&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;startLine&quot;</span><span class="punctuation">:</span> <span class="number">20</span> <span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Data passed to function...&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">              <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="comment">// æ­¥éª¤ 3: Sink (é€šå¸¸ä¸ locations[0] ä¸€è‡´)</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;physicalLocation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/DB.java&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;region&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;startLine&quot;</span><span class="punctuation">:</span> <span class="number">42</span> <span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Data used in SQL query...&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">              <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><ol><li><strong>åˆ¤ç©ºå¤„ç†</strong>ï¼šä¸æ˜¯æ‰€æœ‰çš„ <code>results</code> éƒ½æœ‰ <code>codeFlows</code>ã€‚ç®€å•çš„ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆæ¯”å¦‚â€œå˜é‡æœªä½¿ç”¨â€ï¼‰é€šå¸¸åªæœ‰ <code>locations</code>ï¼Œæ²¡æœ‰æ•°æ®æµè·¯å¾„ã€‚åªæœ‰å®‰å…¨ç±»æ¼æ´ï¼ˆå¦‚æ³¨å…¥ã€XSSï¼‰é€šå¸¸ä¼šæœ‰ <code>codeFlows</code>ã€‚</li><li><strong>è·¯å¾„ç®€ç¹</strong>ï¼šCodeQL ç”Ÿæˆçš„ <code>codeFlows</code> æœ‰æ—¶éå¸¸è¯¦ç»†ï¼Œå¦‚æœåªå…³æ³¨å…³é”®è·³æ¿ï¼Œå…³æ³¨ <code>location.message</code> æ¯”è¾ƒæœ‰å¸®åŠ©ã€‚</li><li><strong>å…³è”ä½ç½®</strong>ï¼šæœ‰æ—¶è¿˜ä¼šçœ‹åˆ° <code>relatedLocations</code> å­—æ®µï¼Œè¿™é€šå¸¸ç”¨äºè¾…åŠ©è¯´æ˜ï¼ˆä¾‹å¦‚ï¼šæŒ‡å‡ºå˜é‡å®šä¹‰çš„ä½ç½®ï¼‰ï¼Œå¦‚æœä¸éœ€è¦æé«˜ç²¾åº¦ï¼Œå¯ä»¥æš‚æ—¶å¿½ç•¥ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> CodeQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SAST </tag>
            
            <tag> CodeQL </tag>
            
            <tag> SARIF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>uvä½¿ç”¨</title>
      <link href="/2025/12/10/uv%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/12/10/uv%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>uvæ˜¯ä¸€ä¸ªç”¨ Rust ç¼–å†™çš„æå¿«çš„ Python åŒ…å’Œé¡¹ç›®ç®¡ç†å·¥å…·ã€‚</p><p>å®˜æ–¹æ–‡æ¡£å‚è€ƒï¼š<a href="https://docs.astral.sh/uv/">https://docs.astral.sh/uv/</a></p><h2 id="uvå®‰è£…"><a href="#uvå®‰è£…" class="headerlink" title="uvå®‰è£…"></a>uvå®‰è£…</h2><p>Linux &amp; MacOS å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -LsSf https://astral.sh/uv/install.sh | sh</span><br></pre></td></tr></table></figure><p>Windows powershell å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell -ExecutionPolicy ByPass -c <span class="string">&quot;irm https://astral.sh/uv/install.ps1 | iex&quot;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>ä»¥Windowsä¸ºä¾‹ï¼Œä¸‹è½½uvå¹¶é…ç½®ç¯å¢ƒå˜é‡ï¼Œåœ¨powershellä¸­ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(base) <span class="built_in">PS</span> C:\Users\<span class="number">77319</span>&gt; powershell <span class="literal">-ExecutionPolicy</span> ByPass <span class="literal">-c</span> <span class="string">&quot;irm https://astral.sh/uv/install.ps1 | iex&quot;</span></span><br><span class="line">Downloading uv <span class="number">0.9</span>.<span class="number">17</span> (x86_64<span class="literal">-pc-windows-msvc</span>)</span><br><span class="line">Installing to C:\Users\<span class="number">77319</span>\.local\bin</span><br><span class="line">  uv.exe</span><br><span class="line">  uvx.exe</span><br><span class="line">  uvw.exe</span><br><span class="line">everything<span class="string">&#x27;s installed!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To add C:\Users\77319\.local\bin to your PATH, either restart your shell or run:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    set Path=C:\Users\77319\.local\bin;%Path%   (cmd)</span></span><br><span class="line"><span class="string">    $env:Path = &quot;C:\Users\77319\.local\bin;$env:Path&quot;   (powershell)</span></span><br><span class="line"><span class="string">(base) PS C:\Users\77319&gt; $env:Path = &quot;C:\Users\77319\.local\bin;$env:Path&quot;</span></span><br></pre></td></tr></table></figure><p>è¾“å…¥uv -h</p><p><img src="/../uploads/uv.png"></p><p>å³è¡¨ç¤ºå®‰å…¨æˆåŠŸã€‚</p><h2 id="uvä½¿ç”¨"><a href="#uvä½¿ç”¨" class="headerlink" title="uvä½¿ç”¨"></a>uvä½¿ç”¨</h2><p>ä»¥å®˜æ–¹å®è·µä¸ºä¾‹ï¼Œå±•ç¤ºuvå¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ª Python é¡¹ç›®ã€æ·»åŠ ä¾èµ–ã€è¿è¡Œå·¥å…·ã€ç”Ÿæˆé”æ–‡ä»¶å¹¶åŒæ­¥ç¯å¢ƒã€‚  </p><p><code>uv init example</code> â€” åˆ›å»ºä¸€ä¸ªæ–°çš„ Python é¡¹ç›®æ¨¡æ¿  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(base) zyu@zyu-virtual-machine:~$ uv init myproject_test</span><br><span class="line">Initialized project `myproject-test` at `/home/zyu/myproject_test`</span><br><span class="line">(base) zyu@zyu-virtual-machine:~$ <span class="built_in">cd</span> myproject_test/</span><br><span class="line">(base) zyu@zyu-virtual-machine:~/myproject_test$ tree .</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ main.py</span><br><span class="line">â”œâ”€â”€ pyproject.toml</span><br><span class="line">â””â”€â”€ README.md</span><br><span class="line"></span><br><span class="line">0 directories, 3 files</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>uv add ruff</code> â€” å®‰è£…ä¾èµ–å¹¶æ›´æ–° pyproject  </p><p>è‡ªåŠ¨åˆ›å»ºé¡¹ç›®è™šæ‹Ÿç¯å¢ƒï¼Œå®‰è£…ä¾èµ–åŒ…ruffï¼ŒæŠŠä¾èµ–å†™å…¥pyproject.tomlï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(base) zyu@zyu-virtual-machine:~/myproject_test$ uv add ruff</span><br><span class="line">Using CPython 3.13.9 interpreter at: /home/zyu/miniconda3/bin/python3</span><br><span class="line">Creating virtual environment at: .venv</span><br><span class="line">Resolved 2 packages <span class="keyword">in</span> 864ms</span><br><span class="line">Prepared 1 package <span class="keyword">in</span> 1.30s</span><br><span class="line">Installed 1 package <span class="keyword">in</span> 1ms</span><br><span class="line"> + ruff==0.14.8</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>uv run ruff check</code> â€” è¿è¡Œ ruff æ£€æŸ¥ä»£ç   </p><p> ä½¿ç”¨é¡¹ç›®è™šæ‹Ÿç¯å¢ƒé‡Œçš„ ruff æ‰§è¡Œä»£ç é£æ ¼æ£€æŸ¥ :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(base) zyu@zyu-virtual-machine:~/myproject_test$ uv run ruff check</span><br><span class="line">All checks passed!</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>uv lock</code> â€” ç”Ÿæˆé”æ–‡ä»¶ : è§£ææ‰€æœ‰ä¾èµ–ç‰ˆæœ¬  , ç”Ÿæˆ <code>uv.lock</code>ï¼ˆç±»ä¼¼ Pipfile.lock &#x2F; poetry.lockï¼‰ï¼Œä¿è¯è¿™ä¸ªé¡¹ç›®æœªæ¥ä¾èµ–å®‰è£…ä¸€è‡´ã€å¯å¤ç°ã€‚  </p><p><code>uv sync</code> â€” æŒ‰é”æ–‡ä»¶åŒæ­¥è™šæ‹Ÿç¯å¢ƒ ï¼š æ ¹æ® <code>uv.lock</code> å®‰è£…æˆ–æ›´æ–°ä¾èµ–  ï¼Œ ç¡®ä¿ <code>.venv/</code> å®Œå…¨åŒ¹é…é”æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(base) zyu@zyu-virtual-machine:~/myproject_test$ uv lock</span><br><span class="line">Resolved 2 packages <span class="keyword">in</span> 0.84ms</span><br><span class="line">(base) zyu@zyu-virtual-machine:~/myproject_test$ uv <span class="built_in">sync</span></span><br><span class="line">Resolved 2 packages <span class="keyword">in</span> 0.70ms</span><br><span class="line">Audited 1 package <span class="keyword">in</span> 0.09ms</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>uvx pycowsay &#39;hello world!&#39; </code> uvx ç­‰ä»·äº <code>uv tool run</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(base) zyu@zyu-virtual-machine:~/myproject_test$ uvx pycowsay <span class="string">&#x27;hello world!&#x27;</span></span><br><span class="line">Installed 1 package <span class="keyword">in</span> 5ms</span><br><span class="line">/home/zyu/.cache/uv/archive-v0/nYZiOnUm3DMddg7I9DLwr/lib/python3.13/site-packages/pycowsay/main.py:27: SyntaxWarning: invalid escape sequence <span class="string">&#x27;\ &#x27;</span></span><br><span class="line">  \   ^__^</span><br><span class="line"></span><br><span class="line">  ------------</span><br><span class="line">&lt; hello world! &gt;</span><br><span class="line">  ------------</span><br><span class="line">   \   ^__^</span><br><span class="line">    \  (oo)\_______</span><br><span class="line">       (__)\       )\/\</span><br><span class="line">           ||----w |</span><br><span class="line">           ||     ||</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯å®˜æ–¹æä¾›çš„ç¤ºä¾‹Demoã€‚</p><p>åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ï¼ˆä»¥<a href="https://github.com/JordyZomer/codeql-mcp#">https://github.com/JordyZomer/codeql-mcp#</a>ä¸ºä¾‹ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) PS D:\Code\codeql-mcp&gt; uv pip install -r .\requirements.txt</span><br><span class="line">error: No virtual environment found; run `uv venv` to create an environment, or pass `--system` to install into a non-virtual environment</span><br></pre></td></tr></table></figure><p> ä½¿ç”¨ <code>uv pip</code> å®‰è£…ä¾èµ–ï¼Œä½†å½“å‰ç›®å½•æ²¡æœ‰è™šæ‹Ÿç¯å¢ƒï¼Œæ‰€ä»¥ uv ä¸çŸ¥é“è¯¥æŠŠåŒ…è£…åˆ°å“ªé‡Œã€‚  uv çš„åŸåˆ™æ˜¯å¦‚æœä¸æŒ‡å®šè£…åˆ°å“ªé‡Œï¼Œå®ƒé»˜è®¤è¦æ‰¾ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼ˆ.venvï¼‰ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±æŠ¥é”™ã€‚æ‰€ä»¥éœ€è¦å…ˆåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">(base) PS D:\Code\codeql-mcp&gt; uv venv</span><br><span class="line">Using CPython 3.11.7 interpreter at: C:\Users\77319\anaconda3\python.exe</span><br><span class="line">Creating virtual environment at: .venv</span><br><span class="line">Activate with: .venv\Scripts\activate</span><br><span class="line">(base) PS D:\Code\codeql-mcp&gt; uv pip install -r .\requirements.txt</span><br><span class="line">Resolved 60 packages <span class="keyword">in</span> 1.61s</span><br><span class="line">Prepared 60 packages <span class="keyword">in</span> 3.56s</span><br><span class="line">â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ [0/60] Installing wheels...                                                warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance.                                                                                            </span><br><span class="line">         If the cache and target directories are on different filesystems, hardlinking may not be supported.                                                                                    </span><br><span class="line">         If this is intentional, <span class="built_in">set</span> `<span class="built_in">export</span> UV_LINK_MODE=copy` or use `--link-mode=copy` to suppress this warning.                                                                             </span><br><span class="line">Installed 60 packages <span class="keyword">in</span> 4.17s</span><br><span class="line"> + annotated-types==0.7.0                                                                       </span><br><span class="line"> + anyio==4.12.0                                                                                </span><br><span class="line"> + attrs==25.4.0                                                                                </span><br><span class="line"> + authlib==1.6.5                                                                               </span><br><span class="line"> + beartype==0.22.8                                                                             </span><br><span class="line"> + cachetools==6.2.2</span><br><span class="line"> + certifi==2025.11.12</span><br><span class="line"> + cffi==2.0.0</span><br><span class="line"> + charset-normalizer==3.4.4</span><br><span class="line"> + click==8.3.1</span><br><span class="line"> + colorama==0.4.6</span><br><span class="line"> + cryptography==46.0.3</span><br><span class="line"> + cyclopts==4.3.0</span><br><span class="line"> + diskcache==5.6.3</span><br><span class="line"> + dnspython==2.8.0</span><br><span class="line"> + docstring-parser==0.17.0</span><br><span class="line"> + docutils==0.22.3</span><br><span class="line"> + email-validator==2.3.0</span><br><span class="line"> + exceptiongroup==1.3.1</span><br><span class="line"> + fastmcp==2.13.3</span><br><span class="line"> + h11==0.16.0</span><br><span class="line"> + httpcore==1.0.9</span><br><span class="line"> + httpx==0.28.1</span><br><span class="line"> + httpx-sse==0.4.3</span><br><span class="line"> + idna==3.11</span><br><span class="line"> + jsonschema==4.25.1</span><br><span class="line"> + jsonschema-path==0.3.4</span><br><span class="line"> + jsonschema-specifications==2025.9.1</span><br><span class="line"> + markdown-it-py==4.0.0</span><br><span class="line"> + mcp==1.22.0</span><br><span class="line"> + mdurl==0.1.2</span><br><span class="line"> + openapi-pydantic==0.5.1</span><br><span class="line"> + pathable==0.4.4</span><br><span class="line"> + pathvalidate==3.3.1</span><br><span class="line"> + platformdirs==4.5.1</span><br><span class="line"> + py-key-value-aio==0.3.0</span><br><span class="line"> + py-key-value-shared==0.3.0</span><br><span class="line"> + pycparser==2.23</span><br><span class="line"> + pydantic==2.12.5</span><br><span class="line"> + pydantic-core==2.41.5</span><br><span class="line"> + pydantic-settings==2.12.0</span><br><span class="line"> + pygments==2.19.2</span><br><span class="line"> + pyjwt==2.10.1</span><br><span class="line"> + pyperclip==1.11.0</span><br><span class="line"> + python-dotenv==1.2.1</span><br><span class="line"> + python-multipart==0.0.20</span><br><span class="line"> + pywin32==311</span><br><span class="line"> + pyyaml==6.0.3</span><br><span class="line"> + referencing==0.36.2</span><br><span class="line"> + requests==2.32.5</span><br><span class="line"> + rich==14.2.0</span><br><span class="line"> + rich-rst==1.3.2</span><br><span class="line"> + rpds-py==0.30.0</span><br><span class="line"> + sse-starlette==3.0.3</span><br><span class="line"> + starlette==0.50.0</span><br><span class="line"> + typing-extensions==4.15.0</span><br><span class="line"> + typing-inspection==0.4.2</span><br><span class="line"> + urllib3==2.6.1</span><br><span class="line"> + uvicorn==0.38.0</span><br><span class="line"> + websockets==15.0.1</span><br></pre></td></tr></table></figure><p>å…³äºæŠ¥é”™ä¿¡æ¯å¯ä»¥å¿½ç•¥ï¼Œå¤§è‡´æ„æ€æ˜¯ï¼š uv æƒ³ç”¨ç¡¬é“¾æ¥ï¼ˆhardlinkï¼‰åŠ é€Ÿä¾èµ–å®‰è£…ï¼Œä½†æˆ‘ä»¬çš„ç¼“å­˜ç›®å½•å’Œå®‰è£…ç›®å½•ä¸åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸Š â†’ æ— æ³•ç¡¬é“¾æ¥ â†’ åªèƒ½é€€å›åˆ°â€œå®Œæ•´å¤åˆ¶â€æ–‡ä»¶ï¼Œæ€§èƒ½ç¨æ…¢ä¸€ç‚¹ã€‚  åº”è¯¥ç¼“å­˜ç›®å½•åœ¨Cç›˜ï¼Œä½†æ˜¯å®‰è£…ç›®å½•åœ¨Dç›˜ã€‚</p><p>è¿è¡ŒmcpæœåŠ¡å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(base) PS D:\Code\codeql-mcp&gt; uv run mcp run server.py -t sse</span><br><span class="line">Error: typer is required. Install with <span class="string">&#x27;pip install mcp[cli]&#x27;</span></span><br><span class="line">(base) PS D:\Code\codeql-mcp&gt; uv pip install mcp[cli]</span><br><span class="line">Resolved 37 packages <span class="keyword">in</span> 710ms</span><br><span class="line">Prepared 2 packages <span class="keyword">in</span> 138ms</span><br><span class="line">â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ [0/2] Installing wheels...                                                 warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance.</span><br><span class="line">         If the cache and target directories are on different filesystems, hardlinking may not be supported.</span><br><span class="line">         If this is intentional, <span class="built_in">set</span> `<span class="built_in">export</span> UV_LINK_MODE=copy` or use `--link-mode=copy` to suppress this warning.</span><br><span class="line">Installed 2 packages <span class="keyword">in</span> 56ms</span><br><span class="line"> + shellingham==1.5.4</span><br><span class="line"> + typer==0.20.0</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Config </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Config </tag>
            
            <tag> uv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kaliå®‰è£…ssh</title>
      <link href="/2025/12/10/kali%E5%AE%89%E8%A3%85ssh/"/>
      <url>/2025/12/10/kali%E5%AE%89%E8%A3%85ssh/</url>
      
        <content type="html"><![CDATA[<h1 id="kali-linux-å®‰è£…sshæœåŠ¡"><a href="#kali-linux-å®‰è£…sshæœåŠ¡" class="headerlink" title="kali linux å®‰è£…sshæœåŠ¡"></a>kali linux å®‰è£…sshæœåŠ¡</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get install ssh</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> systemctl start ssh</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> ssh <span class="comment">#è®¾ç½®å¼€æœºè‡ªå¯</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> systemctl status ssh <span class="comment">#æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Config </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Config </tag>
            
            <tag> Kali Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsç»“æŸè¿›ç¨‹</title>
      <link href="/2025/12/09/Windows%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B/"/>
      <url>/2025/12/09/Windows%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨è·‘ Springboot çš„ Java é¡¹ç›®æ—¶ï¼Œé‡åˆ°äº†ç«¯å£å ç”¨é—®é¢˜ï¼Œè®°ä¸€ä¸‹ Windows çš„æ ¹æ®ç›¸å…³ç«¯å£æ€è¿›ç¨‹å‘½ä»¤ã€‚</p><p>é¦–å…ˆæŸ¥æ‰¾å ç”¨ 8080 çš„ PIDï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano | findstr :8080</span><br></pre></td></tr></table></figure><p>ç„¶åæ ¹æ® PID å¼ºåˆ¶ç»“æŸè¿›ç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">taskkill /F /PID 3836</span><br></pre></td></tr></table></figure><span id="more"></span><ol start="3"><li>å®éªŒ</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\77319&gt;netstat -ano | findstr :8080</span><br><span class="line">  TCP    0.0.0.0:8080           0.0.0.0:0              LISTENING       3836</span><br><span class="line">  TCP    [::]:8080              [::]:0                 LISTENING       3836</span><br><span class="line"></span><br><span class="line">C:\Users\77319&gt;taskkill /F /PID 3836</span><br><span class="line">æˆåŠŸ: å·²ç»ˆæ­¢ PID ä¸º 3836 çš„è¿›ç¨‹ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaæ¼æ´é¶åœºæ­å»ºå­¦ä¹ (ä¸€)ï¼šç¯å¢ƒæ­å»ºä¸Springbootæ¶æ„</title>
      <link href="/2025/12/09/Java%E6%BC%8F%E6%B4%9E%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA%E5%AD%A6%E4%B9%A0-%E4%B8%80-%EF%BC%9A%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%B8%8ESpringboot%E6%9E%B6%E6%9E%84/"/>
      <url>/2025/12/09/Java%E6%BC%8F%E6%B4%9E%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA%E5%AD%A6%E4%B9%A0-%E4%B8%80-%EF%BC%9A%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%B8%8ESpringboot%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaæ¼æ´é¶åœºæ­å»ºå­¦ä¹ "><a href="#Javaæ¼æ´é¶åœºæ­å»ºå­¦ä¹ " class="headerlink" title="Javaæ¼æ´é¶åœºæ­å»ºå­¦ä¹ "></a>Javaæ¼æ´é¶åœºæ­å»ºå­¦ä¹ </h1><p>åœ¨å­¦ä¹  Java Web å®‰å…¨çš„è¿‡ç¨‹ä¸­ï¼Œç›®å‰çŠ¶æ€æ˜¯åªèƒ½ç†è§£ç›¸å…³çš„æ¼æ´åŸç†ï¼Œæ ¹æ® PoC åšé¢˜æˆ–è€…å¤ç°æ¼æ´ï¼Œä½†æ˜¯è¿™äº›å¯¹äº <strong>ä»£ç å®¡è®¡ã€æ¼æ´æŒ–æ˜ã€SDL</strong> ç­‰éƒ½æ²¡æœ‰å®è´¨æ€§å¸®åŠ©ï¼Œæƒ³è¦åœ¨å­¦ä¹ æˆ–å·¥ä½œè¿‡ç¨‹ä¸­æå‡ç›¸å…³èƒ½åŠ›ï¼Œè®¡åˆ’å®ç°ä»¥ä¸‹ç›®æ ‡ï¼š</p><ul><li>ç†è§£æ¼æ´äº§ç”Ÿçš„çœŸå®ä¸Šä¸‹æ–‡ï¼›</li><li>æ­å»ºä¸€ä¸ªå¯æ§ã€å¯æ‰©å±•çš„å®éªŒç¯å¢ƒï¼›</li><li>è®­ç»ƒä»ä»£ç å±‚é¢å®šä½ä¸ä¿®å¤é—®é¢˜çš„èƒ½åŠ›ï¼›</li></ul><p>è¿™ç¯‡åšå®¢è®°å½•äº†å­¦ä¹ æ­å»º Java æ¼æ´é¶åœºçš„è¿‡ç¨‹ï¼Œä½œä¸ºä¸€ä¸ªå­¦ä¹ è®°å½•ï¼Œä¸ºåç»­èƒ½å¤Ÿå¿«é€Ÿæ­å»ºæµ‹è¯•ç¯å¢ƒï¼ŒéªŒè¯ä»£ç å®¡è®¡å·¥å…·èƒ½åŠ›å¥ å®šåŸºç¡€ã€‚</p><span id="more"></span><h2 id="é¡¹ç›®é€‰ç”¨"><a href="#é¡¹ç›®é€‰ç”¨" class="headerlink" title="é¡¹ç›®é€‰ç”¨"></a>é¡¹ç›®é€‰ç”¨</h2><p>æœ¬æ–‡ä»¥ <a href="https://github.com/l4yn3/micro_service_seclab">micro_service_seclab</a> ä¸ºåŸºç¡€è¿›è¡Œç»ƒä¹ ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/l4yn3/micro_service_seclab.git</span><br></pre></td></tr></table></figure><p>æ‹¿åˆ°javaé¡¹ç›®ï¼Œå¯¼å…¥IDEAï¼Œå¯¹äºæœ‰pom.xmlçš„é¡¹ç›®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨mvnè¿›è¡Œæ„å»ºã€‚</p><p>åˆ›å»ºæ•°æ®åº“ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--é“¾æ¥æ•°æ®åº“</span></span><br><span class="line">mysql <span class="operator">-</span>u root <span class="operator">-</span>p</span><br><span class="line"></span><br><span class="line"><span class="comment">--åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE micro_service_seclab</span><br><span class="line">  <span class="keyword">CHARACTER SET</span> utf8mb4</span><br><span class="line">  <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci;</span><br><span class="line"></span><br><span class="line"><span class="comment">--ä½¿ç”¨æ•°æ®åº“</span></span><br><span class="line">USE micro_service_seclab;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œsqlæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> \d D:\Code\micro_service_seclab</span><br><span class="line"></span><br><span class="line"><span class="built_in">dir</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥æ•°æ®åº“</span></span><br><span class="line">mysql -u root -p micro_service_seclab &lt; micro_service_seclab.sql</span><br></pre></td></tr></table></figure><p>éœ€è¦æ‰¾åˆ° application.properties  æ–‡ä»¶ï¼Œä¿®æ”¹å¯¹åº”çš„æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">spring.datasource.url=jdbc:mysql://127.0.0.1:3306/micro_service_seclab</span></span><br><span class="line"><span class="string">spring.datasource.username=root</span></span><br><span class="line"><span class="string">spring.datasource.password=1234</span></span><br></pre></td></tr></table></figure><p>åœ¨pom.xmlçš„è·¯å¾„ä¸‹ï¼Œæ‰§è¡Œmvnå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn spring-boot:run</span><br></pre></td></tr></table></figure><p>å¯åŠ¨åè®¿é—® <a href="http://127.0.0.1:8080/sqlinjection/one?username=yueshen">http://127.0.0.1:8080/sqlinjection/one?username=yueshen</a> å³å¯çœ‹åˆ°è¿”å›ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;<span class="string">&quot;id&quot;</span>:1,<span class="string">&quot;username&quot;</span>:<span class="string">&quot;yueshen&quot;</span>,<span class="string">&quot;sex&quot;</span>:1,<span class="string">&quot;age&quot;</span>:33&#125;]</span><br></pre></td></tr></table></figure><h2 id="é¡¹ç›®è§£æ"><a href="#é¡¹ç›®è§£æ" class="headerlink" title="é¡¹ç›®è§£æ"></a>é¡¹ç›®è§£æ</h2><h3 id="Spring-Boot-ä¸‰å±‚æ¶æ„"><a href="#Spring-Boot-ä¸‰å±‚æ¶æ„" class="headerlink" title="Spring-Boot ä¸‰å±‚æ¶æ„"></a>Spring-Boot ä¸‰å±‚æ¶æ„</h3><p>è¯¥é¡¹ç›®æ ¸å¿ƒæ˜¯ä¸€ä¸ª Spring Boot Web åº”ç”¨ï¼Œé€šè¿‡ä¸åŒçš„ Controller æš´éœ²æ¼æ´æ¼”ç¤ºæ¥å£ï¼›åº•å±‚å†é€šè¿‡ Logic&#x2F;DAO&#x2F;DB&#x2F;MyBatis è®¿é—®æ•°æ®åº“æˆ–è§¦å‘å±é™©ç‚¹ã€‚</p><p>è°ƒç”¨é“¾ï¼ˆä¸€æ¬¡è¯·æ±‚çš„å®Œæ•´è·¯å¾„ï¼‰ï¼š</p><blockquote><p>HTTP è¯·æ±‚ â†’ controllerï¼ˆæ¼æ´å…¥å£ï¼‰ â†’ logicï¼ˆä¸šåŠ¡&#x2F;åœºæ™¯å°è£…ï¼‰ â†’ dao&#x2F;mapperï¼ˆæ•°æ®è®¿é—®&#x2F;å±é™©å®ç°ï¼‰ â†’ db&#x2F;mysql</p></blockquote><p>ç”¨é€šä¿—çš„è¯æ¥è®°å½•ï¼Œå°±æ˜¯ï¼š</p><p>Controller æä¾›é¶åœºå…¥å£ï¼ŒLogic åšä¸šåŠ¡ç»„ç»‡ï¼ŒDAO&#x2F;Mapper è´Ÿè´£æ•°æ®åº“æˆ–å±é™© API è°ƒç”¨ï¼Œdata æ˜¯å®ä½“&#x2F;æ•°æ®æ¨¡å‹ï¼Œdb æ˜¯æ•°æ®åº“åˆå§‹åŒ–&#x2F;è¿æ¥è¾…åŠ©ã€‚</p><ul><li><code>Controller</code>ï¼šæ¼æ´å…¥å£å±‚ï¼Œå¯¹å¤–æä¾› HTTP APIï¼Œç”¨æˆ·é€šè¿‡ HTTP æ‰“å¼€ï¼Œå®ƒè´Ÿè´£æŠŠè¯·æ±‚å¸¦å…¥å¯¹åº”çš„æ¼æ´åœºæ™¯ï¼›</li><li><code>Logic</code>ï¼šä¸šåŠ¡åœºæ™¯å°è£…å±‚ï¼Œå­˜æ”¾ Service çš„ä¸€äº›ä¸œè¥¿ï¼ŒæŠŠ Controller å‚æ•°å˜æˆåº•å±‚å¯æ‰§è¡Œçš„åŠ¨ä½œï¼›</li><li><code>Dao</code>ï¼šæ•°æ®è®¿é—®å±‚ï¼Œåšæ•°æ®æŒä¹…åŒ–ï¼Œæ–¹æ³•é’ˆå¯¹æ•°æ®åº“æ“ä½œï¼›</li><li><code>Mapper</code>ï¼šMyBatis Mapper æ¥å£å±‚ï¼Œå­˜æ”¾ MyBatis çš„æ¥å£å®šä¹‰ï¼›</li><li><code>data</code>ï¼šæ•°æ®æ¨¡å‹ å®ä½“å±‚ å¯¹åº”æ•°æ®åº“è¡¨æˆ–æ¥å£æ•°æ®ç»“æ„ï¼›</li></ul><h3 id="éƒ¨ç½²æ­å»ºè®°å½•"><a href="#éƒ¨ç½²æ­å»ºè®°å½•" class="headerlink" title="éƒ¨ç½²æ­å»ºè®°å½•"></a>éƒ¨ç½²æ­å»ºè®°å½•</h3><p>é¦–å…ˆé€‰æ‹©æ–°å»ºé¡¹ç›®ï¼š</p><p><img src="/../uploads/java_range1.png"></p><p>é€šè¿‡Springboot Initializråˆå§‹åŒ–é¡¹ç›®:</p><p><img src="/../uploads/java_range2.png"></p><p>é€‰æ‹©ç›¸å…³ä¾èµ–ï¼š</p><p><img src="/../uploads/java_range3.png"></p><p>åˆå§‹åŒ–é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/../uploads/java_range4.png"></p><p>ä¾èµ–è¿˜æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå› ä¸ºé¶åœºå¯¹åº”çš„æ˜¯Java1.8ç‰ˆæœ¬ï¼Œä½†æ˜¯IDEAåˆ›å»ºprojectæ—¶åªæœ‰17ã€21å’Œ25å¯é€‰é¡¹ï¼ˆè¿™ä¸ªåº”è¯¥æœ‰åŠæ³•è§£å†³ï¼Œåç»­å†æï¼‰ï¼Œä¸è¿‡ç›®å‰å·²ç»æ¸…æ¥šäº†Springbootçš„æ¶æ„æ˜¯ä»€ä¹ˆæ ·å­ã€‚</p><h2 id="ä»£ç å®¡è®¡"><a href="#ä»£ç å®¡è®¡" class="headerlink" title="ä»£ç å®¡è®¡"></a>ä»£ç å®¡è®¡</h2><h3 id="db-IndexDb-java"><a href="#db-IndexDb-java" class="headerlink" title="db&#x2F;IndexDb.java"></a>db&#x2F;IndexDb.java</h3><p><code>IndexDb.java</code> æ˜¯ä¸€ä¸ªåŸºäº <code>JdbcTemplate</code> çš„æ•°æ®åº“è®¿é—®ç±»ï¼Œè´Ÿè´£ä» students å’Œ teachers è¡¨ä¸­æŸ¥è¯¢æ•°æ®ï¼ŒåŒæ—¶ä¸ºäº†æ¼æ´é¶åœºæ¼”ç¤ºï¼Œåˆ»æ„ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ SQLï¼Œå­˜åœ¨æ˜æ˜¾çš„ SQL æ³¨å…¥é£é™©ã€‚</p><p>è¯¦ç»†è§£è¯»ï¼š</p><ul><li><p>è¢«æ ‡è®°ä¸º @Repositoryï¼Œä¾›å…¶ä»–å±‚ï¼ˆå¦‚ IndexLogic &#x2F; Controllerï¼‰æ³¨å…¥ä½¿ç”¨ã€‚</p></li><li><p>å†…éƒ¨å®šä¹‰äº†ä¸¤ä¸ª RowMapperï¼ŒæŠŠæŸ¥è¯¢ç»“æœæ˜ å°„æˆ Student å’Œ Teacher å¯¹è±¡ã€‚</p></li><li><p>æä¾›å¤šç§æŸ¥è¯¢æ–¹æ³•ï¼š</p><ol><li><p>æŒ‰ç”¨æˆ·åæ¨¡ç³ŠæŸ¥è¯¢å­¦ç”Ÿï¼šgetStudent &#x2F; getStudentWithOptional</p></li><li><p>æŒ‰ id æŸ¥è¯¢å­¦ç”Ÿï¼šgetStudentById</p></li><li><p>æŒ‰ id æŸ¥è¯¢æ•™å¸ˆï¼šgetTeacherById</p></li><li><p>ä½¿ç”¨ IN æ¡ä»¶æ‰¹é‡ç”¨æˆ·åæŸ¥è¯¢å­¦ç”Ÿï¼šgetStudentWithIn &#x2F; getStudentWithInLong</p></li></ol></li></ul><p>æ‰€æœ‰ SQL éƒ½æ˜¯ç›´æ¥æ‹¼æ¥å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬ Optionalã€List çš„æ‹¼æ¥ï¼‰ä½œä¸ºé¶åœºä¸­æ¼”ç¤º SQL æ³¨å…¥çš„é‡è¦éƒ¨åˆ†ã€‚æˆªå–éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IndexDb</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ Spring çš„ JdbcTemplate ç›´æ¥æ“ä½œæ•°æ®åº“çš„ä»“åº“ç±»ã€‚</span></span><br><span class="line"><span class="comment"> * ä¸»è¦æä¾›é’ˆå¯¹ students / teachers è¡¨çš„æŸ¥è¯¢æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * æ³¨æ„ï¼šæœ¬ç±»ä¸ºäº†é…åˆâ€œJava æ¼æ´é¶åœºâ€ï¼Œå¤§é‡ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥æ„é€  SQLï¼Œ</span></span><br><span class="line"><span class="comment"> *       å®é™…ä¸Šå­˜åœ¨å…¸å‹çš„ SQL æ³¨å…¥é£é™©ï¼Œç”¨äºå®‰å…¨æ¼”ç¤ºã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexDb</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Spring æ³¨å…¥ JdbcTemplateï¼Œç”¨äºæ‰§è¡Œ SQL è¯­å¥</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† ResultSet æ˜ å°„ä¸º Student å¯¹è±¡çš„ RowMapper</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> RowMapper&lt;Student&gt; ROW_MAPPER = (rs, i) -&gt; &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        student.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        student.setAge(rs.getInt(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">        student.setSex(rs.getInt(<span class="string">&quot;sex&quot;</span>));</span><br><span class="line">        student.setUsername(rs.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> student;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† ResultSet æ˜ å°„ä¸º Teacher å¯¹è±¡çš„ RowMapper</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> RowMapper&lt;Teacher&gt; ROW_MAPPER_TEACHER = (rs, i) -&gt; &#123;</span><br><span class="line">        <span class="type">Teacher</span> <span class="variable">teacher</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>();</span><br><span class="line">        teacher.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        teacher.setSex(rs.getBoolean(<span class="string">&quot;sex&quot;</span>));</span><br><span class="line">        teacher.setName(rs.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> teacher;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·åæ¨¡ç³ŠæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="comment">     * æ¼æ´ç‚¹ï¼šç›´æ¥æ‹¼æ¥ username åˆ° SQL ä¸­ï¼Œå­˜åœ¨ SQL æ³¨å…¥é£é™©ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudent</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="comment">// å®‰å…¨å†™æ³•ç¤ºä¾‹ï¼ˆè¢«æ³¨é‡Šæ‰ï¼‰ï¼šä½¿ç”¨å ä½ç¬¦å¹¶ç»‘å®šå‚æ•°</span></span><br><span class="line">        <span class="comment">// String sql = &quot;select * from students where username like ?&quot;;</span></span><br><span class="line">        <span class="comment">// return jdbcTemplate.query(sql, new Object[]&#123;&quot;%&quot; + username + &quot;%&quot;&#125;, ROW_MAPPER);</span></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from students where username like &#x27;%&quot;</span> + username + <span class="string">&quot;%&#x27;&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.query(sql, ROW_MAPPER);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ Optional åŒ…è£…çš„ç”¨æˆ·åè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="comment">     * å®é™…ä¸Šä»ç„¶æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ï¼ŒåŒæ ·å­˜åœ¨ SQL æ³¨å…¥é£é™©ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentWithOptional</span><span class="params">(Optional&lt;String&gt; username)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sqlWithOptional</span> <span class="operator">=</span></span><br><span class="line">                <span class="string">&quot;select * from students where username like &#x27;%&quot;</span> + username.get() + <span class="string">&quot;%&#x27;&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.query(sqlWithOptional, ROW_MAPPER);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡ id ç²¾ç¡®æŸ¥è¯¢å­¦ç”Ÿã€‚</span></span><br><span class="line"><span class="comment">     * æ¼æ´ç‚¹ï¼šå°† id è½¬æˆå­—ç¬¦ä¸²å†æ‹¼æ¥åˆ° SQL ä¸­ï¼Œå­˜åœ¨æ³¨å…¥é£é™©ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sqlWithInt</span> <span class="operator">=</span></span><br><span class="line">                <span class="string">&quot;select * from students where id = &#x27;&quot;</span> + String.valueOf(id) + <span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.query(sqlWithInt, ROW_MAPPER);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="logic-IndexLogic-java"><a href="#logic-IndexLogic-java" class="headerlink" title="logic&#x2F;IndexLogic.java"></a>logic&#x2F;IndexLogic.java</h3><p><code>IndexLogic.java</code> æœ¬è´¨ä¸Šæ˜¯<strong>Service å±‚çš„ä¸€ä¸ªæµ…å°è£…</strong>ï¼š</p><ul><li>ç”¨ <code>@Service</code> æ ‡è®°ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸šåŠ¡é€»è¾‘å±‚çš„ Beanï¼›</li><li>é€šè¿‡ <code>@Autowired</code> æ³¨å…¥ <code>IndexDb</code>ï¼ˆ4.1èŠ‚å¯¹åº”çš„é‚£ä¸ªæ•°æ®åº“è®¿é—®ç±»ï¼‰ï¼›</li><li>å¯¹å¤–æä¾›ä¸€ç»„æ–¹æ³•ï¼š<code>getStudent</code> &#x2F; <code>getStudentById</code> &#x2F; <code>getStudentWithOptional</code> &#x2F; <code>getStudentWithIn</code> &#x2F; <code>getStudentWithInLong</code> &#x2F; <code>getTeacherById</code>ï¼›</li><li>æ¯ä¸ªæ–¹æ³•éƒ½<strong>ç›´æ¥æŠŠå‚æ•°åŸæ ·è½¬å‘ç»™ <code>IndexDb</code>ï¼Œä¸åšé¢å¤–å¤„ç†</strong>ï¼Œç›¸å½“äºâ€œè½¬å‘å±‚â€ï¼›</li><li>å› ä¸º <code>IndexDb</code> é‡Œé¢çš„ SQL æ˜¯æ‹¼æ¥çš„ï¼Œæ‰€ä»¥è¿™äº› Service æ–¹æ³•ä¹Ÿå°±â€œé¡ºå¸¦â€æš´éœ²å‡º SQL æ³¨å…¥æ¼æ´åœºæ™¯ï¼Œæ–¹ä¾¿ Controller è°ƒç”¨ã€‚</li></ul><p>å¯ä»¥ç†è§£ä¸ºï¼š<br><strong>Controller -&gt; IndexLogic -&gt; IndexDb -&gt; Databases</strong></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IndexLogic</span></span><br><span class="line"><span class="comment"> * ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆServiceï¼‰ï¼Œå¯¹å¤–æä¾›å­¦ç”Ÿ / è€å¸ˆç›¸å…³çš„æŸ¥è¯¢æ¥å£ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * å½“å‰å®ç°éå¸¸è–„ï¼Œåªæ˜¯ç®€å•åœ°æŠŠè°ƒç”¨è½¬å‘ç»™ IndexDbï¼Œ</span></span><br><span class="line"><span class="comment"> * ä¸»è¦èµ·åˆ°ï¼šController ä¸ DB æ“ä½œä¹‹é—´çš„â€œä¸­é—´å±‚â€ä½œç”¨ï¼Œ</span></span><br><span class="line"><span class="comment"> * æ–¹ä¾¿ä¿æŒä¸‰å±‚æ¶æ„çš„ç»“æ„æ¸…æ™°ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ç”±äºåº•å±‚ IndexDb ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ SQLï¼Œ</span></span><br><span class="line"><span class="comment"> * è¿™äº›æ–¹æ³•å®é™…ä¹Ÿç”¨äºé…åˆæ¼æ´é¶åœºæ¼”ç¤º SQL æ³¨å…¥åœºæ™¯ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexLogic</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨å…¥æ•°æ®åº“è®¿é—®ç±» IndexDb</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    IndexDb indexDb;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·åæ¨¡ç³ŠæŸ¥è¯¢å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudent</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexDb.getStudent(username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® id æŸ¥è¯¢å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexDb.getStudentById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ Optional åŒ…è£…çš„ç”¨æˆ·åæŸ¥è¯¢å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentWithOptional</span><span class="params">(Optional&lt;String&gt; username)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexDb.getStudentWithOptional(username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ IN æ¡ä»¶ï¼ˆå­—ç¬¦ä¸²åˆ—è¡¨ï¼‰æ‰¹é‡æŸ¥è¯¢å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentWithIn</span><span class="params">(List&lt;String&gt; user_list)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexDb.getStudentWithIn(user_list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ IN æ¡ä»¶ï¼ˆLong åˆ—è¡¨ï¼‰æ‰¹é‡æŸ¥è¯¢å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentWithInLong</span><span class="params">(List&lt;Long&gt; user_list)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexDb.getStudentWithInLong(user_list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®â€œid/userNameâ€æŸ¥è¯¢è€å¸ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Teacher&gt; <span class="title function_">getTeacherById</span><span class="params">(String userName)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexDb.getTeacherById(userName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>IndexLogic æ˜¯ Controller å’Œ IndexDb ä¹‹é—´çš„æ¡¥æ¢ï¼ŒæŠŠå„ç§æŸ¥è¯¢æ“ä½œç»„ç»‡æˆä¸šåŠ¡æ¥å£ï¼Œæ–¹ä¾¿æš´éœ²ä¸º HTTP é¶åœºæ¥å£ã€‚</strong></p><hr><h3 id="mapper-IStudentMapper-java"><a href="#mapper-IStudentMapper-java" class="headerlink" title="mapper&#x2F;IStudentMapper.java"></a>mapper&#x2F;IStudentMapper.java</h3><p>IStudentMapper æ˜¯ students è¡¨çš„ MyBatis æ¥å£ï¼Œå…¶ä¸­ <code>queryAllByAnnotations</code> ç”¨æ³¨è§£ + <code>$&#123;&#125;</code> æ‹¼ä¸²ï¼Œä¸“é—¨ç”¨æ¥æ£€æµ‹æ³¨è§£å¼ SQL æ³¨å…¥æ¼æ´ã€‚</p><p>Mapper <strong>â‰ˆ</strong> æ˜ å°„å™¨ï¼Œä»–çš„ä½œç”¨æ˜¯æŠŠ â€œJava æ–¹æ³•è°ƒç”¨â€ æ˜ å°„æˆ â€œSQL è¯­å¥æ‰§è¡Œâ€ï¼Œå†æŠŠç»“æœæ˜ å°„å› Java å¯¹è±¡ã€‚ä¹Ÿå¯ä»¥ç§°ä¸ºâ€œMyBatis å¸®å¿™è‡ªåŠ¨å®ç°çš„ DAO æ¥å£â€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IStudentMapper</span></span><br><span class="line"><span class="comment"> * MyBatis çš„ Mapper æ¥å£ï¼Œå¯¹ students è¡¨æä¾›æŸ¥è¯¢æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªæ¥å£æœ‰ä¸¤ä¸ªç›®çš„ï¼š</span></span><br><span class="line"><span class="comment"> * 1ï¼‰æ­£å¸¸çš„æŸ¥è¯¢æ–¹æ³•ï¼ˆqueryAllï¼‰ï¼ŒSQL é€šå¸¸å†™åœ¨ XML ä¸­ï¼›</span></span><br><span class="line"><span class="comment"> * 2ï¼‰ä½¿ç”¨æ³¨è§£ + $&#123;&#125; æ‹¼æ¥å‚æ•°çš„æ–¹å¼ï¼Œæ•…æ„åˆ¶é€  SQL æ³¨å…¥æ¼æ´ï¼Œ</span></span><br><span class="line"><span class="comment"> *    ç”¨äºæµ‹è¯•ä»£ç æ‰«æå·¥å…·æ˜¯å¦èƒ½è¯†åˆ«æ³¨è§£é‡Œçš„æ³¨å…¥é—®é¢˜ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–¹å¼ä¸€ï¼šå¸¸è§„æŸ¥è¯¢æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * SQL å†™åœ¨ resources/mappers/IStudentMapper.xml ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment">     * ä¸€èˆ¬ä¼šä½¿ç”¨ #&#123;name&#125; è¿™ç§å ä½ç¬¦ï¼Œå±äºå‚æ•°ç»‘å®šå†™æ³•ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Student&gt; <span class="title function_">queryAll</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String username)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–¹å¼äºŒï¼šæ³¨è§£å¼ SQLï¼Œæ•…æ„ä½¿ç”¨ $&#123;&#125; ç›´æ¥æ‹¼æ¥å‚æ•°ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * è¿™é‡Œçš„ SQLï¼š</span></span><br><span class="line"><span class="comment">     *   select * from students where username =&#x27;$&#123;name&#125;&#x27;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * $&#123;name&#125; ä¼šè¢«åŸæ ·æ›¿æ¢åˆ° SQL ä¸­ï¼Œå­˜åœ¨æ˜æ˜¾çš„ SQL æ³¨å…¥é£é™©ã€‚</span></span><br><span class="line"><span class="comment">     * è¿™æ˜¯é¶åœºä¸­ä¸“é—¨ç”¨æ¥æµ‹è¯•â€œé™æ€æ‰«æå·¥å…·èƒ½å¦å‘ç°æ³¨è§£é‡Œçš„ SQL æ³¨å…¥â€çš„ä¾‹å­ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from students where username =&#x27;$&#123;name&#125;&#x27;&quot;)</span></span><br><span class="line">    List&lt;Student&gt; <span class="title function_">queryAllByAnnotations</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String username)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="data-Person-java"><a href="#data-Person-java" class="headerlink" title="data&#x2F;Person.java"></a>data&#x2F;Person.java</h3><p>data æ–‡ä»¶å¤¹ä¸‹ä¸“é—¨å­˜æ”¾äº†â€œæ•°æ®æ¨¡å‹â€ï¼Œå¯ä»¥ä¿å­˜æ•°æ®åº“å’Œä¸šåŠ¡é‡Œçš„â€œå®ä½“å¯¹è±¡â€ã€‚åŒæ—¶ä½œä¸ºå„ä¸ªå±‚æ¬¡ä¹‹é—´ä¼ é€’æ•°æ®çš„è½½ä½“ï¼š</p><ul><li><p>db&#x2F;IndexDb æŸ¥å‡ºæ¥çš„æ˜¯ List<Student>ã€List<Teacher></p></li><li><p>logic&#x2F;IndexLogic æ¥æ”¶&#x2F;è¿”å›çš„ä¹Ÿæ˜¯è¿™äº›å¯¹è±¡</p></li><li><p>Controller å¯¹å¤–è¿”å›çš„ JSONï¼Œå…¶å®å°±æ˜¯æŠŠè¿™äº› data ç±»åºåˆ—åŒ–å‡ºå»</p></li></ul><p>ğŸ‘‰ è¿™æ · Controllerã€Serviceã€DAO éƒ½å›´ç»•åŒä¸€å¥—â€œæ•°æ®ç»“æ„â€åœ¨äº¤æµã€‚</p><p>Person æ˜¯ç”¨ JPA+Hibernate æ˜ å°„å‡ºæ¥çš„äººå‘˜è¡¨å®ä½“ï¼Œç”¨ UUID å½“ä¸»é”®ï¼Œå¹¶å¼ºåˆ¶ username å’Œ nickname çš„å”¯ä¸€æ€§ä¸éç©ºçº¦æŸã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Person å®ä½“ç±»ï¼š</span></span><br><span class="line"><span class="comment"> * æ˜ å°„æ•°æ®åº“ä¸­çš„ person è¡¨ï¼ˆé»˜è®¤è¡¨åï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ UUID ä½œä¸ºä¸»é”®ï¼ŒåŒ…å«å”¯ä¸€ä¸”å¿…å¡«çš„ username / nickname å­—æ®µã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸»é”® IDï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„ UUID ç”Ÿæˆç­–ç•¥</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GenericGenerator(name = &quot;idGenerator&quot;, strategy = &quot;uuid&quot;)</span></span><br><span class="line">    <span class="meta">@GeneratedValue(generator = &quot;idGenerator&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·ååˆ—ï¼šå”¯ä¸€ã€éç©ºï¼Œæœ€é•¿ 100 å­—ç¬¦</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;username&quot;, unique = true, nullable = false, length = 100)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜µç§°åˆ—ï¼šå”¯ä¸€ã€éç©ºï¼Œæœ€é•¿ 100 å­—ç¬¦</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;nickname&quot;, unique = true, nullable = false, length = 100)</span></span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="dao-PersonRepository-java"><a href="#dao-PersonRepository-java" class="headerlink" title="dao&#x2F;PersonRepository.java"></a>dao&#x2F;PersonRepository.java</h3><p><code>PersonRepository</code> æ˜¯ä¸€ä¸ªåŸºäº Spring Data JPA çš„ DAO æ¥å£ï¼Œè´Ÿè´£å¯¹ Person å®ä½“åšæ•°æ®åº“æŸ¥è¯¢ï¼šæ ¹æ® username å’Œ nickname æŸ¥äººï¼Œä¾› Controller æˆ– Service è°ƒç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * PersonRepository</span></span><br><span class="line"><span class="comment"> * åŸºäº Spring Data JPA çš„ DAO æ¥å£ï¼Œ</span></span><br><span class="line"><span class="comment"> * ç”¨äºå¯¹ Person å®ä½“è¿›è¡Œæ•°æ®åº“è®¿é—®æ“ä½œã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * é€šè¿‡ç»§æ‰¿ JpaRepositoryï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨é€šç”¨çš„å¢åˆ æ”¹æŸ¥æ–¹æ³•ï¼Œ</span></span><br><span class="line"><span class="comment"> * åŒæ—¶ä¹Ÿå¯ä»¥å®šä¹‰æ´¾ç”ŸæŸ¥è¯¢æ–¹æ³•æˆ–è‡ªå®šä¹‰ <span class="doctag">@Query</span> æŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PersonRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;Person, String&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ Spring Data JPA çš„â€œæ–¹æ³•åæ´¾ç”ŸæŸ¥è¯¢â€åŠŸèƒ½ï¼Œ</span></span><br><span class="line"><span class="comment">     * æ ¹æ® username å­—æ®µæŸ¥è¯¢ Person åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * ç­‰ä»·äºï¼šSELECT p FROM Person p WHERE p.username = ?1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Person&gt; <span class="title function_">findPersonByUsername</span><span class="params">(String username)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ <span class="doctag">@Query</span> æ‰‹å†™ JPQL æŸ¥è¯¢ï¼Œæ ¹æ® nickname æŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Query(&quot;SELECT nickname FROM Person WHERE nickname = &#x27;?1&#x27;&quot;)</span></span><br><span class="line">    List&lt;Person&gt; <span class="title function_">findPersonByNickname</span><span class="params">(String nickname)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="controller-VulnerabilitiesController-java"><a href="#controller-VulnerabilitiesController-java" class="headerlink" title="controller&#x2F;VulnerabilitiesController.java"></a>controller&#x2F;VulnerabilitiesController.java</h3><p><code>controller</code> æ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾é¡¹ç›®é‡Œçš„æ§åˆ¶å™¨ç±»ï¼Œä¹Ÿå°±æ˜¯å¯¹å¤–æš´éœ² HTTP æ¥å£çš„é‚£ä¸€å±‚ã€‚åœ¨ Spring Boot é‡Œï¼ŒController è´Ÿè´£æ¥æ”¶æµè§ˆå™¨æˆ–å·¥å…·ï¼ˆå¦‚ Postmanã€burpï¼‰çš„è¯·æ±‚ï¼Œè§£æå‚æ•°ï¼ŒæŠŠè¯·æ±‚è½¬äº¤ç»™é€»è¾‘å±‚ï¼ˆlogic&#x2F;serviceï¼‰ï¼Œå†æŠŠè¿”å›ç»“æœå°è£…æˆ JSON æˆ–é¡µé¢å“åº”ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java Security </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java Security </tag>
            
            <tag> Springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CodeQLå…¥é—¨</title>
      <link href="/2025/12/07/CodeQL%E5%85%A5%E9%97%A8/"/>
      <url>/2025/12/07/CodeQL%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="CodeQL-å…¥é—¨"><a href="#CodeQL-å…¥é—¨" class="headerlink" title="CodeQL å…¥é—¨"></a>CodeQL å…¥é—¨</h1><p>åœ¨ç½‘ç»œå®‰å…¨å’Œä»£ç å®¡è®¡çš„é¢†åŸŸï¼Œé™æ€åº”ç”¨ç¨‹åºå®‰å…¨æµ‹è¯•ï¼ˆStatic application security testingï¼ŒSASTï¼‰å·¥å…·å±‚å‡ºä¸ç©·ã€‚ä½†åœ¨ 2019 å¹´ GitHub æ”¶è´­ Semmle ä¹‹åï¼ŒCodeQL è¿…é€Ÿæˆä¸ºäº†ä¸šç•Œé¡¶æµã€‚</p><p>ä¼ ç»Ÿçš„æ‰«æå·¥å…·å¾€å¾€åƒæ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œä½ è¾“å…¥ä»£ç ï¼Œå®ƒåå‡ºæŠ¥å‘Šã€‚ä½† CodeQL ä¸åŒï¼Œå®ƒçš„æ ¸å¿ƒç†å¿µéå¸¸æœ‰æ„æ€ï¼š <code>Code as Data</code> ä»£ç å³æ•°æ®ï¼ŒCodeQL æŠŠæºä»£ç è½¬åŒ–æˆä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ï¼Œè€Œæ¼æ´æŒ–æ˜çš„è¿‡ç¨‹ï¼Œå°±å˜æˆäº†ä¸€æ¬¡æ¬¡ç¼–å†™ SQLï¼ˆå…¶å®æ˜¯ QLï¼‰æŸ¥è¯¢è¯­å¥çš„è¿‡ç¨‹ã€‚</p><p>CodeQL å·¥å…·åŒ…å«ä¸¤å¤§éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>æ ¸å¿ƒå¼•æ“(é—­æº)ï¼šç”¨äºè§£ææºä»£ç å¹¶å­˜å‚¨äºæ•°æ®åº“ï¼Œä»¥åŠæ‰§è¡Œ QL è¯­å¥ä»æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ï¼›</li><li>SDKä»£ç åº“(å¼€æº)ï¼šåŒ…å«å„ç¼–ç¨‹è¯­è¨€å¯¹åº”çš„ QL ä»£ç åº“(å±æ€§&#x2F;è°“è¯&#x2F;ç­‰)ï¼Œä»¥ä¾¿å¿«é€Ÿç¼–å†™æŸ¥è¯¢è¯­å¥ã€‚</li></ul><p>è¿™ç»™äº†å®‰å…¨ç ”ç©¶å‘˜å’Œå¼€å‘è€…æå¤§çš„è‡ªç”±åº¦â€”â€”ä¸å†å—é™äºå·¥å…·å†…ç½®çš„è§„åˆ™ï¼Œå¯ä»¥è‡ªå·±å®šä¹‰â€œä»€ä¹ˆæ ·çš„ä»£ç é•¿ç›¸å­˜åœ¨æ¼æ´â€ã€‚è¿™ç¯‡ Blog è®°å½•äº†æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨ CodeQL è¿›è¡Œé™æ€ä»£ç åˆ†æçš„è¿‡ç¨‹ã€‚</p><span id="more"></span><h2 id="ä¸€ã€CodeQL-æ ¸å¿ƒå·¥ä½œæµ"><a href="#ä¸€ã€CodeQL-æ ¸å¿ƒå·¥ä½œæµ" class="headerlink" title="ä¸€ã€CodeQL æ ¸å¿ƒå·¥ä½œæµ"></a>ä¸€ã€CodeQL æ ¸å¿ƒå·¥ä½œæµ</h2><p>ä½¿ç”¨ CodeQL ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p><ol><li><p><strong>åˆ›å»ºæ•°æ®åº“ï¼ˆCreate Databaseï¼‰</strong>ï¼š åœ¨ç¼–è¯‘&#x2F;æ„å»ºä»£ç çš„è¿‡ç¨‹ä¸­ï¼ŒCodeQL ä¼šâ€œæ—è·¯ç›‘å¬â€ï¼Œæ•æ‰æ‰€æœ‰çš„ç¼–è¯‘å‘½ä»¤ã€æ–‡ä»¶ç»“æ„ã€å‡½æ•°è°ƒç”¨å…³ç³»ï¼Œç”Ÿæˆä¸€ä¸ªå¿«ç…§æ•°æ®åº“ï¼›</p></li><li><p><strong>ç¼–å†™&#x2F;è¿è¡ŒæŸ¥è¯¢ï¼ˆAnalyzeï¼‰</strong>ï¼š ä½¿ç”¨ä¸€ç§ç±»ä¼¼ SQL çš„é¢å‘å¯¹è±¡æŸ¥è¯¢è¯­è¨€ï¼ˆQLï¼‰ï¼Œåœ¨æ•°æ®åº“ä¸­æŸ¥æ‰¾ç¬¦åˆç‰¹å¾çš„ä»£ç ç‰‡æ®µï¼›</p></li><li><p><strong>ç”Ÿæˆç»“æœï¼ˆResultsï¼‰</strong>ï¼š è¾“å‡ºåˆ†ææŠ¥å‘Šï¼ˆé€šå¸¸æ˜¯ SARIF æ ¼å¼ï¼‰ï¼Œå®šä½åˆ°å…·ä½“çš„ä»£ç è¡Œå·ã€‚</p></li></ol><h2 id="äºŒã€CodeQL-å®‰è£…"><a href="#äºŒã€CodeQL-å®‰è£…" class="headerlink" title="äºŒã€CodeQL å®‰è£…"></a>äºŒã€CodeQL å®‰è£…</h2><p>è¿è¡Œ CodeQL éœ€è¦å®‰è£… CodeQL CLI å·¥å…·ï¼Œåˆ†å¼€ä¸‹è½½çš„è¯éœ€è¦åˆ†åˆ«ä¸‹è½½ CodeQL binary å’Œ SDKï¼Œéœ€è¦æ”¾åœ¨ç›¸åŒç›®å½•ä¸‹ä¸”ç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½æ†ç»‘åŒ…ï¼Œä»¥ Ubuntu ç¯å¢ƒä¸ºä¾‹ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/github/codeql-action/releases/download/codeql-bundle-v2.16.1/codeql-bundle-linux64.tar.gz</span><br><span class="line"></span><br><span class="line">tar -xvzf codeql-bundle-linux64.tar.gz</span><br><span class="line"></span><br><span class="line">vi /etc/profile</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/home/aono/codeqlsrc/codeql</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><p>æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">codeql --version</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨  <code>codeQL resolve languages</code> å¯ä»¥æŸ¥çœ‹æ”¯æŒçš„ç¼–ç¨‹è¯­è¨€ã€‚</p><h2 id="ä¸‰ã€CodeQL-ç®€å•ä½¿ç”¨"><a href="#ä¸‰ã€CodeQL-ç®€å•ä½¿ç”¨" class="headerlink" title="ä¸‰ã€CodeQL ç®€å•ä½¿ç”¨"></a>ä¸‰ã€CodeQL ç®€å•ä½¿ç”¨</h2><p>æŒ‡å®šé¡¹ç›®åˆ›å»ºæ•°æ®åº“ï¼Œä»¥ Java ç›®æ ‡ï¼ˆ<a href="https://github.com/l4yn3/micro_service_seclab%EF%BC%89%E4%B8%BA%E4%BE%8B%EF%BC%8C%E9%A1%B9%E7%9B%AE%E9%80%9A%E8%BF%87">https://github.com/l4yn3/micro_service_seclabï¼‰ä¸ºä¾‹ï¼Œé¡¹ç›®é€šè¿‡</a> mvn æ„å»ºï¼Œé¦–å…ˆå®‰è£… mvnï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt install maven -y</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ•°æ®åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./codeql/codeql database create java_db --language=java --source-root=./test/micro_service_seclab/</span><br></pre></td></tr></table></figure><p><img src="/../uploads/codeql_1.png"></p><p>ä½¿ç”¨é»˜è®¤è§„åˆ™è¿›è¡ŒæŸ¥è¯¢ï¼Œç”Ÿæˆ SARIF æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./codeql/codeql database analyze java_db/ --format=sarif-latest --output=java_result.sarif</span><br></pre></td></tr></table></figure><p><img src="/../uploads/codeql_2.png"></p>]]></content>
      
      
      <categories>
          
          <category> SAST </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SAST </tag>
            
            <tag> CodeQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Minicondaå®‰è£…</title>
      <link href="/2025/12/07/Miniconda%E5%AE%89%E8%A3%85/"/>
      <url>/2025/12/07/Miniconda%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>Miniconda æ˜¯ Conda çš„ç²¾ç®€å‘è¡Œç‰ˆï¼ŒåªåŒ…å«æœ€æ ¸å¿ƒçš„åŒ…ç®¡ç†ç³»ç»Ÿä¸ Pythonï¼Œå¯ä»¥å¿«é€Ÿæ­å»ºç‹¬ç«‹çš„ Python ç¯å¢ƒã€‚åœ¨è¿›è¡Œæ•°æ®åˆ†æã€æœºå™¨å­¦ä¹ æˆ–ç§‘ç ”å¼€å‘æ—¶ï¼Œç›¸æ¯”äº Anaconda æ›´è½»é‡ã€æ›´çµæ´»ã€‚</p><h2 id="ä¸€ã€Miniconda-å®‰è£…"><a href="#ä¸€ã€Miniconda-å®‰è£…" class="headerlink" title="ä¸€ã€Miniconda å®‰è£…"></a>ä¸€ã€Miniconda å®‰è£…</h2><p>Windows å‘½ä»¤è¡Œå®‰è£…æ–¹å¼ï¼Œå¯ä»¥å¿«é€Ÿä¸”å®‰é™åœ°ä¸‹è½½æœ€æ–°çš„ 64 ä½ Windows å®‰è£…ç¨‹åºï¼Œå°†å…¶é‡å‘½åä¸ºè¾ƒçŸ­çš„æ–‡ä»¶åï¼Œæ‰§è¡Œé™é»˜å®‰è£…ï¼Œç„¶ååˆ é™¤å®‰è£…ç¨‹åºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl https://repo.anaconda.com/miniconda/Miniconda3-latest-Windows-x86_64.exe -o .\miniconda.exe</span><br><span class="line">start /wait &quot;&quot; .\miniconda.exe /S</span><br><span class="line">del .\miniconda.exe</span><br></pre></td></tr></table></figure><span id="more"></span><p>Windows Powershellï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Invoke-WebRequest</span> <span class="literal">-Uri</span> <span class="string">&quot;https://repo.anaconda.com/miniconda/Miniconda3-latest-Windows-x86_64.exe&quot;</span> <span class="literal">-outfile</span> <span class="string">&quot;.\miniconda.exe&quot;</span></span><br><span class="line"><span class="built_in">Start-Process</span> <span class="literal">-FilePath</span> <span class="string">&quot;.\miniconda.exe&quot;</span> <span class="literal">-ArgumentList</span> <span class="string">&quot;/S&quot;</span> <span class="literal">-Wait</span></span><br><span class="line"><span class="built_in">del</span> .\miniconda.exe</span><br></pre></td></tr></table></figure><p>Linux 64ä½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/miniconda3</span><br><span class="line">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh</span><br><span class="line">bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3</span><br><span class="line"><span class="built_in">rm</span> ~/miniconda3/miniconda.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> ~/miniconda3/bin/activate</span><br><span class="line"></span><br><span class="line">conda init --all</span><br></pre></td></tr></table></figure><h2 id="äºŒã€å¿«é€Ÿä½¿ç”¨"><a href="#äºŒã€å¿«é€Ÿä½¿ç”¨" class="headerlink" title="äºŒã€å¿«é€Ÿä½¿ç”¨"></a>äºŒã€å¿«é€Ÿä½¿ç”¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">conda create -n environment python=3.12</span><br><span class="line"></span><br><span class="line">conda activate environment</span><br><span class="line"></span><br><span class="line">conda deactivate environment</span><br></pre></td></tr></table></figure><p>å‚è€ƒæ–‡çŒ®ï¼š<a href="https://www.anaconda.com/docs/getting-started/miniconda/install#windows-command-prompt">https://www.anaconda.com/docs/getting-started/miniconda/install#windows-command-prompt</a></p>]]></content>
      
      
      <categories>
          
          <category> Config </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Config </tag>
            
            <tag> Miniconda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Win11 Javaç¯å¢ƒå˜é‡é…ç½®</title>
      <link href="/2025/12/04/Win11-Java%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE/"/>
      <url>/2025/12/04/Win11-Java%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>æ‰¾åˆ°JDKçš„è·¯å¾„ï¼Œåœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æ–°å»ºå˜é‡åå’Œå˜é‡å€¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME</span><br><span class="line">C:\Program Files\Java\jdk1.8.0_202</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ç³»ç»Ÿå˜é‡pathä¸­ï¼Œæ–°å»ºä¸¤æ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">%JAVA_HOME%\bin</span><br><span class="line">%JAVA_HOME%\jre\bin</span><br></pre></td></tr></table></figure><span id="more"></span><p>éªŒè¯é…ç½®æ˜¯å¦æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\77319&gt;java -version</span><br><span class="line">java version <span class="string">&quot;1.8.0_202&quot;</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_202-b08)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.202-b08, mixed mode)</span><br><span class="line"></span><br><span class="line">C:\Users\77319&gt;javac -version</span><br><span class="line">javac 1.8.0_202</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Config </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Config </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HEXOä½¿ç”¨è®°å½•</title>
      <link href="/2025/12/04/HEXO%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2025/12/04/HEXO%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo-ä½¿ç”¨è®°å½•"><a href="#Hexo-ä½¿ç”¨è®°å½•" class="headerlink" title="Hexo ä½¿ç”¨è®°å½•"></a>Hexo ä½¿ç”¨è®°å½•</h1><p>å‚è€ƒæ–‡çŒ®ï¼š <a href="https://theme-next.js.org/docs/getting-started/">https://theme-next.js.org/docs/getting-started/</a></p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://hexo.io/zh-cn/">https://hexo.io/zh-cn/</a></p><h2 id="HEXO-ç®€ä»‹"><a href="#HEXO-ç®€ä»‹" class="headerlink" title="HEXO ç®€ä»‹"></a>HEXO ç®€ä»‹</h2><p>Hexo æ˜¯ä¸€ä¸ªåŸºäº Node.js çš„å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„é™æ€åšå®¢æ¡†æ¶ã€‚å®ƒæ‹¥æœ‰è¶…å¿«çš„æ¸²æŸ“é€Ÿåº¦ã€çµæ´»çš„é…ç½®æ–¹å¼ï¼Œä»¥åŠä¸°å¯Œçš„ä¸»é¢˜ä¸æ’ä»¶ç”Ÿæ€ã€‚å€ŸåŠ© Markdown å†™ä½œï¼Œå¯ä»¥è½»æ¾ç”Ÿæˆä¼˜é›…çš„é™æ€ç½‘é¡µï¼Œå¹¶éƒ¨ç½²åˆ° GitHub Pagesã€Vercelã€Netlify ç­‰ä»»æ„é™æ€æ‰˜ç®¡å¹³å°ã€‚æ— è®ºæ˜¯æƒ³å»ºç«‹ä¸ªäººåšå®¢ã€æ–‡æ¡£ç«™ç‚¹ï¼Œè¿˜æ˜¯æ‰“é€ ç‹¬ç‰¹çš„æŠ€æœ¯åˆ†äº«ç©ºé—´ï¼ŒHexo éƒ½èƒ½æä¾›æµç•…è€Œé«˜æ•ˆçš„åˆ›ä½œä½“éªŒã€‚</p><span id="more"></span><h2 id="ä¸€ã€Hexo-å®‰è£…"><a href="#ä¸€ã€Hexo-å®‰è£…" class="headerlink" title="ä¸€ã€Hexo å®‰è£…"></a>ä¸€ã€Hexo å®‰è£…</h2><p>Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€å•ä¸”åŠŸèƒ½å¼ºå¤§çš„åšå®¢æ¡†æ¶ï¼Œå¯ä»¥ä½¿ç”¨ Markdown ï¼ˆæˆ–å…¶ä»–æ ‡è®°è¯­è¨€ï¼‰ç¼–å†™æ–‡ç« ï¼ŒHexo ä¼šåœ¨å‡ ç§’é’Ÿå†…ç”Ÿæˆå¸¦æœ‰å¯¹åº”ä¸»é¢˜çš„é™æ€æ–‡ä»¶ã€‚</p><p>å®‰è£… Hexo éœ€è¦ Node.js ä»¥åŠ Git ç¯å¢ƒã€‚</p><p>Node.js ä¸‹è½½åœ°å€ <a href="https://nodejs.org/en/download">Node.js Download</a></p><p>Git ä¸‹è½½åœ°å€ <a href="https://git-scm.com/install/windows">Git Download</a></p><p>æ‰€æœ‰å¿…éœ€ç»„ä»¶å®‰è£…å®Œæ¯•åï¼Œå³å¯ä½¿ç”¨ npm å®‰è£… Hexoï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ– Hexo ç«™ç‚¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init hexo-site</span><br></pre></td></tr></table></figure><p>hexo-site ä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºå…¶ä»–è·¯å¾„åï¼Œä»¥ hexo-site ä¸ºä¾‹ï¼Œç½‘ç«™æ ¹ç›®å½•è¢«ç§°ä¸º <code>hexo-site</code>ã€‚ </p><p>åˆå§‹åŒ–å®Œæˆåï¼Œå¯ä»¥åˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹ï¼Œä¸‹è½½å¯¹åº”ä¸»é¢˜å¹¶è¿›è¡Œå‡çº§ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> hexo-site</span><br><span class="line"></span><br><span class="line">npm install hexo-theme-next</span><br><span class="line"></span><br><span class="line">npm install hexo-theme-next@latest</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹ï¼š</p><p>è¿è¡Œ npm install æ—¶ï¼Œå¯¹ node_modules ç›®å½•ä¸‹ä¸»é¢˜æ‰€åšçš„ä»»ä½•æœ¬åœ°æ›´æ”¹éƒ½å°†ä¸¢å¤±ã€‚å¦‚æœå¯¹ä¸»é¢˜è¿›è¡Œäº†æ›´æ”¹ï¼Œåˆ™åº”åœ¨è¿è¡Œ npm install ä¹‹å‰å¤‡ä»½è¿™äº›æ›´æ”¹ï¼Œç„¶ååœ¨å®‰è£…å®Œæˆåæ¢å¤è¿™äº›æ›´æ”¹ã€‚</p><p>å®‰è£…å®Œ Hexo å’Œ NexT ä¸»é¢˜åï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥è‡ªå®šä¹‰åšå®¢ã€‚å®‰è£… Hexo æ—¶ï¼Œé…å¥—çš„é…ç½®æ–‡ä»¶ä½äºç½‘ç«™æ ¹ç›®å½•ã€‚åšå®¢é…ç½®æ–‡ä»¶åä¸º _config.yml ï¼›æˆ‘ä»¬ç§°ä¹‹ä¸º Hexo é…ç½®æ–‡ä»¶ NexT ä¸»é¢˜çš„é…ç½®æ–‡ä»¶éœ€è¦æ‚¨è‡ªè¡Œåˆ›å»ºï¼›è¯·åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª _config.next.yml æ–‡ä»¶ã€‚ ç½‘ç«™æ ¹ç›®å½•æˆ‘ä»¬å°†å…¶ç§°ä¸º Next é…ç½®æ–‡ä»¶åœ¨ä»¥ä¸‹æ–‡æœ¬ä¸­ã€‚</p><p>åˆ›å»ºç©ºçš„ _config.next.yml æ–‡ä»¶åï¼Œå¯ä»¥å°†ä¸»é¢˜æ–‡ä»¶å¤¹ä¸­çš„é»˜è®¤é…ç½®é€‰é¡¹å¤åˆ¶åˆ°è¯¥æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿è¿›è¡Œä¿®æ”¹å’Œè‡ªå®šä¹‰ã€‚æ ¹æ®å®‰è£…æ–¹å¼ï¼ŒNexT ä¸»é¢˜çš„é»˜è®¤é…ç½®æ–‡ä»¶å¯èƒ½ä½äº themes&#x2F;next&#x2F;_config.yml æˆ– node_modules&#x2F;hexo-theme-next&#x2F;_config.yml ä¸­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> node_modules/hexo-theme-next/_config.yml _config.next.yml</span><br></pre></td></tr></table></figure><h2 id="äºŒã€Hexo-ä¸ªæ€§åŒ–è®¾ç½®"><a href="#äºŒã€Hexo-ä¸ªæ€§åŒ–è®¾ç½®" class="headerlink" title="äºŒã€Hexo ä¸ªæ€§åŒ–è®¾ç½®"></a>äºŒã€Hexo ä¸ªæ€§åŒ–è®¾ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Allow to cache content generation.</span></span><br><span class="line">cache:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Remove unnecessary files after hexo generate.</span></span><br><span class="line">minify: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Schemes</span></span><br><span class="line"><span class="comment"># scheme: Muse</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="comment">#scheme: Pisces</span></span><br><span class="line">scheme: Gemini</span><br><span class="line"></span><br><span class="line"><span class="comment"># Dark Mode</span></span><br><span class="line">darkmode: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: git@github.com:zyufoye/zyufoye.github.io.git</span><br><span class="line">  branch: main</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€Hexo-æ–°å»ºå‘å¸ƒæ–‡ç« "><a href="#ä¸‰ã€Hexo-æ–°å»ºå‘å¸ƒæ–‡ç« " class="headerlink" title="ä¸‰ã€Hexo æ–°å»ºå‘å¸ƒæ–‡ç« "></a>ä¸‰ã€Hexo æ–°å»ºå‘å¸ƒæ–‡ç« </h2><p>æ–°å»ºå‘å¸ƒæ–‡ç« ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new post <span class="string">&quot;æ–‡ç« åç§°&quot;</span></span><br></pre></td></tr></table></figure><p>ç”Ÿæˆå¹¶éƒ¨ç½²ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp;  hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure><p>åŒæ­¥æ›´æ–°éƒ¨ç½²åˆ°githubï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>åšå®¢ä¾§è¾¹æ æ·»åŠ  menu èœå•ï¼Œä»¥ tags å’Œ categories ä¸ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags</span><br><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure><p>åŒæ—¶åœ¨index.md ä¸­è®¾ç½®ç±»åˆ«ï¼Œä¸ç„¶ç‚¹å‡»è·³è½¬åä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span>: categories</span><br></pre></td></tr></table></figure><p>è®¾ç½®æ–‡ç« æƒ³è¦æ˜¾ç¤ºçš„å†…å®¹æ—¶ï¼Œå¯ä»¥ç”¨ more è¿›è¡Œåˆ‡åˆ†ï¼Œ moreä»¥ä¸Šçš„ä½œä¸ºæ˜¾ç¤ºå†…å®¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- more --&gt;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸ŠåŸºæœ¬é…ç½®å’Œç®€å•ä½¿ç”¨è®°å½•å®Œæ¯•ï¼Œåç»­æœ‰æ›´å¤šéœ€è¦å†æŒç»­æ›´æ–°è®°å½•ã€‚  </p>]]></content>
      
      
      <categories>
          
          <category> Config </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Config </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³VScodeå’ŒTraeç­‰æ— æ³•åŠ è½½condaè™šæ‹Ÿç¯å¢ƒçš„é—®é¢˜</title>
      <link href="/2025/12/02/%E8%A7%A3%E5%86%B3VScode%E5%92%8CTrae%E7%AD%89%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BDconda%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2025/12/02/%E8%A7%A3%E5%86%B3VScode%E5%92%8CTrae%E7%AD%89%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BDconda%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€é—®é¢˜æè¿°"><a href="#ä¸€ã€é—®é¢˜æè¿°" class="headerlink" title="ä¸€ã€é—®é¢˜æè¿°"></a>ä¸€ã€é—®é¢˜æè¿°</h1><p>ä½¿ç”¨ conda æˆ– miniconda é…ç½®è™šæ‹Ÿç¯å¢ƒæ—¶ï¼Œå½“å¯åŠ¨è™šæ‹Ÿç¯å¢ƒæ—¶ï¼Œé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CondaError: Run <span class="string">&#x27;conda init&#x27;</span> before <span class="string">&#x27;conda activate&#x27;</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œè¿è¡Œ <code>conda init</code> åè¿˜æ˜¯ä¸èµ·ä½œç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Î» conda init</span><br><span class="line">no change     C:\Users\Username\miniconda3\Scripts\conda.exe</span><br><span class="line">no change     C:\Users\Username\miniconda3\Scripts\conda-env.exe</span><br><span class="line">......</span><br><span class="line">no change     C:\Users\Username\Documents\WindowsPowerShell\profile.ps1</span><br><span class="line">modified      HKEY_CURRENT_USER\Software\Microsoft\Command Processor\AutoRun</span><br></pre></td></tr></table></figure><h1 id="äºŒã€è§£å†³æ–¹æ¡ˆ"><a href="#äºŒã€è§£å†³æ–¹æ¡ˆ" class="headerlink" title="äºŒã€è§£å†³æ–¹æ¡ˆ"></a>äºŒã€è§£å†³æ–¹æ¡ˆ</h1><p>æˆ‘æ˜¯ win11 æ“ä½œç³»ç»Ÿï¼Œéœ€è¦ä»¥ <strong>ç®¡ç†å‘˜èº«ä»½</strong> æ‰“å¼€powershellçª—å£ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-ExecutionPolicy RemoteSigned</span><br></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½å³å¯ç”Ÿæ•ˆã€‚</p><span id="more"></span><h1 id="ä¸‰ã€åŸç†"><a href="#ä¸‰ã€åŸç†" class="headerlink" title="ä¸‰ã€åŸç†"></a>ä¸‰ã€åŸç†</h1><p>ç®€å•è¯´ï¼Œè¿™ä¸ªé—®é¢˜æœ¬è´¨ä¸Šæ˜¯ï¼š<strong>Conda çš„åˆå§‹åŒ–è„šæœ¬è¢« PowerShell çš„å®‰å…¨ç­–ç•¥æ‹¦ä½äº†ï¼Œæ‰€ä»¥æ¯æ¬¡æ–°å¼€ç»ˆç«¯æ—¶ï¼ŒConda éƒ½æ²¡çœŸæ­£â€œæ¥ç®¡â€å½“å‰ Shellã€‚</strong></p><h2 id="1-conda-init-å®é™…åœ¨åšä»€ä¹ˆï¼Ÿ"><a href="#1-conda-init-å®é™…åœ¨åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. conda init å®é™…åœ¨åšä»€ä¹ˆï¼Ÿ"></a>1. <code>conda init</code> å®é™…åœ¨åšä»€ä¹ˆï¼Ÿ</h2><p>åœ¨ Windows + PowerShell ä¸‹ï¼ŒConda å¹¶ä¸æ˜¯ç®€å•åœ°é  <code>conda.exe</code> æ¥å®Œæˆç¯å¢ƒæ¿€æ´»çš„ï¼Œè€Œæ˜¯é€šè¿‡ä¸€å¥— <strong>Shell Hook è„šæœ¬</strong> æ¥æ¥ç®¡å½“å‰ä¼šè¯ï¼š</p><p><code>conda init</code> ä¼šåœ¨ <code>C:\Users\Username\Documents\WindowsPowerShell\profile.ps1</code> é‡Œå†™å…¥ä¸€æ®µåˆå§‹åŒ–ä»£ç ï¼Œè¿™äº›è„šæœ¬ä¼šå»è°ƒç”¨ <code>miniconda3\shell\condabin\conda-hook.ps1</code> ç­‰æ–‡ä»¶ï¼Œå¾€å½“å‰ PowerShell é‡Œæ³¨å…¥ <code>conda</code> &#x2F; <code>conda activate</code> ç­‰å‡½æ•°ï¼Œå¹¶è®¾ç½®å¥½ PATHã€ç¯å¢ƒå˜é‡ç­‰ã€‚</p><p><strong>åªæœ‰è¿™äº› Hook æ¯æ¬¡æ‰“å¼€ PowerShell æ—¶èƒ½é¡ºåˆ©æ‰§è¡Œï¼Œå½“å‰ç»ˆç«¯æ‰çœŸæ­£â€œæ”¯æŒâ€ <code>conda activate</code>ã€‚</strong></p><p>æ‰€ä»¥å½“ä½ çœ‹åˆ°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CondaError: Run <span class="string">&#x27;conda init&#x27;</span> before <span class="string">&#x27;conda activate&#x27;</span></span><br></pre></td></tr></table></figure><p>å…¶å®æ„æ€æ˜¯ï¼š<strong>å½“å‰è¿™ä¸ª PowerShell ä¼šè¯é‡Œæ²¡æœ‰è¢«æ³¨å…¥ Conda çš„ Hook è„šæœ¬</strong>ï¼Œæ‰€ä»¥å®ƒæ„Ÿè§‰è‡ªå·±è¿˜æ²¡ initã€‚</p><h2 id="2-PowerShell-æ‰§è¡Œç­–ç•¥çš„é™åˆ¶"><a href="#2-PowerShell-æ‰§è¡Œç­–ç•¥çš„é™åˆ¶" class="headerlink" title="2. PowerShell æ‰§è¡Œç­–ç•¥çš„é™åˆ¶"></a>2. PowerShell æ‰§è¡Œç­–ç•¥çš„é™åˆ¶</h2><p>PowerShell ä¸ºäº†å®‰å…¨ï¼Œæœ‰ä¸€ä¸ª <strong>æ‰§è¡Œç­–ç•¥ï¼ˆExecution Policyï¼‰</strong>ï¼Œå†³å®šå“ªäº›è„šæœ¬å¯ä»¥è¢«æ‰§è¡Œï¼š</p><p>å¸¸è§å‡ ç§ï¼š</p><ul><li><code>Restricted</code>ï¼šå®Œå…¨ç¦æ­¢æ‰§è¡Œè„šæœ¬ï¼›</li><li><code>AllSigned</code>ï¼šæ‰€æœ‰è„šæœ¬éƒ½å¿…é¡»æ˜¯ç­¾åçš„ï¼›</li><li><code>RemoteSigned</code>ï¼šæœ¬åœ°è„šæœ¬å¯ä»¥æ‰§è¡Œï¼Œä»äº’è”ç½‘ä¸‹è½½çš„è„šæœ¬å¿…é¡»ç­¾åã€‚</li></ul><p>åœ¨æˆ‘æœºå™¨ä¸Šçš„æƒ…å†µæ˜¯ï¼š</p><ul><li><p>Conda çš„è¿™äº› hook &#x2F; profile è„šæœ¬å±äº <strong>æœ¬åœ°è„šæœ¬</strong>ï¼›</p></li><li><p>ä½†é»˜è®¤é…ç½®ç­–ç•¥è¿‡äºä¸¥æ ¼ï¼Œå¯¼è‡´ï¼š</p><ul><li>æ‰“å¼€ PowerShell æ—¶ï¼Œ<code>profile.ps1</code> &#x2F; <code>conda-hook.ps1</code> æ²¡æœ‰è¢«æ‰§è¡Œï¼›</li><li>äºæ˜¯ <code>conda</code> å‡½æ•°ã€è‡ªåŠ¨æ¿€æ´»é€»è¾‘ç»Ÿç»Ÿéƒ½æ²¡åŠ è½½è¿›å½“å‰ä¼šè¯ï¼›</li><li>ç»ˆç«¯è‡ªç„¶å°±ä¼šæç¤ºä½ å…ˆ <code>conda init</code>ã€‚</li></ul></li></ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼š<code>conda init</code> å†™å…¥çš„é…ç½®å·²ç»åœ¨é‚£å„¿äº†ï¼Œä½†æ¯æ¬¡å¯åŠ¨ PowerShell æ—¶éƒ½è¢«ç­–ç•¥æŒ¡åœ¨é—¨å¤–ã€‚ å½“ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-ExecutionPolicy RemoteSigned</span><br></pre></td></tr></table></figure><p>ç­‰äºå…è®¸ç³»ç»Ÿæ‰§è¡Œæœ¬åœ°è„šæœ¬ï¼Œåªå¯¹æ¥æºä¸æ˜çš„è¿œç¨‹è„šæœ¬åšé™åˆ¶ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œå†æ¬¡æ‰“å¼€ PowerShell &#x2F; VSCode å†…ç½®ç»ˆç«¯æ—¶ï¼Œ<code>profile.ps1</code> ä¼šè¢«æ­£å¸¸åŠ è½½ï¼Œé‡Œé¢è°ƒç”¨çš„ <code>conda-hook.ps1</code> ç­‰æœ¬åœ°è„šæœ¬å¯ä»¥é¡ºåˆ©æ‰§è¡Œï¼Œ VSCode &#x2F; Trae é‡Œå°±å¯ä»¥æ­£å¸¸åŠ è½½å’Œæ¿€æ´» Conda è™šæ‹Ÿç¯å¢ƒï¼Œä¸å†æŠ¥ Run â€˜conda initâ€™ before â€˜conda activateâ€™é”™è¯¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Trouble shooting </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Config </tag>
            
            <tag> Trouble shooting </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
