<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>HEXOé“¾æ¥ç«™å†…æ–‡ç« æ–¹æ³•</title>
    <url>/2025/12/11/HEXO%E9%93%BE%E6%8E%A5%E7%AB%99%E5%86%85%E6%96%87%E7%AB%A0%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>Hexoé“¾æ¥ç«™å†…æ–‡ç« æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% post_link markdown-learning-by-maxiang ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹è¿™ç¯‡æ–‡ç«  %&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ <code>markdown-learning-by-maxiang</code> ä¸ºæ–‡ç« åç§°ï¼Œæˆ‘æµ‹è¯•äº†åŒç›®å½•ä¸‹ä¿®æ”¹ä¸ºè‡ªå·±æ–‡ç« åç§°å¯ä»¥æˆåŠŸï¼Œæ³¨æ„ä¸è¦åŠ è·¯å¾„ï¼Œå¦‚æœæ–‡ç« åç§°æœ‰ç©ºæ ¼å°±ç”¨åŒå¼•å·å¼•èµ·æ¥ã€‚<code>ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹è¿™ç¯‡æ–‡ç« </code> éƒ¨åˆ†æ˜¯ç°å®çš„å†…å®¹ï¼Œå¦‚æœä¸å†™çš„è¯å°±é»˜è®¤æ˜¯æ–‡ç« åç§°ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://github.com/iissnan/hexo-theme-next/issues/978">https://github.com/iissnan/hexo-theme-next/issues/978</a></p>
]]></content>
      <categories>
        <category>Config</category>
      </categories>
      <tags>
        <tag>Config</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Function Callå’ŒMCPçš„åŒºåˆ«</title>
    <url>/2025/12/11/Function-Call%E5%92%8CMCP%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<h2 id="Function-Callå’ŒMCPçš„æ ¸å¿ƒåŒºåˆ«æ¢³ç†ï¼ˆç”±GPT-5-1-ç”Ÿæˆï¼‰"><a href="#Function-Callå’ŒMCPçš„æ ¸å¿ƒåŒºåˆ«æ¢³ç†ï¼ˆç”±GPT-5-1-ç”Ÿæˆï¼‰" class="headerlink" title="Function Callå’ŒMCPçš„æ ¸å¿ƒåŒºåˆ«æ¢³ç†ï¼ˆç”±GPT 5.1 ç”Ÿæˆï¼‰"></a>Function Callå’ŒMCPçš„æ ¸å¿ƒåŒºåˆ«æ¢³ç†ï¼ˆç”±GPT 5.1 ç”Ÿæˆï¼‰</h2><h2 id="ğŸ§©æ ¸å¿ƒåŒºåˆ«æ€»ç»“"><a href="#ğŸ§©æ ¸å¿ƒåŒºåˆ«æ€»ç»“" class="headerlink" title="ğŸ§©æ ¸å¿ƒåŒºåˆ«æ€»ç»“"></a>ğŸ§©æ ¸å¿ƒåŒºåˆ«æ€»ç»“</h2><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>Function Call</th>
<th>MCPï¼ˆModel Context Protocolï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å®šä½</strong></td>
<td>è®©æ¨¡å‹æŒ‰ç…§å¼€å‘è€…å®šä¹‰çš„ç»“æ„åŒ–æ–¹å¼è¿”å›â€œè°ƒç”¨æŸå‡½æ•°æ‰€éœ€çš„å‚æ•°â€ã€‚</td>
<td>è®©æ¨¡å‹ä¸å¤–éƒ¨å·¥å…·ã€æœåŠ¡ã€æ•°æ®æºé€šè¿‡ç»Ÿä¸€åè®®è¿›è¡ŒåŒå‘é€šä¿¡ã€‚</td>
</tr>
<tr>
<td><strong>è§’è‰²</strong></td>
<td>æ¨¡å‹åªâ€œäº§ç”Ÿå‘½ä»¤â€ï¼ˆå‡½æ•°+å‚æ•°ï¼‰ï¼Œä¸æ‰§è¡Œã€‚æ‰§è¡Œç”±å¤–éƒ¨åº”ç”¨å®Œæˆã€‚</td>
<td>é™¤ç”Ÿæˆè°ƒç”¨å¤–ï¼Œè¿˜å¯ä»¥<strong>å‘ç°ã€æ³¨å†Œã€è°ƒåº¦ã€æ‰§è¡Œ</strong>å¤–éƒ¨èµ„æºã€‚</td>
</tr>
<tr>
<td><strong>å¤æ‚åº¦</strong></td>
<td>ç®€å•ã€è½»é‡çº§ã€å¤šæ•°åœºæ™¯å¤Ÿç”¨ã€‚</td>
<td>æ›´åº•å±‚ã€æ›´é€šç”¨ï¼Œå¯è¿æ¥å¤æ‚ç³»ç»Ÿã€‚</td>
</tr>
<tr>
<td><strong>ä½¿ç”¨åœºæ™¯</strong></td>
<td>è°ƒç”¨æŸä¸ªç‰¹å®šå‡½æ•°ã€å¤„ç†ç»“æ„åŒ–ä»»åŠ¡ã€‚</td>
<td>æ¥å…¥å¤šä¸ªå·¥å…·ã€å¤šæ•°æ®æºã€æ’ä»¶ç³»ç»Ÿã€ä¼ä¸šçº§å·¥ä½œæµã€‚</td>
</tr>
</tbody></table>
<hr>
<span id="more"></span>

<h2 id="ğŸ§ Function-Call-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ğŸ§ Function-Call-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ğŸ§ Function Call æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ğŸ§ Function Call æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><strong>Function Call</strong> æ˜¯æ¨¡å‹è¾“å‡ºçš„ä¸€ç§ç»“æ„åŒ–æ ¼å¼ï¼Œæ¨¡å‹è¾“å‡ºå®ƒæƒ³è°ƒç”¨ä»€ä¹ˆå‡½æ•°å¹¶ä¸”è¦ä¼ ä»€ä¹ˆå‚æ•°ã€‚æ¨¡å‹åªè´Ÿè´£<strong>è¾“å‡ºç»“æ„åŒ– JSON</strong>ï¼Œå®é™…æ‰§è¡Œç”±ç›¸å…³ç¨‹åºå®Œæˆã€‚</p>
<p><strong>Function Call</strong>æä¾›çš„æ˜¯ API å±‚çš„èƒ½åŠ›ï¼Œç”±å¼€å‘è€…å®šä¹‰å¯è°ƒç”¨å‡½æ•°åˆ—è¡¨ï¼Œæ¨¡å‹äº§å‡ºï¼šå‡½æ•°å + å‚æ•°ï¼Œé€‚ç”¨äºç®€å•é€»è¾‘ã€‚</p>
<h3 id="âœ”-Function-Call-ç¤ºä¾‹"><a href="#âœ”-Function-Call-ç¤ºä¾‹" class="headerlink" title="âœ” Function Call ç¤ºä¾‹"></a>âœ” Function Call ç¤ºä¾‹</h3><p>å‡è®¾å¼€å‘è€…å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;get_weather&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è·å–åŸå¸‚å¤©æ°”&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;parameters&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;object&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;required&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;city&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>ç”¨æˆ·é—®ï¼š</p>
<blockquote>
<p>â€œæ˜å¤©åŒ—äº¬å¤©æ°”å¦‚ä½•ï¼Ÿâ€</p>
</blockquote>
<p>æ¨¡å‹å¯èƒ½è¿”å›ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;get_weather&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;arguments&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;åŒ—äº¬&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶å <strong>ç›¸å…³ç¨‹åº</strong> æ‰§è¡Œ get_weather(â€œåŒ—äº¬â€) å¹¶æŠŠç»“æœå†è¿”å›ç»™æ¨¡å‹æˆ–ç”¨æˆ·ã€‚</p>
<p>ğŸ“Œ <strong>å…³é”®ç‚¹ï¼šæ¨¡å‹ä¸ä¼šæ‰§è¡Œï¼Œåªä¼šè¿”å›ç»“æ„ä½“ã€‚</strong></p>
<h2 id="ğŸ§ MCPï¼ˆModel-Context-Protocolï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ğŸ§ MCPï¼ˆModel-Context-Protocolï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ğŸ§ MCPï¼ˆModel Context Protocolï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ğŸ§ MCPï¼ˆModel Context Protocolï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>MCP æ˜¯ä¸€ä¸ª<strong>é€šç”¨åè®®</strong>ï¼Œç”¨äºç®¡ç†å·¥å…·ï¼ˆtoolsï¼‰ï¼Œè¿æ¥å¤–éƒ¨æ•°æ®æºï¼ˆdatabaseã€æ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰ï¼Œè®©æ¨¡å‹èƒ½å¤Ÿå‘ç°å¹¶è°ƒç”¨è¿™äº›èµ„æºï¼ŒåŒæ—¶ç»Ÿä¸€ä¸åŒå·¥å…·çš„æ¥å£æ ¼å¼ã€‚</p>
<p>å¯ä»¥æŠŠ MCP ç†è§£ä¸ºï¼š</p>
<blockquote>
<p><strong>æ¨¡å‹ä¸å¤–éƒ¨ä¸–ç•Œçš„â€œæ“ä½œç³»ç»ŸæŠ½è±¡å±‚â€</strong><br>å®ƒè®©æ¨¡å‹èƒ½ç›´æ¥è®¿é—®æ–‡ä»¶ã€æ•°æ®åº“ã€ç½‘ç»œç­‰å·¥å…·ã€‚</p>
</blockquote>
<p>å®ƒçš„â€œèƒ½åŠ›â€æ¯” Function Call å¼ºå¾—å¤šï¼Œå› ä¸ºï¼š</p>
<p>ğŸ‘‰ <strong>Function Call åªèƒ½è°ƒç”¨å¼€å‘äººå‘˜æ‰‹å·¥å†™æ­»çš„å‡½æ•°</strong><br>ğŸ‘‰ <strong>MCP å¯ä»¥åŠ¨æ€åŠ è½½å·¥å…·åŒ…ã€æ–‡ä»¶ç³»ç»ŸæœåŠ¡ã€ç¯å¢ƒæœåŠ¡ï¼Œè®©æ¨¡å‹åƒæ“ä½œç³»ç»Ÿç”¨æˆ·ä¸€æ ·è®¿é—®èµ„æº</strong></p>
<hr>
<h3 id="âœ”-MCP-ç¤ºä¾‹"><a href="#âœ”-MCP-ç¤ºä¾‹" class="headerlink" title="âœ” MCP ç¤ºä¾‹"></a>âœ” MCP ç¤ºä¾‹</h3><p>å‡è®¾ MCP æä¾›ä¸€ä¸ªå·¥å…· <code>fs.read_file</code>ã€‚</p>
<p>ç”¨æˆ·é—®ï¼š</p>
<blockquote>
<p>â€œæ‰“å¼€ &#x2F;docs&#x2F;intro.md è¯»ç»™æˆ‘å¬â€</p>
</blockquote>
<p>æ¨¡å‹å®é™…ä¼šäº§ç”Ÿè¿™æ ·çš„æ¶ˆæ¯ï¼ˆé Function Call é£æ ¼ï¼Œè€Œæ˜¯ MCP æ¶ˆæ¯åè®®ï¼‰ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;call_tool&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tool&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fs.read_file&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;arguments&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/docs/intro.md&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>æœåŠ¡ç«¯ä¼šæ‰§è¡Œ <strong>read_file</strong> å¹¶è¿”å›æ–‡ä»¶å†…å®¹ã€‚</p>
<p>æ¨¡å‹å¯ä»¥ç»§ç»­è¯·æ±‚ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;call_tool&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tool&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fs.write_file&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;arguments&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/docs/notes.txt&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è¿™é‡Œæ˜¯æˆ‘æ€»ç»“çš„å†…å®¹...&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä½“ç° MCP çš„æœ¬è´¨ï¼š</p>
<ul>
<li>æ¨¡å‹çŸ¥é“æœ‰å“ªäº›å·¥å…·å¯ç”¨</li>
<li>æ¨¡å‹ç›´æ¥â€œæ“æ§â€è¿™äº›å·¥å…·</li>
<li>å…·æœ‰ç±»ä¼¼â€œæ–‡ä»¶è¯»å†™â€ç­‰å¤æ‚èƒ½åŠ›</li>
<li>ä¸éœ€è¦å¼€å‘è€…æå‰ç¡¬ç¼–ç æ‰€æœ‰å‡½æ•°</li>
</ul>
<h2 id="â­å°ç»“"><a href="#â­å°ç»“" class="headerlink" title="â­å°ç»“"></a>â­å°ç»“</h2><table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>Function Call</th>
<th>MCP</th>
</tr>
</thead>
<tbody><tr>
<td>å·¥å…·å‘ç°</td>
<td>æ‰‹å·¥å®šä¹‰</td>
<td>è‡ªåŠ¨æ³¨å†Œï¼Œæ¨¡å‹å¯è‡ªåŠ¨å­¦ä¹ å·¥å…·èƒ½åŠ›</td>
</tr>
<tr>
<td>è°ƒç”¨æ–¹å¼</td>
<td>ç»“æ„åŒ– JSON</td>
<td>åŒå‘åè®®ã€æ¶ˆæ¯é€šä¿¡</td>
</tr>
<tr>
<td>æ‰©å±•æ€§</td>
<td>æ¯åŠ ä¸€ä¸ªåŠŸèƒ½éƒ½è¦æ–°å¢å‡½æ•°å®šä¹‰</td>
<td>æ–°å¢ MCP æœåŠ¡å³å¯æ‰©å±•å·¥å…·èƒ½åŠ›</td>
</tr>
<tr>
<td>æ¨¡å‹èƒ½åŠ›</td>
<td>è¢«åŠ¨</td>
<td>ä¸»åŠ¨ã€å¯è§„åˆ’è°ƒç”¨æµç¨‹</td>
</tr>
<tr>
<td>åœºæ™¯</td>
<td>ç®€å• API è°ƒç”¨ã€æ•°æ®ç»“æ„åŒ–</td>
<td>IDEã€æ•°æ®åº“é›†æˆã€æ–‡ä»¶ç³»ç»Ÿã€GitHub æ“ä½œã€ä¼ä¸šè‡ªåŠ¨åŒ–</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>MCP</category>
      </categories>
      <tags>
        <tag>MCP</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaæ¼æ´é¶åœºæ­å»ºå­¦ä¹ (ä¸€)ï¼šç¯å¢ƒæ­å»ºä¸Springbootæ¶æ„</title>
    <url>/2025/12/09/Java%E6%BC%8F%E6%B4%9E%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA%E5%AD%A6%E4%B9%A0-%E4%B8%80-%EF%BC%9A%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%B8%8ESpringboot%E6%9E%B6%E6%9E%84/</url>
    <content><![CDATA[<h1 id="Javaæ¼æ´é¶åœºæ­å»ºå­¦ä¹ "><a href="#Javaæ¼æ´é¶åœºæ­å»ºå­¦ä¹ " class="headerlink" title="Javaæ¼æ´é¶åœºæ­å»ºå­¦ä¹ "></a>Javaæ¼æ´é¶åœºæ­å»ºå­¦ä¹ </h1><p>åœ¨å­¦ä¹  Java Web å®‰å…¨çš„è¿‡ç¨‹ä¸­ï¼Œç›®å‰çŠ¶æ€æ˜¯åªèƒ½ç†è§£ç›¸å…³çš„æ¼æ´åŸç†ï¼Œæ ¹æ® PoC åšé¢˜æˆ–è€…å¤ç°æ¼æ´ï¼Œä½†æ˜¯è¿™äº›å¯¹äº <strong>ä»£ç å®¡è®¡ã€æ¼æ´æŒ–æ˜ã€SDL</strong> ç­‰éƒ½æ²¡æœ‰å®è´¨æ€§å¸®åŠ©ï¼Œæƒ³è¦åœ¨å­¦ä¹ æˆ–å·¥ä½œè¿‡ç¨‹ä¸­æå‡ç›¸å…³èƒ½åŠ›ï¼Œè®¡åˆ’å®ç°ä»¥ä¸‹ç›®æ ‡ï¼š</p>
<ul>
<li>ç†è§£æ¼æ´äº§ç”Ÿçš„çœŸå®ä¸Šä¸‹æ–‡ï¼›</li>
<li>æ­å»ºä¸€ä¸ªå¯æ§ã€å¯æ‰©å±•çš„å®éªŒç¯å¢ƒï¼›</li>
<li>è®­ç»ƒä»ä»£ç å±‚é¢å®šä½ä¸ä¿®å¤é—®é¢˜çš„èƒ½åŠ›ï¼›</li>
</ul>
<p>è¿™ç¯‡åšå®¢è®°å½•äº†å­¦ä¹ æ­å»º Java æ¼æ´é¶åœºçš„è¿‡ç¨‹ï¼Œä½œä¸ºä¸€ä¸ªå­¦ä¹ è®°å½•ï¼Œä¸ºåç»­èƒ½å¤Ÿå¿«é€Ÿæ­å»ºæµ‹è¯•ç¯å¢ƒï¼ŒéªŒè¯ä»£ç å®¡è®¡å·¥å…·èƒ½åŠ›å¥ å®šåŸºç¡€ã€‚</p>
<span id="more"></span>

<h2 id="é¡¹ç›®é€‰ç”¨"><a href="#é¡¹ç›®é€‰ç”¨" class="headerlink" title="é¡¹ç›®é€‰ç”¨"></a>é¡¹ç›®é€‰ç”¨</h2><p>æœ¬æ–‡ä»¥ <a href="https://github.com/l4yn3/micro_service_seclab">micro_service_seclab</a> ä¸ºåŸºç¡€è¿›è¡Œç»ƒä¹ ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/l4yn3/micro_service_seclab.git</span><br></pre></td></tr></table></figure>

<p>æ‹¿åˆ°javaé¡¹ç›®ï¼Œå¯¼å…¥IDEAï¼Œå¯¹äºæœ‰pom.xmlçš„é¡¹ç›®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨mvnè¿›è¡Œæ„å»ºã€‚</p>
<p>åˆ›å»ºæ•°æ®åº“ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--é“¾æ¥æ•°æ®åº“</span></span><br><span class="line">mysql <span class="operator">-</span>u root <span class="operator">-</span>p</span><br><span class="line"></span><br><span class="line"><span class="comment">--åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE micro_service_seclab</span><br><span class="line">  <span class="keyword">CHARACTER SET</span> utf8mb4</span><br><span class="line">  <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci;</span><br><span class="line"></span><br><span class="line"><span class="comment">--ä½¿ç”¨æ•°æ®åº“</span></span><br><span class="line">USE micro_service_seclab;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œsqlæ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> \d D:\Code\micro_service_seclab</span><br><span class="line"></span><br><span class="line"><span class="built_in">dir</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥æ•°æ®åº“</span></span><br><span class="line">mysql -u root -p micro_service_seclab &lt; micro_service_seclab.sql</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ‰¾åˆ° application.properties  æ–‡ä»¶ï¼Œä¿®æ”¹å¯¹åº”çš„æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">spring.datasource.url=jdbc:mysql://127.0.0.1:3306/micro_service_seclab</span></span><br><span class="line"><span class="string">spring.datasource.username=root</span></span><br><span class="line"><span class="string">spring.datasource.password=1234</span></span><br></pre></td></tr></table></figure>

<p>åœ¨pom.xmlçš„è·¯å¾„ä¸‹ï¼Œæ‰§è¡Œmvnå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mvn spring-boot:run</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨åè®¿é—® <a href="http://127.0.0.1:8080/sqlinjection/one?username=yueshen">http://127.0.0.1:8080/sqlinjection/one?username=yueshen</a> å³å¯çœ‹åˆ°è¿”å›ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[&#123;<span class="string">&quot;id&quot;</span>:1,<span class="string">&quot;username&quot;</span>:<span class="string">&quot;yueshen&quot;</span>,<span class="string">&quot;sex&quot;</span>:1,<span class="string">&quot;age&quot;</span>:33&#125;]</span><br></pre></td></tr></table></figure>
<h2 id="é¡¹ç›®è§£æ"><a href="#é¡¹ç›®è§£æ" class="headerlink" title="é¡¹ç›®è§£æ"></a>é¡¹ç›®è§£æ</h2><h3 id="Spring-Boot-ä¸‰å±‚æ¶æ„"><a href="#Spring-Boot-ä¸‰å±‚æ¶æ„" class="headerlink" title="Spring-Boot ä¸‰å±‚æ¶æ„"></a>Spring-Boot ä¸‰å±‚æ¶æ„</h3><p>è¯¥é¡¹ç›®æ ¸å¿ƒæ˜¯ä¸€ä¸ª Spring Boot Web åº”ç”¨ï¼Œé€šè¿‡ä¸åŒçš„ Controller æš´éœ²æ¼æ´æ¼”ç¤ºæ¥å£ï¼›åº•å±‚å†é€šè¿‡ Logic&#x2F;DAO&#x2F;DB&#x2F;MyBatis è®¿é—®æ•°æ®åº“æˆ–è§¦å‘å±é™©ç‚¹ã€‚</p>
<p>è°ƒç”¨é“¾ï¼ˆä¸€æ¬¡è¯·æ±‚çš„å®Œæ•´è·¯å¾„ï¼‰ï¼š</p>
<blockquote>
<p>HTTP è¯·æ±‚ â†’ controllerï¼ˆæ¼æ´å…¥å£ï¼‰ â†’ logicï¼ˆä¸šåŠ¡&#x2F;åœºæ™¯å°è£…ï¼‰ â†’ dao&#x2F;mapperï¼ˆæ•°æ®è®¿é—®&#x2F;å±é™©å®ç°ï¼‰ â†’ db&#x2F;mysql</p>
</blockquote>
<p>ç”¨é€šä¿—çš„è¯æ¥è®°å½•ï¼Œå°±æ˜¯ï¼š</p>
<p>Controller æä¾›é¶åœºå…¥å£ï¼ŒLogic åšä¸šåŠ¡ç»„ç»‡ï¼ŒDAO&#x2F;Mapper è´Ÿè´£æ•°æ®åº“æˆ–å±é™© API è°ƒç”¨ï¼Œdata æ˜¯å®ä½“&#x2F;æ•°æ®æ¨¡å‹ï¼Œdb æ˜¯æ•°æ®åº“åˆå§‹åŒ–&#x2F;è¿æ¥è¾…åŠ©ã€‚</p>
<ul>
<li><code>Controller</code>ï¼šæ¼æ´å…¥å£å±‚ï¼Œå¯¹å¤–æä¾› HTTP APIï¼Œç”¨æˆ·é€šè¿‡ HTTP æ‰“å¼€ï¼Œå®ƒè´Ÿè´£æŠŠè¯·æ±‚å¸¦å…¥å¯¹åº”çš„æ¼æ´åœºæ™¯ï¼›</li>
<li><code>Logic</code>ï¼šä¸šåŠ¡åœºæ™¯å°è£…å±‚ï¼Œå­˜æ”¾ Service çš„ä¸€äº›ä¸œè¥¿ï¼ŒæŠŠ Controller å‚æ•°å˜æˆåº•å±‚å¯æ‰§è¡Œçš„åŠ¨ä½œï¼›</li>
<li><code>Dao</code>ï¼šæ•°æ®è®¿é—®å±‚ï¼Œåšæ•°æ®æŒä¹…åŒ–ï¼Œæ–¹æ³•é’ˆå¯¹æ•°æ®åº“æ“ä½œï¼›</li>
<li><code>Mapper</code>ï¼šMyBatis Mapper æ¥å£å±‚ï¼Œå­˜æ”¾ MyBatis çš„æ¥å£å®šä¹‰ï¼›</li>
<li><code>data</code>ï¼šæ•°æ®æ¨¡å‹ å®ä½“å±‚ å¯¹åº”æ•°æ®åº“è¡¨æˆ–æ¥å£æ•°æ®ç»“æ„ï¼›</li>
</ul>
<h3 id="éƒ¨ç½²æ­å»ºè®°å½•"><a href="#éƒ¨ç½²æ­å»ºè®°å½•" class="headerlink" title="éƒ¨ç½²æ­å»ºè®°å½•"></a>éƒ¨ç½²æ­å»ºè®°å½•</h3><p>é¦–å…ˆé€‰æ‹©æ–°å»ºé¡¹ç›®ï¼š</p>
<p><img src="/../uploads/java_range1.png"></p>
<p>é€šè¿‡Springboot Initializråˆå§‹åŒ–é¡¹ç›®:</p>
<p><img src="/../uploads/java_range2.png"></p>
<p>é€‰æ‹©ç›¸å…³ä¾èµ–ï¼š</p>
<p><img src="/../uploads/java_range3.png"></p>
<p>åˆå§‹åŒ–é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="/../uploads/java_range4.png"></p>
<p>ä¾èµ–è¿˜æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå› ä¸ºé¶åœºå¯¹åº”çš„æ˜¯Java1.8ç‰ˆæœ¬ï¼Œä½†æ˜¯IDEAåˆ›å»ºprojectæ—¶åªæœ‰17ã€21å’Œ25å¯é€‰é¡¹ï¼ˆè¿™ä¸ªåº”è¯¥æœ‰åŠæ³•è§£å†³ï¼Œåç»­å†æï¼‰ï¼Œä¸è¿‡ç›®å‰å·²ç»æ¸…æ¥šäº†Springbootçš„æ¶æ„æ˜¯ä»€ä¹ˆæ ·å­ã€‚</p>
<h2 id="ä»£ç å®¡è®¡"><a href="#ä»£ç å®¡è®¡" class="headerlink" title="ä»£ç å®¡è®¡"></a>ä»£ç å®¡è®¡</h2><h3 id="db-IndexDb-java"><a href="#db-IndexDb-java" class="headerlink" title="db&#x2F;IndexDb.java"></a>db&#x2F;IndexDb.java</h3><p><code>IndexDb.java</code> æ˜¯ä¸€ä¸ªåŸºäº <code>JdbcTemplate</code> çš„æ•°æ®åº“è®¿é—®ç±»ï¼Œè´Ÿè´£ä» students å’Œ teachers è¡¨ä¸­æŸ¥è¯¢æ•°æ®ï¼ŒåŒæ—¶ä¸ºäº†æ¼æ´é¶åœºæ¼”ç¤ºï¼Œåˆ»æ„ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ SQLï¼Œå­˜åœ¨æ˜æ˜¾çš„ SQL æ³¨å…¥é£é™©ã€‚</p>
<p>è¯¦ç»†è§£è¯»ï¼š</p>
<ul>
<li><p>è¢«æ ‡è®°ä¸º @Repositoryï¼Œä¾›å…¶ä»–å±‚ï¼ˆå¦‚ IndexLogic &#x2F; Controllerï¼‰æ³¨å…¥ä½¿ç”¨ã€‚</p>
</li>
<li><p>å†…éƒ¨å®šä¹‰äº†ä¸¤ä¸ª RowMapperï¼ŒæŠŠæŸ¥è¯¢ç»“æœæ˜ å°„æˆ Student å’Œ Teacher å¯¹è±¡ã€‚</p>
</li>
<li><p>æä¾›å¤šç§æŸ¥è¯¢æ–¹æ³•ï¼š</p>
<ol>
<li><p>æŒ‰ç”¨æˆ·åæ¨¡ç³ŠæŸ¥è¯¢å­¦ç”Ÿï¼šgetStudent &#x2F; getStudentWithOptional</p>
</li>
<li><p>æŒ‰ id æŸ¥è¯¢å­¦ç”Ÿï¼šgetStudentById</p>
</li>
<li><p>æŒ‰ id æŸ¥è¯¢æ•™å¸ˆï¼šgetTeacherById</p>
</li>
<li><p>ä½¿ç”¨ IN æ¡ä»¶æ‰¹é‡ç”¨æˆ·åæŸ¥è¯¢å­¦ç”Ÿï¼šgetStudentWithIn &#x2F; getStudentWithInLong</p>
</li>
</ol>
</li>
</ul>
<p>æ‰€æœ‰ SQL éƒ½æ˜¯ç›´æ¥æ‹¼æ¥å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬ Optionalã€List çš„æ‹¼æ¥ï¼‰ä½œä¸ºé¶åœºä¸­æ¼”ç¤º SQL æ³¨å…¥çš„é‡è¦éƒ¨åˆ†ã€‚æˆªå–éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IndexDb</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ Spring çš„ JdbcTemplate ç›´æ¥æ“ä½œæ•°æ®åº“çš„ä»“åº“ç±»ã€‚</span></span><br><span class="line"><span class="comment"> * ä¸»è¦æä¾›é’ˆå¯¹ students / teachers è¡¨çš„æŸ¥è¯¢æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * æ³¨æ„ï¼šæœ¬ç±»ä¸ºäº†é…åˆâ€œJava æ¼æ´é¶åœºâ€ï¼Œå¤§é‡ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥æ„é€  SQLï¼Œ</span></span><br><span class="line"><span class="comment"> *       å®é™…ä¸Šå­˜åœ¨å…¸å‹çš„ SQL æ³¨å…¥é£é™©ï¼Œç”¨äºå®‰å…¨æ¼”ç¤ºã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexDb</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Spring æ³¨å…¥ JdbcTemplateï¼Œç”¨äºæ‰§è¡Œ SQL è¯­å¥</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† ResultSet æ˜ å°„ä¸º Student å¯¹è±¡çš„ RowMapper</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> RowMapper&lt;Student&gt; ROW_MAPPER = (rs, i) -&gt; &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        student.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        student.setAge(rs.getInt(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">        student.setSex(rs.getInt(<span class="string">&quot;sex&quot;</span>));</span><br><span class="line">        student.setUsername(rs.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> student;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† ResultSet æ˜ å°„ä¸º Teacher å¯¹è±¡çš„ RowMapper</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> RowMapper&lt;Teacher&gt; ROW_MAPPER_TEACHER = (rs, i) -&gt; &#123;</span><br><span class="line">        <span class="type">Teacher</span> <span class="variable">teacher</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>();</span><br><span class="line">        teacher.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        teacher.setSex(rs.getBoolean(<span class="string">&quot;sex&quot;</span>));</span><br><span class="line">        teacher.setName(rs.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> teacher;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·åæ¨¡ç³ŠæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="comment">     * æ¼æ´ç‚¹ï¼šç›´æ¥æ‹¼æ¥ username åˆ° SQL ä¸­ï¼Œå­˜åœ¨ SQL æ³¨å…¥é£é™©ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudent</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="comment">// å®‰å…¨å†™æ³•ç¤ºä¾‹ï¼ˆè¢«æ³¨é‡Šæ‰ï¼‰ï¼šä½¿ç”¨å ä½ç¬¦å¹¶ç»‘å®šå‚æ•°</span></span><br><span class="line">        <span class="comment">// String sql = &quot;select * from students where username like ?&quot;;</span></span><br><span class="line">        <span class="comment">// return jdbcTemplate.query(sql, new Object[]&#123;&quot;%&quot; + username + &quot;%&quot;&#125;, ROW_MAPPER);</span></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from students where username like &#x27;%&quot;</span> + username + <span class="string">&quot;%&#x27;&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.query(sql, ROW_MAPPER);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ Optional åŒ…è£…çš„ç”¨æˆ·åè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="comment">     * å®é™…ä¸Šä»ç„¶æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ï¼ŒåŒæ ·å­˜åœ¨ SQL æ³¨å…¥é£é™©ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentWithOptional</span><span class="params">(Optional&lt;String&gt; username)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sqlWithOptional</span> <span class="operator">=</span></span><br><span class="line">                <span class="string">&quot;select * from students where username like &#x27;%&quot;</span> + username.get() + <span class="string">&quot;%&#x27;&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.query(sqlWithOptional, ROW_MAPPER);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡ id ç²¾ç¡®æŸ¥è¯¢å­¦ç”Ÿã€‚</span></span><br><span class="line"><span class="comment">     * æ¼æ´ç‚¹ï¼šå°† id è½¬æˆå­—ç¬¦ä¸²å†æ‹¼æ¥åˆ° SQL ä¸­ï¼Œå­˜åœ¨æ³¨å…¥é£é™©ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sqlWithInt</span> <span class="operator">=</span></span><br><span class="line">                <span class="string">&quot;select * from students where id = &#x27;&quot;</span> + String.valueOf(id) + <span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.query(sqlWithInt, ROW_MAPPER);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="logic-IndexLogic-java"><a href="#logic-IndexLogic-java" class="headerlink" title="logic&#x2F;IndexLogic.java"></a>logic&#x2F;IndexLogic.java</h3><p><code>IndexLogic.java</code> æœ¬è´¨ä¸Šæ˜¯<strong>Service å±‚çš„ä¸€ä¸ªæµ…å°è£…</strong>ï¼š</p>
<ul>
<li>ç”¨ <code>@Service</code> æ ‡è®°ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸šåŠ¡é€»è¾‘å±‚çš„ Beanï¼›</li>
<li>é€šè¿‡ <code>@Autowired</code> æ³¨å…¥ <code>IndexDb</code>ï¼ˆ4.1èŠ‚å¯¹åº”çš„é‚£ä¸ªæ•°æ®åº“è®¿é—®ç±»ï¼‰ï¼›</li>
<li>å¯¹å¤–æä¾›ä¸€ç»„æ–¹æ³•ï¼š<code>getStudent</code> &#x2F; <code>getStudentById</code> &#x2F; <code>getStudentWithOptional</code> &#x2F; <code>getStudentWithIn</code> &#x2F; <code>getStudentWithInLong</code> &#x2F; <code>getTeacherById</code>ï¼›</li>
<li>æ¯ä¸ªæ–¹æ³•éƒ½<strong>ç›´æ¥æŠŠå‚æ•°åŸæ ·è½¬å‘ç»™ <code>IndexDb</code>ï¼Œä¸åšé¢å¤–å¤„ç†</strong>ï¼Œç›¸å½“äºâ€œè½¬å‘å±‚â€ï¼›</li>
<li>å› ä¸º <code>IndexDb</code> é‡Œé¢çš„ SQL æ˜¯æ‹¼æ¥çš„ï¼Œæ‰€ä»¥è¿™äº› Service æ–¹æ³•ä¹Ÿå°±â€œé¡ºå¸¦â€æš´éœ²å‡º SQL æ³¨å…¥æ¼æ´åœºæ™¯ï¼Œæ–¹ä¾¿ Controller è°ƒç”¨ã€‚</li>
</ul>
<p>å¯ä»¥ç†è§£ä¸ºï¼š<br><strong>Controller -&gt; IndexLogic -&gt; IndexDb -&gt; Databases</strong></p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IndexLogic</span></span><br><span class="line"><span class="comment"> * ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆServiceï¼‰ï¼Œå¯¹å¤–æä¾›å­¦ç”Ÿ / è€å¸ˆç›¸å…³çš„æŸ¥è¯¢æ¥å£ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * å½“å‰å®ç°éå¸¸è–„ï¼Œåªæ˜¯ç®€å•åœ°æŠŠè°ƒç”¨è½¬å‘ç»™ IndexDbï¼Œ</span></span><br><span class="line"><span class="comment"> * ä¸»è¦èµ·åˆ°ï¼šController ä¸ DB æ“ä½œä¹‹é—´çš„â€œä¸­é—´å±‚â€ä½œç”¨ï¼Œ</span></span><br><span class="line"><span class="comment"> * æ–¹ä¾¿ä¿æŒä¸‰å±‚æ¶æ„çš„ç»“æ„æ¸…æ™°ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ç”±äºåº•å±‚ IndexDb ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ SQLï¼Œ</span></span><br><span class="line"><span class="comment"> * è¿™äº›æ–¹æ³•å®é™…ä¹Ÿç”¨äºé…åˆæ¼æ´é¶åœºæ¼”ç¤º SQL æ³¨å…¥åœºæ™¯ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexLogic</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨å…¥æ•°æ®åº“è®¿é—®ç±» IndexDb</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    IndexDb indexDb;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·åæ¨¡ç³ŠæŸ¥è¯¢å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudent</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexDb.getStudent(username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® id æŸ¥è¯¢å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexDb.getStudentById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ Optional åŒ…è£…çš„ç”¨æˆ·åæŸ¥è¯¢å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentWithOptional</span><span class="params">(Optional&lt;String&gt; username)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexDb.getStudentWithOptional(username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ IN æ¡ä»¶ï¼ˆå­—ç¬¦ä¸²åˆ—è¡¨ï¼‰æ‰¹é‡æŸ¥è¯¢å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentWithIn</span><span class="params">(List&lt;String&gt; user_list)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexDb.getStudentWithIn(user_list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ IN æ¡ä»¶ï¼ˆLong åˆ—è¡¨ï¼‰æ‰¹é‡æŸ¥è¯¢å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentWithInLong</span><span class="params">(List&lt;Long&gt; user_list)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexDb.getStudentWithInLong(user_list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®â€œid/userNameâ€æŸ¥è¯¢è€å¸ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Teacher&gt; <span class="title function_">getTeacherById</span><span class="params">(String userName)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexDb.getTeacherById(userName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>IndexLogic æ˜¯ Controller å’Œ IndexDb ä¹‹é—´çš„æ¡¥æ¢ï¼ŒæŠŠå„ç§æŸ¥è¯¢æ“ä½œç»„ç»‡æˆä¸šåŠ¡æ¥å£ï¼Œæ–¹ä¾¿æš´éœ²ä¸º HTTP é¶åœºæ¥å£ã€‚</strong></p>
<hr>
<h3 id="mapper-IStudentMapper-java"><a href="#mapper-IStudentMapper-java" class="headerlink" title="mapper&#x2F;IStudentMapper.java"></a>mapper&#x2F;IStudentMapper.java</h3><p>IStudentMapper æ˜¯ students è¡¨çš„ MyBatis æ¥å£ï¼Œå…¶ä¸­ <code>queryAllByAnnotations</code> ç”¨æ³¨è§£ + <code>$&#123;&#125;</code> æ‹¼ä¸²ï¼Œä¸“é—¨ç”¨æ¥æ£€æµ‹æ³¨è§£å¼ SQL æ³¨å…¥æ¼æ´ã€‚</p>
<p>Mapper <strong>â‰ˆ</strong> æ˜ å°„å™¨ï¼Œä»–çš„ä½œç”¨æ˜¯æŠŠ â€œJava æ–¹æ³•è°ƒç”¨â€ æ˜ å°„æˆ â€œSQL è¯­å¥æ‰§è¡Œâ€ï¼Œå†æŠŠç»“æœæ˜ å°„å› Java å¯¹è±¡ã€‚ä¹Ÿå¯ä»¥ç§°ä¸ºâ€œMyBatis å¸®å¿™è‡ªåŠ¨å®ç°çš„ DAO æ¥å£â€ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IStudentMapper</span></span><br><span class="line"><span class="comment"> * MyBatis çš„ Mapper æ¥å£ï¼Œå¯¹ students è¡¨æä¾›æŸ¥è¯¢æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªæ¥å£æœ‰ä¸¤ä¸ªç›®çš„ï¼š</span></span><br><span class="line"><span class="comment"> * 1ï¼‰æ­£å¸¸çš„æŸ¥è¯¢æ–¹æ³•ï¼ˆqueryAllï¼‰ï¼ŒSQL é€šå¸¸å†™åœ¨ XML ä¸­ï¼›</span></span><br><span class="line"><span class="comment"> * 2ï¼‰ä½¿ç”¨æ³¨è§£ + $&#123;&#125; æ‹¼æ¥å‚æ•°çš„æ–¹å¼ï¼Œæ•…æ„åˆ¶é€  SQL æ³¨å…¥æ¼æ´ï¼Œ</span></span><br><span class="line"><span class="comment"> *    ç”¨äºæµ‹è¯•ä»£ç æ‰«æå·¥å…·æ˜¯å¦èƒ½è¯†åˆ«æ³¨è§£é‡Œçš„æ³¨å…¥é—®é¢˜ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–¹å¼ä¸€ï¼šå¸¸è§„æŸ¥è¯¢æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * SQL å†™åœ¨ resources/mappers/IStudentMapper.xml ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment">     * ä¸€èˆ¬ä¼šä½¿ç”¨ #&#123;name&#125; è¿™ç§å ä½ç¬¦ï¼Œå±äºå‚æ•°ç»‘å®šå†™æ³•ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Student&gt; <span class="title function_">queryAll</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String username)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–¹å¼äºŒï¼šæ³¨è§£å¼ SQLï¼Œæ•…æ„ä½¿ç”¨ $&#123;&#125; ç›´æ¥æ‹¼æ¥å‚æ•°ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * è¿™é‡Œçš„ SQLï¼š</span></span><br><span class="line"><span class="comment">     *   select * from students where username =&#x27;$&#123;name&#125;&#x27;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * $&#123;name&#125; ä¼šè¢«åŸæ ·æ›¿æ¢åˆ° SQL ä¸­ï¼Œå­˜åœ¨æ˜æ˜¾çš„ SQL æ³¨å…¥é£é™©ã€‚</span></span><br><span class="line"><span class="comment">     * è¿™æ˜¯é¶åœºä¸­ä¸“é—¨ç”¨æ¥æµ‹è¯•â€œé™æ€æ‰«æå·¥å…·èƒ½å¦å‘ç°æ³¨è§£é‡Œçš„ SQL æ³¨å…¥â€çš„ä¾‹å­ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from students where username =&#x27;$&#123;name&#125;&#x27;&quot;)</span></span><br><span class="line">    List&lt;Student&gt; <span class="title function_">queryAllByAnnotations</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String username)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="data-Person-java"><a href="#data-Person-java" class="headerlink" title="data&#x2F;Person.java"></a>data&#x2F;Person.java</h3><p>data æ–‡ä»¶å¤¹ä¸‹ä¸“é—¨å­˜æ”¾äº†â€œæ•°æ®æ¨¡å‹â€ï¼Œå¯ä»¥ä¿å­˜æ•°æ®åº“å’Œä¸šåŠ¡é‡Œçš„â€œå®ä½“å¯¹è±¡â€ã€‚åŒæ—¶ä½œä¸ºå„ä¸ªå±‚æ¬¡ä¹‹é—´ä¼ é€’æ•°æ®çš„è½½ä½“ï¼š</p>
<ul>
<li><p>db&#x2F;IndexDb æŸ¥å‡ºæ¥çš„æ˜¯ List<Student>ã€List<Teacher></p>
</li>
<li><p>logic&#x2F;IndexLogic æ¥æ”¶&#x2F;è¿”å›çš„ä¹Ÿæ˜¯è¿™äº›å¯¹è±¡</p>
</li>
<li><p>Controller å¯¹å¤–è¿”å›çš„ JSONï¼Œå…¶å®å°±æ˜¯æŠŠè¿™äº› data ç±»åºåˆ—åŒ–å‡ºå»</p>
</li>
</ul>
<p>ğŸ‘‰ è¿™æ · Controllerã€Serviceã€DAO éƒ½å›´ç»•åŒä¸€å¥—â€œæ•°æ®ç»“æ„â€åœ¨äº¤æµã€‚</p>
<p>Person æ˜¯ç”¨ JPA+Hibernate æ˜ å°„å‡ºæ¥çš„äººå‘˜è¡¨å®ä½“ï¼Œç”¨ UUID å½“ä¸»é”®ï¼Œå¹¶å¼ºåˆ¶ username å’Œ nickname çš„å”¯ä¸€æ€§ä¸éç©ºçº¦æŸã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Person å®ä½“ç±»ï¼š</span></span><br><span class="line"><span class="comment"> * æ˜ å°„æ•°æ®åº“ä¸­çš„ person è¡¨ï¼ˆé»˜è®¤è¡¨åï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ UUID ä½œä¸ºä¸»é”®ï¼ŒåŒ…å«å”¯ä¸€ä¸”å¿…å¡«çš„ username / nickname å­—æ®µã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸»é”® IDï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„ UUID ç”Ÿæˆç­–ç•¥</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GenericGenerator(name = &quot;idGenerator&quot;, strategy = &quot;uuid&quot;)</span></span><br><span class="line">    <span class="meta">@GeneratedValue(generator = &quot;idGenerator&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·ååˆ—ï¼šå”¯ä¸€ã€éç©ºï¼Œæœ€é•¿ 100 å­—ç¬¦</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;username&quot;, unique = true, nullable = false, length = 100)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜µç§°åˆ—ï¼šå”¯ä¸€ã€éç©ºï¼Œæœ€é•¿ 100 å­—ç¬¦</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;nickname&quot;, unique = true, nullable = false, length = 100)</span></span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="dao-PersonRepository-java"><a href="#dao-PersonRepository-java" class="headerlink" title="dao&#x2F;PersonRepository.java"></a>dao&#x2F;PersonRepository.java</h3><p><code>PersonRepository</code> æ˜¯ä¸€ä¸ªåŸºäº Spring Data JPA çš„ DAO æ¥å£ï¼Œè´Ÿè´£å¯¹ Person å®ä½“åšæ•°æ®åº“æŸ¥è¯¢ï¼šæ ¹æ® username å’Œ nickname æŸ¥äººï¼Œä¾› Controller æˆ– Service è°ƒç”¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * PersonRepository</span></span><br><span class="line"><span class="comment"> * åŸºäº Spring Data JPA çš„ DAO æ¥å£ï¼Œ</span></span><br><span class="line"><span class="comment"> * ç”¨äºå¯¹ Person å®ä½“è¿›è¡Œæ•°æ®åº“è®¿é—®æ“ä½œã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * é€šè¿‡ç»§æ‰¿ JpaRepositoryï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨é€šç”¨çš„å¢åˆ æ”¹æŸ¥æ–¹æ³•ï¼Œ</span></span><br><span class="line"><span class="comment"> * åŒæ—¶ä¹Ÿå¯ä»¥å®šä¹‰æ´¾ç”ŸæŸ¥è¯¢æ–¹æ³•æˆ–è‡ªå®šä¹‰ <span class="doctag">@Query</span> æŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PersonRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;Person, String&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ Spring Data JPA çš„â€œæ–¹æ³•åæ´¾ç”ŸæŸ¥è¯¢â€åŠŸèƒ½ï¼Œ</span></span><br><span class="line"><span class="comment">     * æ ¹æ® username å­—æ®µæŸ¥è¯¢ Person åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * ç­‰ä»·äºï¼šSELECT p FROM Person p WHERE p.username = ?1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Person&gt; <span class="title function_">findPersonByUsername</span><span class="params">(String username)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ <span class="doctag">@Query</span> æ‰‹å†™ JPQL æŸ¥è¯¢ï¼Œæ ¹æ® nickname æŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Query(&quot;SELECT nickname FROM Person WHERE nickname = &#x27;?1&#x27;&quot;)</span></span><br><span class="line">    List&lt;Person&gt; <span class="title function_">findPersonByNickname</span><span class="params">(String nickname)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="controller-VulnerabilitiesController-java"><a href="#controller-VulnerabilitiesController-java" class="headerlink" title="controller&#x2F;VulnerabilitiesController.java"></a>controller&#x2F;VulnerabilitiesController.java</h3><p><code>controller</code> æ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾é¡¹ç›®é‡Œçš„æ§åˆ¶å™¨ç±»ï¼Œä¹Ÿå°±æ˜¯å¯¹å¤–æš´éœ² HTTP æ¥å£çš„é‚£ä¸€å±‚ã€‚åœ¨ Spring Boot é‡Œï¼ŒController è´Ÿè´£æ¥æ”¶æµè§ˆå™¨æˆ–å·¥å…·ï¼ˆå¦‚ Postmanã€burpï¼‰çš„è¯·æ±‚ï¼Œè§£æå‚æ•°ï¼ŒæŠŠè¯·æ±‚è½¬äº¤ç»™é€»è¾‘å±‚ï¼ˆlogic&#x2F;serviceï¼‰ï¼Œå†æŠŠè¿”å›ç»“æœå°è£…æˆ JSON æˆ–é¡µé¢å“åº”ã€‚</p>
]]></content>
      <categories>
        <category>Java Security</category>
      </categories>
      <tags>
        <tag>Java Security</tag>
        <tag>Springboot</tag>
      </tags>
  </entry>
  <entry>
    <title>MCPç¼–ç¨‹å¿«é€Ÿå…¥é—¨ï¼ˆäºŒï¼‰</title>
    <url>/2025/12/11/MCP%E7%BC%96%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h2 id="æ¨¡å‹å¦‚ä½•ç¡®å®šå·¥å…·é€‰ç”¨ï¼Ÿ"><a href="#æ¨¡å‹å¦‚ä½•ç¡®å®šå·¥å…·é€‰ç”¨ï¼Ÿ" class="headerlink" title="æ¨¡å‹å¦‚ä½•ç¡®å®šå·¥å…·é€‰ç”¨ï¼Ÿ"></a>æ¨¡å‹å¦‚ä½•ç¡®å®šå·¥å…·é€‰ç”¨ï¼Ÿ</h2><p>Anthropic è¯¦ç»†è§£é‡Šäº†è¿™ä¸ªé—®é¢˜ï¼šæ¨¡å‹åœ¨ä»€ä¹ˆæ—¶å€™ç¡®å®šä½¿ç”¨å“ªäº›å·¥å…·ã€‚</p>
<p>å½“ç”¨æˆ·æå‡ºä¸€ä¸ªé—®é¢˜æ—¶ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯ï¼ˆClaude Desktop &#x2F; Cursorï¼‰å°†é—®é¢˜å‘é€ç»™ Claudeï¼›</li>
<li>Claude åˆ†æå¯ç”¨çš„å·¥å…·ï¼Œå¹¶å†³å®šä½¿ç”¨å“ªä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰ï¼›</li>
<li>å®¢æˆ·ç«¯é€šè¿‡ MCP Server æ‰§è¡Œæ‰€é€‰çš„å·¥å…·ï¼›</li>
<li>å·¥å…·çš„æ‰§è¡Œç»“æœè¢«é€å›ç»™ Claudeï¼›</li>
<li>Claude ç»“åˆæ‰§è¡Œç»“æœæ„é€ æœ€ç»ˆçš„ prompt å¹¶ç”Ÿæˆè‡ªç„¶è¯­è¨€çš„å›åº”ï¼›</li>
<li>å›åº”æœ€ç»ˆå±•ç¤ºç»™ç”¨æˆ·ï¼</li>
</ol>
<p>MCP Server æ˜¯ç”± Claude ä¸»åŠ¨é€‰æ‹©å¹¶è°ƒç”¨çš„ï¼Œè¿™ä¸ªä¸»åŠ¨é€‰æ‹©çš„è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<ol>
<li>ç”± LLMï¼ˆClaudeï¼‰ç¡®å®šä½¿ç”¨å“ªäº› MCP Serverï¼›</li>
<li>æ‰§è¡Œå¯¹åº”çš„ MCP Server å¹¶å¯¹æ‰§è¡Œç»“æœè¿›è¡Œé‡æ–°å¤„ç†ï¼›</li>
</ol>
<p>MCP æµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="/../uploads/MCP_11.jpg"></p>
<p>æµç¨‹å›¾å±•ç¤ºäº† LLM åœ¨æ¥æ”¶åˆ°ç”¨æˆ·è¾“å…¥åï¼Œæ ¹æ®ç³»ç»Ÿæç¤ºä¸­æä¾›çš„æŒ‡ä»¤ä¸å·¥å…·æè¿°ï¼Œå†³å®šæ˜¯å¦éœ€è¦è°ƒç”¨å¤–éƒ¨å·¥å…·ï¼ˆåŒ…æ‹¬ MCP Server æä¾›çš„å·¥å…·ï¼‰ã€‚<br>é¦–å…ˆï¼Œç”¨æˆ·è¾“å…¥ä¸ç³»ç»Ÿ promptï¼ˆåŒ…å«å·¥å…·çš„ç»“æ„åŒ–æè¿°ï¼‰ä¸€åŒäº¤ç»™æ¨¡å‹ç”Ÿæˆ Message1ã€‚å¦‚æœæ¨¡å‹åˆ¤æ–­æŸä¸ªä»»åŠ¡éœ€è¦å€ŸåŠ©å·¥å…·å®Œæˆï¼ˆCase 1ï¼‰ï¼Œå®ƒä¼šç”Ÿæˆä¸€æ®µç»“æ„åŒ–çš„ Tool call JSONï¼Œå¹¶ç”±å¤–éƒ¨æ‰§è¡Œç¯å¢ƒæˆ– MCP Server è´Ÿè´£å®é™…æ‰§è¡Œå·¥å…·é€»è¾‘ã€‚æ‰§è¡Œç»“æœå†è¿”å›ç»™æ¨¡å‹ï¼Œæ¨¡å‹åŸºäºè¿™ä»½ç»“æœç”Ÿæˆæœ€ç»ˆå›ç­”ï¼›<br>å¦‚æœæ¨¡å‹åˆ¤æ–­ä¸éœ€è¦å·¥å…·ï¼ˆCase 2ï¼‰ï¼Œåˆ™ç›´æ¥ç”Ÿæˆæœ€ç»ˆè¾“å‡ºã€‚<br>æ•´ä¸ªæµç¨‹ä½“ç°äº†ï¼šLLM è´Ÿè´£â€œå†³å®šç”¨ä»€ä¹ˆå·¥å…·åŠå¦‚ä½•è°ƒç”¨â€ï¼Œè€Œ MCP Servers ç­‰å¤–éƒ¨ç³»ç»Ÿè´Ÿè´£â€œå®é™…æ‰§è¡Œä»»åŠ¡å¹¶è¿”å›æ•°æ®â€ï¼Œä»è€Œå®ç°æ¨¡å‹ä¸å¤–éƒ¨èƒ½åŠ›çš„åä½œã€‚</p>
<span id="more"></span>

<h2 id="æ¨¡å‹å¦‚ä½•æ™ºèƒ½é€‰æ‹©å·¥å…·ï¼Ÿ"><a href="#æ¨¡å‹å¦‚ä½•æ™ºèƒ½é€‰æ‹©å·¥å…·ï¼Ÿ" class="headerlink" title="æ¨¡å‹å¦‚ä½•æ™ºèƒ½é€‰æ‹©å·¥å…·ï¼Ÿ"></a>æ¨¡å‹å¦‚ä½•æ™ºèƒ½é€‰æ‹©å·¥å…·ï¼Ÿ</h2><p>æ¨¡å‹å¦‚ä½•ç¡®å®šè¯¥ä½¿ç”¨å“ªäº›å·¥å…·ï¼ŒMCP å®˜æ–¹æä¾›çš„ client example ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">self</span>):</span><br><span class="line">     <span class="comment"># åˆå§‹åŒ–æ‰€æœ‰çš„ mcp server</span></span><br><span class="line">     <span class="keyword">for</span> server <span class="keyword">in</span> <span class="variable language_">self</span>.servers:</span><br><span class="line">         <span class="keyword">await</span> server.initialize()</span><br><span class="line"> â€‹</span><br><span class="line">     <span class="comment"># è·å–æ‰€æœ‰çš„ tools å‘½åä¸º all_tools</span></span><br><span class="line">     all_tools = []</span><br><span class="line">     <span class="keyword">for</span> server <span class="keyword">in</span> <span class="variable language_">self</span>.servers:</span><br><span class="line">         tools = <span class="keyword">await</span> server.list_tools()</span><br><span class="line">         all_tools.extend(tools)</span><br><span class="line"> â€‹</span><br><span class="line">     <span class="comment"># å°†æ‰€æœ‰çš„ tools çš„åŠŸèƒ½æè¿°æ ¼å¼åŒ–æˆå­—ç¬¦ä¸²ä¾› LLM ä½¿ç”¨</span></span><br><span class="line">     <span class="comment"># tool.format_for_llm() æˆ‘æ”¾åˆ°äº†è¿™æ®µä»£ç æœ€åï¼Œæ–¹ä¾¿é˜…è¯»ã€‚</span></span><br><span class="line">     <span class="comment"># ä¸º LLM ç”Ÿæˆå·¥å…·è¯´æ˜æ–‡æ¡£ï¼Œå‘Šè¯‰æ¨¡å‹ï¼šæœ‰å“ªäº›å·¥å…·ã€å„è‡ªå¹²å•¥ã€è¦ä»€ä¹ˆå‚æ•°ã€‚</span></span><br><span class="line">     tools_description = <span class="string">&quot;\n&quot;</span>.join(</span><br><span class="line">         [tool.format_for_llm() <span class="keyword">for</span> tool <span class="keyword">in</span> all_tools]</span><br><span class="line">     )</span><br><span class="line"> â€‹</span><br><span class="line">     <span class="comment"># è¿™é‡Œå°±ä¸ç®€åŒ–äº†ï¼Œä»¥ä¾›å‚è€ƒï¼Œå®é™…ä¸Šå°±æ˜¯åŸºäº prompt å’Œå½“å‰æ‰€æœ‰å·¥å…·çš„ä¿¡æ¯</span></span><br><span class="line">     <span class="comment"># è¯¢é—® LLMï¼ˆClaudeï¼‰ åº”è¯¥ä½¿ç”¨å“ªäº›å·¥å…·ã€‚</span></span><br><span class="line">     system_message = (</span><br><span class="line">         <span class="string">&quot;You are a helpful assistant with access to these tools:\n\n&quot;</span></span><br><span class="line">         <span class="string">f&quot;<span class="subst">&#123;tools_description&#125;</span>\n&quot;</span></span><br><span class="line">         <span class="string">&quot;Choose the appropriate tool based on the user&#x27;s question. &quot;</span></span><br><span class="line">         <span class="string">&quot;If no tool is needed, reply directly.\n\n&quot;</span></span><br><span class="line">         <span class="string">&quot;IMPORTANT: When you need to use a tool, you must ONLY respond with &quot;</span></span><br><span class="line">         <span class="string">&quot;the exact JSON object format below, nothing else:\n&quot;</span></span><br><span class="line">         <span class="string">&quot;&#123;\n&quot;</span></span><br><span class="line">         <span class="string">&#x27;    &quot;tool&quot;: &quot;tool-name&quot;,\n&#x27;</span></span><br><span class="line">         <span class="string">&#x27;    &quot;arguments&quot;: &#123;\n&#x27;</span></span><br><span class="line">         <span class="string">&#x27;        &quot;argument-name&quot;: &quot;value&quot;\n&#x27;</span></span><br><span class="line">         <span class="string">&quot;    &#125;\n&quot;</span></span><br><span class="line">         <span class="string">&quot;&#125;\n\n&quot;</span></span><br><span class="line">         <span class="string">&quot;After receiving a tool&#x27;s response:\n&quot;</span></span><br><span class="line">         <span class="string">&quot;1. Transform the raw data into a natural, conversational response\n&quot;</span></span><br><span class="line">         <span class="string">&quot;2. Keep responses concise but informative\n&quot;</span></span><br><span class="line">         <span class="string">&quot;3. Focus on the most relevant information\n&quot;</span></span><br><span class="line">         <span class="string">&quot;4. Use appropriate context from the user&#x27;s question\n&quot;</span></span><br><span class="line">         <span class="string">&quot;5. Avoid simply repeating the raw data\n\n&quot;</span></span><br><span class="line">         <span class="string">&quot;Please use only the tools that are explicitly defined above.&quot;</span></span><br><span class="line">     )</span><br><span class="line">     messages = [&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>, <span class="string">&quot;content&quot;</span>: system_message&#125;]</span><br><span class="line"> â€‹</span><br><span class="line">     <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">         <span class="comment"># Final... å‡è®¾è¿™é‡Œå·²ç»å¤„ç†äº†ç”¨æˆ·æ¶ˆæ¯è¾“å…¥.</span></span><br><span class="line">         messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: user_input&#125;)</span><br><span class="line"> â€‹</span><br><span class="line">         <span class="comment"># å°† system_message å’Œç”¨æˆ·æ¶ˆæ¯è¾“å…¥ä¸€èµ·å‘é€ç»™ LLM</span></span><br><span class="line">         llm_response = <span class="variable language_">self</span>.llm_client.get_response(messages)</span><br><span class="line"> â€‹</span><br><span class="line">     ... <span class="comment"># åé¢å’Œç¡®å®šä½¿ç”¨å“ªäº›å·¥å…·æ— å…³</span></span><br><span class="line">     </span><br><span class="line"> â€‹</span><br><span class="line"> <span class="keyword">class</span> <span class="title class_">Tool</span>:</span><br><span class="line">     <span class="string">&quot;&quot;&quot;Represents a tool with its properties and formatting.&quot;&quot;&quot;</span></span><br><span class="line"> â€‹</span><br><span class="line">     <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"></span></span><br><span class="line"><span class="params">         self, name: <span class="built_in">str</span>, description: <span class="built_in">str</span>, input_schema: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]</span></span><br><span class="line"><span class="params">     </span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">         <span class="variable language_">self</span>.name: <span class="built_in">str</span> = name</span><br><span class="line">         <span class="variable language_">self</span>.description: <span class="built_in">str</span> = description</span><br><span class="line">         <span class="variable language_">self</span>.input_schema: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>] = input_schema</span><br><span class="line"> â€‹</span><br><span class="line">     <span class="comment"># æŠŠå·¥å…·çš„åå­— / å·¥å…·çš„ç”¨é€”ï¼ˆdescriptionï¼‰å’Œå·¥å…·æ‰€éœ€è¦çš„å‚æ•°ï¼ˆargs_descï¼‰è½¬åŒ–ä¸ºæ–‡æœ¬</span></span><br><span class="line">     <span class="keyword">def</span> <span class="title function_">format_for_llm</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">         <span class="string">&quot;&quot;&quot;Format tool information for LLM.</span></span><br><span class="line"><span class="string"> â€‹</span></span><br><span class="line"><span class="string">         Returns:</span></span><br><span class="line"><span class="string">             A formatted string describing the tool.</span></span><br><span class="line"><span class="string">         &quot;&quot;&quot;</span></span><br><span class="line">         args_desc = []</span><br><span class="line">         <span class="keyword">if</span> <span class="string">&quot;properties&quot;</span> <span class="keyword">in</span> <span class="variable language_">self</span>.input_schema:</span><br><span class="line">             <span class="keyword">for</span> param_name, param_info <span class="keyword">in</span> <span class="variable language_">self</span>.input_schema[<span class="string">&quot;properties&quot;</span>].items():</span><br><span class="line">                 arg_desc = (</span><br><span class="line">                     <span class="string">f&quot;- <span class="subst">&#123;param_name&#125;</span>: <span class="subst">&#123;param_info.get(<span class="string">&#x27;description&#x27;</span>, <span class="string">&#x27;No description&#x27;</span>)&#125;</span>&quot;</span></span><br><span class="line">                 )</span><br><span class="line">                 <span class="keyword">if</span> param_name <span class="keyword">in</span> <span class="variable language_">self</span>.input_schema.get(<span class="string">&quot;required&quot;</span>, []):</span><br><span class="line">                     arg_desc += <span class="string">&quot; (required)&quot;</span></span><br><span class="line">                 args_desc.append(arg_desc)</span><br><span class="line"> â€‹</span><br><span class="line">         <span class="keyword">return</span> <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"> Tool: <span class="subst">&#123;self.name&#125;</span></span></span><br><span class="line"><span class="string"> Description: <span class="subst">&#123;self.description&#125;</span></span></span><br><span class="line"><span class="string"> Arguments:</span></span><br><span class="line"><span class="string"> <span class="subst">&#123;<span class="built_in">chr</span>(<span class="number">10</span>).join(args_desc)&#125;</span></span></span><br><span class="line"><span class="string"> &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>æ¨¡å‹ä¼šé€šè¿‡ Prompt æ¥ç¡®å®šå½“å‰æœ‰å“ªäº›å·¥å…·ï¼Œé€šè¿‡å°†å·¥å…·çš„å…·ä½“ä½¿ç”¨æè¿°ä»¥æ–‡æœ¬çš„å½¢å¼ä¼ é€’ç»™æ¨¡å‹ï¼Œä¾›æ¨¡å‹äº†è§£æœ‰å“ªäº›å·¥å…·ä»¥åŠç»“åˆå®æ—¶æƒ…å†µè¿›è¡Œé€‰æ‹©ã€‚</p>
<blockquote>
<p><strong>ä»æ‰€æœ‰ MCP Server ä¸­â€œæ”¶é›†å·¥å…· â†’ è½¬æˆç»™ LLM çœ‹å¾—æ‡‚çš„æ–‡å­—è¯´æ˜ â†’ æ‹¼åˆ° system prompt é‡Œ â†’ è®© LLM æ ¹æ®è¿™äº›å·¥å…·æè¿°æ¥å†³å®šè¦ä¸è¦è°ƒç”¨å·¥å…·ã€è°ƒç”¨å“ªä¸ªå·¥å…·ã€‚</strong></p>
</blockquote>
<p>åœ¨æ•´ä¸ª MCP çš„å¤§å›¾æ™¯é‡Œï¼Œè¿™æ®µä»£ç æ‰®æ¼”çš„æ˜¯<strong>ä¸­é—´åè°ƒè€… &#x2F; é€‚é…å±‚</strong>ï¼š</p>
<ol>
<li>å¯¹ä¸‹æ¸¸ï¼ˆMCP Serversï¼‰</li>
</ol>
<ul>
<li><p>è´Ÿè´£åˆå§‹åŒ–æ‰€æœ‰ MCP Server</p>
</li>
<li><p>é€šè¿‡ list_tools() æ¢æµ‹æ¯ä¸ª server æš´éœ²çš„å·¥å…·</p>
</li>
<li><p>æŠŠå·¥å…·çš„ JSON Schema ç­‰ç»“æ„åŒ–ä¿¡æ¯ï¼ŒæŠ½è±¡æˆ Tool å¯¹è±¡</p>
</li>
</ul>
<ol start="2">
<li>å¯¹ä¸Šæ¸¸ï¼ˆLLMï¼‰</li>
</ol>
<ul>
<li><p>æŠŠæ‰€æœ‰å·¥å…·ä¿¡æ¯æ•´åˆå¹¶è½¬æˆäººç±»è¯­è¨€è¯´æ˜ï¼ˆformat_for_llmï¼‰</p>
</li>
<li><p>æŠŠè¯´æ˜å¡è¿› system promptï¼Œå‘Šè¯‰ LLM å®ƒæœ‰å“ªäº›èƒ½åŠ›å¯ä»¥ç”¨</p>
</li>
<li><p>é€šè¿‡ä¸¥æ ¼çš„ JSON æ ¼å¼çº¦æŸï¼Œè®© LLM ä»¥ç¨³å®šå¯è§£æçš„æ–¹å¼è¿”å›â€œæˆ‘è¦ç”¨å“ªä¸ªå·¥å…·+å‚æ•°â€</p>
</li>
</ul>
<ol start="3">
<li>å¯¹ä¸­é—´é€»è¾‘ï¼ˆRouter &#x2F; Orchestratorï¼‰</li>
</ol>
<ul>
<li><p>åç»­æ ¹æ® LLM çš„å·¥å…·é€‰æ‹© JSON å†å»è°ƒç”¨ç›¸åº” MCP server çš„ tool</p>
</li>
<li><p>æŠŠç»“æœåé¦ˆç»™ LLMï¼Œè®©å®ƒç”Ÿæˆè‡ªç„¶è¯­è¨€ç­”å¤</p>
</li>
</ul>
<blockquote>
<p><strong>å®ƒè®©â€œå¤š MCP Server çš„å·¥å…·â€å¯¹ LLM çœ‹èµ·æ¥åƒä¸€ç»„ç»Ÿä¸€ã€æ¸…æ™°ã€å¯é€‰æ‹©çš„å·¥å…·èœå•ã€‚</strong></p>
</blockquote>
<h2 id="å·¥å…·æ‰§è¡Œå’Œç»“æœåé¦ˆæœºåˆ¶"><a href="#å·¥å…·æ‰§è¡Œå’Œç»“æœåé¦ˆæœºåˆ¶" class="headerlink" title="å·¥å…·æ‰§è¡Œå’Œç»“æœåé¦ˆæœºåˆ¶"></a>å·¥å…·æ‰§è¡Œå’Œç»“æœåé¦ˆæœºåˆ¶</h2><p>å·¥å…·çš„æ‰§è¡Œå°±æ˜¯æŠŠ system prompt æŒ‡ä»¤å’Œå·¥å…·è°ƒç”¨æè¿°ï¼Œè¿˜æœ‰ç”¨æˆ·æ¶ˆæ¯ä¸€èµ·å‘é€ç»™æ¨¡å‹ï¼Œç„¶åæ¥æ”¶æ¨¡å‹çš„å›å¤ã€‚å½“æ¨¡å‹åˆ†æç”¨æˆ·è¯·æ±‚åï¼Œå®ƒä¼šå†³å®šæ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·ã€‚å¦‚æœå›å¤ä¸­åŒ…å«ç»“æ„åŒ– json æ ¼å¼çš„å·¥å…·è°ƒç”¨è¯·æ±‚ï¼Œåˆ™å®¢æˆ·ç«¯ä¼šæ ¹æ®è¿™ä¸ª json ä»£ç æ‰§è¡Œå¯¹åº”çš„å·¥å…·ã€‚</p>
<p>å¦‚æœæ¨¡å‹æ‰§è¡Œäº† tool callï¼Œåˆ™å·¥å…·æ‰§è¡Œçš„ç»“æœ result ä¼šå’Œ system prompt å’Œç”¨æˆ·æ¶ˆæ¯ä¸€èµ·é‡æ–°å‘é€ç»™æ¨¡å‹ï¼Œè¯·æ±‚æ¨¡å‹ç”Ÿæˆæœ€ç»ˆå›å¤ã€‚åŒæ—¶ï¼Œå¦‚æœ tool call çš„ json ä»£ç å­˜åœ¨é—®é¢˜æˆ–è€…æ¨¡å‹äº§ç”Ÿäº†å¹»è§‰ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼š skip æ‰æ— æ•ˆçš„è°ƒç”¨è¯·æ±‚ã€‚</p>
<p>å·¥å…·æ‰§è¡Œçš„ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">self</span>):</span><br><span class="line">     ... <span class="comment"># ä¸Šé¢å·²ç»ä»‹ç»è¿‡äº†ï¼Œæ¨¡å‹å¦‚ä½•é€‰æ‹©å·¥å…·</span></span><br><span class="line"> â€‹</span><br><span class="line">     <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">         <span class="comment"># å‡è®¾è¿™é‡Œå·²ç»å¤„ç†äº†ç”¨æˆ·æ¶ˆæ¯è¾“å…¥.</span></span><br><span class="line">         messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: user_input&#125;)</span><br><span class="line"> â€‹</span><br><span class="line">         <span class="comment"># è·å– LLM çš„è¾“å‡º</span></span><br><span class="line">         llm_response = <span class="variable language_">self</span>.llm_client.get_response(messages)</span><br><span class="line"> â€‹</span><br><span class="line">         <span class="comment"># å¤„ç† LLM çš„è¾“å‡ºï¼ˆå¦‚æœæœ‰ tool call åˆ™æ‰§è¡Œå¯¹åº”çš„å·¥å…·ï¼‰</span></span><br><span class="line">         result = <span class="keyword">await</span> <span class="variable language_">self</span>.process_llm_response(llm_response)</span><br><span class="line"> â€‹</span><br><span class="line">         <span class="comment"># å¦‚æœ result ä¸ llm_response ä¸åŒï¼Œè¯´æ˜æ‰§è¡Œäº† tool call ï¼ˆæœ‰é¢å¤–ä¿¡æ¯äº†ï¼‰</span></span><br><span class="line">         <span class="comment"># åˆ™å°† tool call çš„ç»“æœé‡æ–°å‘é€ç»™ LLM è¿›è¡Œå¤„ç†ã€‚</span></span><br><span class="line">         <span class="keyword">if</span> result != llm_response:</span><br><span class="line">             messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>, <span class="string">&quot;content&quot;</span>: llm_response&#125;)</span><br><span class="line">             messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>, <span class="string">&quot;content&quot;</span>: result&#125;)</span><br><span class="line"> â€‹</span><br><span class="line">             final_response = <span class="variable language_">self</span>.llm_client.get_response(messages)</span><br><span class="line">             logging.info(<span class="string">&quot;\nFinal response: %s&quot;</span>, final_response)</span><br><span class="line">             messages.append(</span><br><span class="line">                 &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>, <span class="string">&quot;content&quot;</span>: final_response&#125;</span><br><span class="line">             )</span><br><span class="line">         <span class="comment"># å¦åˆ™ä»£è¡¨æ²¡æœ‰æ‰§è¡Œ tool callï¼Œåˆ™ç›´æ¥å°† LLM çš„è¾“å‡ºè¿”å›ç»™ç”¨æˆ·ã€‚</span></span><br><span class="line">         <span class="keyword">else</span>:</span><br><span class="line">             messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>, <span class="string">&quot;content&quot;</span>: llm_response&#125;) </span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªè¦ç‚¹ï¼š</p>
<ol>
<li>å·¥å…·å¯¹åº”çš„æ–‡æ¡£å¾ˆé‡è¦ï¼š æ¨¡å‹é€šè¿‡å·¥å…·æè¿°æ–‡æœ¬æ¥ç†è§£å’Œé€‰æ‹©å·¥å…·ï¼Œå› æ­¤ç²¾å¿ƒç¼–å†™å·¥å…·çš„åç§°ã€docstring å’Œå‚æ•°è¯´æ˜è‡³å…³é‡è¦ï¼›</li>
<li>ç”±äº MCP çš„é€‰æ‹©æ˜¯åŸºäº prompt çš„ï¼Œæ‰€ä»¥ä»»ä½•æ¨¡å‹å…¶å®éƒ½é€‚é… MCPï¼Œåªè¦èƒ½æä¾›å¯¹åº”çš„å·¥å…·æè¿°ã€‚ä½†æ˜¯å½“ä½ ä½¿ç”¨é Claude æ¨¡å‹æ—¶ï¼ŒMCP ä½¿ç”¨çš„æ•ˆæœå’Œä½“éªŒéš¾ä»¥ä¿è¯ï¼ˆæ²¡æœ‰åšä¸“é—¨çš„è®­ç»ƒï¼Œè¿™ä¸ªä¸å¤ªç¡®å®šï¼Œåç»­éœ€è¦æµ‹è¯•ä¸€ä¸‹ï¼‰ã€‚</li>
</ol>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ol>
<li><strong>MCP çš„æœ¬è´¨</strong>ï¼šå®ƒæ˜¯ä¸€ä¸ªç»Ÿä¸€çš„åè®®æ ‡å‡†ï¼Œä½¿ AI æ¨¡å‹èƒ½å¤Ÿä»¥ä¸€è‡´çš„æ–¹å¼è¿æ¥å„ç§æ•°æ®æºå’Œå·¥å…·ï¼Œç±»ä¼¼äº AI ä¸–ç•Œçš„â€USB-Câ€æ¥å£ã€‚</li>
<li><strong>MCP çš„ä»·å€¼</strong>ï¼šå®ƒè§£å†³äº†ä¼ ç»Ÿ function call çš„å¹³å°ä¾èµ–é—®é¢˜ï¼Œæä¾›äº†æ›´ç»Ÿä¸€ã€å¼€æ”¾ã€å®‰å…¨ã€çµæ´»çš„å·¥å…·è°ƒç”¨æœºåˆ¶ï¼Œè®©ç”¨æˆ·å’Œå¼€å‘è€…éƒ½èƒ½ä»ä¸­å—ç›Šã€‚</li>
<li>ä½¿ç”¨ä¸å¼€å‘ï¼šå¯¹äºæ™®é€šç”¨æˆ·ï¼ŒMCP æä¾›äº†ä¸°å¯Œçš„ç°æˆå·¥å…·ï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸äº†è§£ä»»ä½•æŠ€æœ¯ç»†èŠ‚çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼›å¯¹äºå¼€å‘è€…ï¼ŒMCP æä¾›äº†æ¸…æ™°çš„æ¶æ„å’Œ SDKï¼Œä½¿å·¥å…·å¼€å‘å˜å¾—ç›¸å¯¹ç®€å•ã€‚</li>
</ol>
<h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><ul>
<li>MCP(Model Context Protocol)ä¸€ç¯‡å°±å¤Ÿäº†ï¼š<a href="https://zhuanlan.zhihu.com/p/29001189476">https://zhuanlan.zhihu.com/p/29001189476</a></li>
</ul>
]]></content>
      <categories>
        <category>MCP</category>
      </categories>
      <tags>
        <tag>MCP</tag>
      </tags>
  </entry>
  <entry>
    <title>MCPç¼–ç¨‹å¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰</title>
    <url>/2025/12/11/MCP%E7%BC%96%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h2 id="MCP-æ¦‚å¿µ"><a href="#MCP-æ¦‚å¿µ" class="headerlink" title="MCP æ¦‚å¿µ"></a>MCP æ¦‚å¿µ</h2><p>MCP ç¼–ç¨‹å¿«é€Ÿå…¥é—¨ï¼ŒMCP å…¨ç§° Model Context Protocol æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼Œå…¶å®šä¹‰äº† LLMs ä¸å¤–éƒ¨ä¸–ç•Œçš„äº’åŠ¨æ–¹å¼ï¼ŒMCP æä¾›äº†ä¸€ç§æ ‡å‡†åŒ–æ–¹æ³•ï¼Œä½¿ä»»æ„ LLMs èƒ½å¤Ÿè½»æ¾è¿æ¥å„ç§æ•°æ®æºå’Œå·¥å…·ï¼Œå®ç°ä¿¡æ¯çš„é«˜æ•ˆäº¤äº’å’Œå¤„ç†ã€‚</p>
<p>ç›®å‰çš„ AI æœç€ä¸¤ä¸ªæ–¹å‘å‘å±•ï¼š<strong>æŒæ¡æ›´å¤šä¿¡æ¯</strong> æˆ– <strong>æ§åˆ¶æ›´å¤šå·¥å…·</strong>ï¼Œåœ¨æ²¡æœ‰è”ç½‘æœç´¢ä¹‹å‰ï¼ŒLLM çš„æ•°æ®æ¥æºåªæœ‰è®­ç»ƒæ—¶å’Œæ¨ç†æ—¶æˆ‘ä»¬æä¾›çš„æ•°æ®ã€‚</p>
<p>åœ¨MCPå‡ºç°ä¹‹å‰ï¼Œå¦‚æœLLMè¦è®¿é—®å¤–éƒ¨æ•°æ®ï¼Œé€šå¸¸ä½¿ç”¨<code>Function Call</code>çš„æ–¹å¼ï¼Œ<code>Function Call</code>é€šè¿‡ç»™æ¨¡å‹é¢„è®¾å‡½æ•°æè¿°ï¼ˆåŒ…æ‹¬å‡½æ•°åã€å‚æ•°è¯´æ˜ã€è¿”å›å€¼æ ¼å¼ç­‰ï¼‰ï¼Œè®©æ¨¡å‹åœ¨åˆé€‚çš„æ—¶å€™è¿”å›ä¸€ä¸ªç¬¦åˆç»“æ„çš„ JSON æ ¼å¼ï¼Œå¤–éƒ¨ç³»ç»Ÿå†è§£æè¿™ä¸ª JSONï¼Œè°ƒç”¨å®é™…çš„åç«¯å‡½æ•°ã€‚å…³äº <code>Function Call</code> å’Œ<code>MCP</code> çš„å…·ä½“åŒºåˆ«åœ¨ <a href="/2025/12/11/Function-Call%E5%92%8CMCP%E7%9A%84%E5%8C%BA%E5%88%AB/" title="Function Callå’ŒMCPçš„åŒºåˆ«">Function Callå’ŒMCPçš„åŒºåˆ«</a></p>
<p>ä½† <code>Function Call</code> çš„æ–¹å¼æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„å¼€å‘è§„èŒƒï¼Œä½ å¼€å‘çš„å‡½æ•°æˆ‘ä¸èƒ½ç”¨ï¼Œæˆ‘å¼€å‘çš„å‡½æ•°ä½ ä¸èƒ½ç”¨ï¼Œè€Œä¸”å¼€å‘èµ·æ¥å¾ˆéº»çƒ¦ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒMCP å‡ºç°äº†ã€‚MCPä½œä¸ºLLMsçš„æ ‡å‡†åŒ–å·¥å…·ç®±ï¼Œå¯ä»¥é€šè¿‡MCPè°ƒç”¨å¤–ç•Œçš„AIå·¥å…·ï¼Œè€ŒAIå·¥å…·åœ¨å¼€å‘çš„æ—¶å€™ä¹Ÿéœ€è¦éµå¾ªMCPåè®®ã€‚MCP å…è®¸åº”ç”¨ä»¥æ ‡å‡†åŒ–çš„æ–¹å¼å‘ LLM æä¾›ä¸Šä¸‹æ–‡ï¼Œå¹¶å°†<strong>æä¾›ä¸Šä¸‹æ–‡çš„é€»è¾‘</strong>ä¸<strong>å®é™…çš„LLMäº¤äº’é€»è¾‘â€</strong>è§£è€¦ã€‚</p>
<p>åœ¨æ²¡æœ‰ MCP ä¹‹å‰ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›è®©æ¨¡å‹ä½¿ç”¨æœ¬åœ°æ•°æ®ï¼Œé€šå¸¸éœ€è¦æŠŠè¿™äº›æ•°æ®ç›´æ¥å¤åˆ¶åˆ°å¯¹è¯æ¡†ä¸­ï¼Œè®©æ¨¡å‹ä»æ–‡æœ¬ä¸­è·å–ä¿¡æ¯ã€‚è€Œæœ‰äº† MCP ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºç‰¹å®šèƒ½åŠ›ç¼–å†™ä¸€ä¸ª MCP Serverï¼Œä¾‹å¦‚æ•°æ®åº“è¯»å–ã€GitHub æ“ä½œã€æ–‡ä»¶ç³»ç»Ÿè®¿é—®æˆ–è·å–å½“å‰æ—¶é—´ç­‰ã€‚æ¨¡å‹é€šè¿‡ MCP ä¸è¿™äº› Server é€šä¿¡ï¼Œå°±èƒ½åœ¨æ— éœ€æ‰‹åŠ¨ç²˜è´´æ•°æ®çš„æƒ…å†µä¸‹ï¼Œå®æ—¶è®¿é—®è¿™äº›å¤–éƒ¨èµ„æºã€‚</p>
<p><img src="/../uploads/MCP_1.png"></p>
<p>MCP æœåŠ¡å™¨å¯ä»¥æä¾›ä¸‰ç§ä¸»è¦ç±»å‹çš„åŠŸèƒ½:</p>
<ol>
<li>èµ„æºè®¿é—®ï¼šå®¢æˆ·ç«¯è¯»å–æ–‡ä»¶ç­‰æ•°æ®ï¼›</li>
<li>å·¥å…·è°ƒç”¨ï¼šç”±LLMè°ƒç”¨çš„å‡½æ•°ï¼›</li>
<li>Promptæ¨¡æ¿ï¼šé¢„å…ˆç¼–å†™çš„å¸®åŠ©å®¢æˆ·å®Œæˆç‰¹å®šä»»åŠ¡çš„Promptï¼›</li>
</ol>
<span id="more"></span>

<h2 id="MCP-Deno-å¼€å‘"><a href="#MCP-Deno-å¼€å‘" class="headerlink" title="MCP Deno å¼€å‘"></a>MCP Deno å¼€å‘</h2><p>ä½¿ç”¨pythonçš„SDKï¼Œç®€å•å®ç°ä¸‹é¢åŠŸèƒ½ï¼Œç”¨æ¥åŠ æ·±ç†è§£ï¼š</p>
<ol>
<li>æ„å»ºå¯è¿æ¥åˆ°ä»»ä½• MCP Server çš„ MCP Client</li>
<li>åˆ›å»ºå…¬å¼€èµ„æºã€æç¤ºå’Œå·¥å…·çš„ MCP Server</li>
<li>ä½¿ç”¨ stdio å’Œ SSE ç­‰æ ‡å‡†ä¼ è¾“</li>
<li>å¤„ç†æ‰€æœ‰ MCP åè®®æ¶ˆæ¯å’Œç”Ÿå‘½å‘¨æœŸäº‹ä»¶</li>
</ol>
<p>ä¸€èˆ¬å…³äºMCPçš„é¡¹ç›®ï¼Œå¼€å‘è€…ä»¬éƒ½å–œæ¬¢ç”¨uvæ¥ç®¡ç†ï¼Œä¸æ™“å¾—ä¸ºä»€ä¹ˆï¼Œä½†æ˜¯è·Ÿç€ç”¨ä¸€ä¸‹ï¼Œç›¸å…³å®‰è£…ä½¿ç”¨æ–¹æ³•å‚ç…§ <a href="/2025/12/10/uv%E4%BD%BF%E7%94%A8/" title="uvä½¿ç”¨">uvä½¿ç”¨</a> ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ–°çš„é¡¹ç›®</span></span><br><span class="line">uv init mcp-demo</span><br><span class="line"><span class="built_in">cd</span> mcp-demo</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">uv venv</span><br><span class="line"><span class="built_in">source</span> .venv/bin/activate</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–</span></span><br><span class="line">uv add <span class="string">&quot;mcp[cli]&quot;</span> </span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä¸€ä¸ªuvç®¡ç†çš„python MCP é¡¹ç›®å°±åˆå§‹åŒ–å®Œæˆäº†ã€‚</p>
<p>æ¥ä¸‹æ¥ç¼–å†™ç¬¬ä¸€ä¸ªç®€å•Demoï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> mcp.server.fastmcp <span class="keyword">import</span> FastMCP</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º FastMCP å®ä¾‹</span></span><br><span class="line">mcp = FastMCP(<span class="string">&quot;Demo&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹å·¥å…·</span></span><br><span class="line"><span class="meta">@mcp.tool()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">echo</span>(<span class="params">text: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">return</span> text</span><br><span class="line"></span><br><span class="line"><span class="meta">@mcp.tool()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a: <span class="built_in">int</span>, b: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹èµ„æº</span></span><br><span class="line"><span class="meta">@mcp.resource(<span class="params"><span class="string">&quot;greeting://&#123;name&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;Hello, <span class="subst">&#123;name&#125;</span>!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨æœåŠ¡</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;FastMCP Demo Server is running ......&quot;</span>)</span><br><span class="line">    mcp.run()</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ä¸­ï¼Œä½¿ç”¨äº†FastMCPæ¥åˆå§‹åŒ–ä¸€ä¸ªMCP Serverå®ä¾‹ï¼Œåˆ†åˆ«åˆ›å»ºäº†ä¸‰ä¸ªå‡½æ•°ï¼š</p>
<ul>
<li>echoï¼šå­—ç¬¦ä¸²è¾“å‡ºï¼›</li>
<li>addï¼šä¸¤ä¸ªæ•°å­—ç›¸åŠ ï¼›</li>
<li>greetï¼šè¾“å…¥å­—ç¬¦ä¸²ï¼Œæ‹¼æ¥åè¿”å›å­—ç¬¦ä¸²ï¼›</li>
</ul>
<p>é€šè¿‡ä¸¤ä¸ªæ³¨è§£ï¼Œèµ‹äºˆäº†å‡½æ•°ä¸åŒçš„èƒ½åŠ›ï¼š</p>
<ul>
<li>@tool()ï¼šå‡½æ•°å¯ä»¥ç›´æ¥è¢«AIè°ƒç”¨ï¼›</li>
<li>@resource()ï¼šåƒAPIæ¥å£ä¸€æ ·è¢«è°ƒç”¨ï¼Œå…¶ä¸­çš„å‚æ•° greeting:&#x2F;&#x2F;{name} æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ URIï¼Œ å¯ä»¥æ‹†è§£ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚greeting æ˜¯éšä¾¿èµ·çš„å‰ç¼€ï¼Œnameæ˜¯åŠ¨æ€å‚æ•°çš„åç§°ï¼Œåœ¨è®¿é—®çš„æ—¶å€™éœ€è¦ä¼ å…¥ã€‚</li>
</ul>
<p>æµ‹è¯•å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mcp dev server.py</span><br></pre></td></tr></table></figure>

<p><code>mcp dev</code>æ˜¯å¼€å‘è°ƒè¯•æ¨¡å¼ï¼Œè¾“å…¥è¿™æ¡å‘½ä»¤åï¼Œä¼šæ‰“å¼€ä¸€ä¸ª MCP Inspector ï¼Œå¯ä»¥ç›´è§‚åœ°æ£€æŸ¥å’Œæµ‹è¯• MCP Serverï¼ˆserver.pyï¼‰æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
<p><img src="/../uploads/MCP_2.png"></p>
<p>ç‚¹å‡» Connect ï¼Œé€‰æ‹© Toolsï¼ŒList Toolsï¼Œå³å¯åˆ—å‡º MCP ä¸­å®šä¹‰çš„å·¥å…·ï¼Œå¯ä»¥è¾“å…¥æµ‹è¯•å†…å®¹è¿›è¡Œ run toolsæµ‹è¯•:</p>
<p><img src="/../uploads/MCP_3.png"></p>
<p>åœ¨ Resources æ ‡ç­¾é¡µä¸‹ï¼Œå¯ä»¥çœ‹åˆ°å®šä¹‰çš„èµ„æºå‡½æ•° greet:</p>
<p><img src="/../uploads/MCP_4.png"></p>
<p>ä¼ å…¥åŠ¨æ€å‚æ•°ï¼Œmcp server å°±ä¼šè¿”å› json æ ¼å¼çš„å“åº”ï¼Œå¹¶å°†æˆ‘ä»¬è¾“å…¥çš„ api æ‹¼æ¥åè¿”å›ã€‚</p>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>åšå®¢è®°å½•äº†å¯¹äº MCP çš„ç†è§£ï¼Œä»¥åŠä¸€ä¸ªç®€å•çš„Demoï¼Œåç»­åœ¨è¿™ä¸ªåŸºç¡€ä¸Šç»§ç»­å®Œå–„ã€‚</p>
<p>å¯¹ MCP Server çš„å¼€å‘æ˜¯ MCPåº”ç”¨çš„é‡ç‚¹ï¼Œä½œè€…æåˆ° MCP Server å…¶å®å°±æ˜¯å®šä¹‰ä¸€äº›å‡½æ•°ï¼Œè®©æ™ºèƒ½ä½“è°ƒç”¨ã€‚åœ¨å‡½æ•°ä¸­å¯ä»¥å®ç°ç®€å•é€»è¾‘ã€æ¥å£è°ƒç”¨å’Œå„ç§æ“ä½œï¼Œå¹¶é€šè¿‡æ³¨è§£èµ‹äºˆå‡½æ•°ä¸åŒçš„èƒ½åŠ›ã€‚</p>
<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul>
<li>ä»€ä¹ˆæ˜¯MCPï¼Ÿæœ¬åœ°å¦‚ä½•å¼€å‘MCP Serverï¼š<a href="https://cloud.tencent.com/developer/article/2511642">https://cloud.tencent.com/developer/article/2511642</a></li>
</ul>
]]></content>
      <categories>
        <category>MCP</category>
      </categories>
      <tags>
        <tag>MCP</tag>
      </tags>
  </entry>
  <entry>
    <title>Minicondaå®‰è£…</title>
    <url>/2025/12/07/Miniconda%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<p>Miniconda æ˜¯ Conda çš„ç²¾ç®€å‘è¡Œç‰ˆï¼ŒåªåŒ…å«æœ€æ ¸å¿ƒçš„åŒ…ç®¡ç†ç³»ç»Ÿä¸ Pythonï¼Œå¯ä»¥å¿«é€Ÿæ­å»ºç‹¬ç«‹çš„ Python ç¯å¢ƒã€‚åœ¨è¿›è¡Œæ•°æ®åˆ†æã€æœºå™¨å­¦ä¹ æˆ–ç§‘ç ”å¼€å‘æ—¶ï¼Œç›¸æ¯”äº Anaconda æ›´è½»é‡ã€æ›´çµæ´»ã€‚</p>
<h2 id="ä¸€ã€Miniconda-å®‰è£…"><a href="#ä¸€ã€Miniconda-å®‰è£…" class="headerlink" title="ä¸€ã€Miniconda å®‰è£…"></a>ä¸€ã€Miniconda å®‰è£…</h2><p>Windows å‘½ä»¤è¡Œå®‰è£…æ–¹å¼ï¼Œå¯ä»¥å¿«é€Ÿä¸”å®‰é™åœ°ä¸‹è½½æœ€æ–°çš„ 64 ä½ Windows å®‰è£…ç¨‹åºï¼Œå°†å…¶é‡å‘½åä¸ºè¾ƒçŸ­çš„æ–‡ä»¶åï¼Œæ‰§è¡Œé™é»˜å®‰è£…ï¼Œç„¶ååˆ é™¤å®‰è£…ç¨‹åºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl https://repo.anaconda.com/miniconda/Miniconda3-latest-Windows-x86_64.exe -o .\miniconda.exe</span><br><span class="line">start /wait &quot;&quot; .\miniconda.exe /S</span><br><span class="line">del .\miniconda.exe</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<p>Windows Powershellï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Invoke-WebRequest</span> <span class="literal">-Uri</span> <span class="string">&quot;https://repo.anaconda.com/miniconda/Miniconda3-latest-Windows-x86_64.exe&quot;</span> <span class="literal">-outfile</span> <span class="string">&quot;.\miniconda.exe&quot;</span></span><br><span class="line"><span class="built_in">Start-Process</span> <span class="literal">-FilePath</span> <span class="string">&quot;.\miniconda.exe&quot;</span> <span class="literal">-ArgumentList</span> <span class="string">&quot;/S&quot;</span> <span class="literal">-Wait</span></span><br><span class="line"><span class="built_in">del</span> .\miniconda.exe</span><br></pre></td></tr></table></figure>

<p>Linux 64ä½ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/miniconda3</span><br><span class="line">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh</span><br><span class="line">bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3</span><br><span class="line"><span class="built_in">rm</span> ~/miniconda3/miniconda.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> ~/miniconda3/bin/activate</span><br><span class="line"></span><br><span class="line">conda init --all</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€å¿«é€Ÿä½¿ç”¨"><a href="#äºŒã€å¿«é€Ÿä½¿ç”¨" class="headerlink" title="äºŒã€å¿«é€Ÿä½¿ç”¨"></a>äºŒã€å¿«é€Ÿä½¿ç”¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda create -n environment python=3.12</span><br><span class="line"></span><br><span class="line">conda activate environment</span><br><span class="line"></span><br><span class="line">conda deactivate environment</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒæ–‡çŒ®ï¼š<a href="https://www.anaconda.com/docs/getting-started/miniconda/install#windows-command-prompt">https://www.anaconda.com/docs/getting-started/miniconda/install#windows-command-prompt</a></p>
]]></content>
      <categories>
        <category>Config</category>
      </categories>
      <tags>
        <tag>Config</tag>
        <tag>Miniconda</tag>
      </tags>
  </entry>
  <entry>
    <title>OSCPå­¦ä¹ å¿ƒå¾—</title>
    <url>/2025/12/12/OSCP%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/</url>
    <content><![CDATA[<p>åœ¨ OSCP çš„å­¦ä¹ å’Œç»ƒä¹ ä»¥åŠæ‰“é¶åœºæˆ–è€…æ¸—é€æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘è®¤ä¸ºæœ¬è´¨ä¸Šä¸æ˜¯æŒæ¡äº†å¤šå°‘å·¥å…·ï¼Œè€Œæ˜¯åœ¨è§„å®šæ—¶é—´å†…ï¼Œèƒ½ä¸èƒ½æŠŠæ¸—é€çš„å…¨æµç¨‹è·‘å®Œï¼Œå…³é”®æ­¥éª¤ä¸Šæ€ç»´èƒ½å¦å‘æ•£ï¼Œèƒ½å¦æœ‰è¾ƒä¸ºå…¨é¢çš„æ€è€ƒå’Œæšä¸¾ï¼Œæ‰€ä»¥é‡å¿ƒè¿˜æ˜¯åœ¨æ€è·¯ä¸Šï¼Œæ¸—é€çš„æ€è·¯å’Œåº”å¯¹å…³é”®ç‚¹æ—¶çš„ç»éªŒï¼Œæ‰€ä»¥è®°å½•ä¸€äº›è‡ªå·±çš„æ€è€ƒã€‚</p>
<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>é‡ç‚¹åœ¨äºè¦†ç›–é¢å’Œå¯ç”¨æ€§ï¼š</p>
<ul>
<li>è¦†ç›–é¢ï¼šå…¨ç«¯å£ï¼ˆæœåŠ¡ï¼‰æ‰«æï¼Œä¸è¦æ¼æ‰æœåŠ¡ï¼Œä¸ç„¶å¯èƒ½ä¼šæ‰¾ä¸åˆ°æ­£ç¡®çš„å…¥å£ç‚¹ï¼›</li>
<li>å¯ç”¨æ€§ï¼šä¸åŒæœåŠ¡ã€ç‰ˆæœ¬éƒ½æœ‰ä»€ä¹ˆæ¼æ´ï¼Œæ˜¯å¦å…·å¤‡åˆ©ç”¨æ¡ä»¶ï¼Œæ— æ³•åˆ©ç”¨çš„è¯æ˜¯ä¸æ˜¯åŠ äº†ä»€ä¹ˆé™åˆ¶ï¼Œæ˜¯éœ€è¦ç»•è¿‡é™åˆ¶è¿˜æ˜¯éœ€è¦è½¬å˜è·¯å¾„ï¼Œè¿™äº›å±äºèƒ½å¦å®ç°åˆ©ç”¨çš„èŒƒç•´ï¼›</li>
</ul>
<blockquote>
<p><strong>ä¿¡æ¯æ”¶é›†è¦å¾—å‡ºä¸€ä¸ªç»“è®ºï¼šæˆ‘åˆ°åº•èƒ½æ‰“å“ªäº›å…¥å£ï¼Ÿå“ªäº›å…¥å£æœ€å¯èƒ½å®ç°è¾¹ç•Œçªç ´ï¼Ÿ</strong></p>
</blockquote>
<h2 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h2><p>æ¼æ´åˆ©ç”¨é˜¶æ®µä¸è¦ç›²ç›®è·‘expï¼Œæœ€å¥½æ˜¯å…ˆéªŒè¯æ§åˆ¶ç¨‹åº¦ï¼Œå†æ‹¿shellã€‚</p>
<p>å…ˆç¡®å®šæ¼æ´æ˜¯å¦çœŸå®å­˜åœ¨ï¼Œæ¼æ´å¯æ§ç‚¹åœ¨å“ªé‡Œï¼Œè¾“å…¥å¦‚ä½•å½±å“è¾“å‡ºï¼Œç„¶åå†ç¡®è®¤æ§åˆ¶æ·±åº¦ï¼ˆèƒ½å¦è¯»å†™æ–‡ä»¶&#x2F;å‘½ä»¤æ‰§è¡Œ&#x2F;é‰´æƒç»•è¿‡ï¼‰ï¼Œæœ€ååœ¨æ‹¿ç¨³å®šshellã€‚</p>
<blockquote>
<p><strong>å…ˆçœ‹èƒ½ä¸èƒ½éªŒè¯æ¸…æ¥šï¼Œåœ¨è€ƒè™‘èƒ½å¦ä¸€æ­¥åˆ°ä½ã€‚</strong></p>
</blockquote>
<h2 id="æƒé™æå‡"><a href="#æƒé™æå‡" class="headerlink" title="æƒé™æå‡"></a>æƒé™æå‡</h2><p>ææƒå¹¶æ²¡æœ‰æ·±å…¥å­¦ä¹ å¤ªå¤šï¼Œä½†æ˜¯æ„Ÿè§‰åº”è¯¥åœ¨äºæ‰¾åˆ°â€œæƒé™è¾¹ç•Œè¢«ç ´åâ€çš„è¯æ®ï¼Œå¯ä»¥æ ¹æ®å†å²ç»éªŒå¯»æ‰¾çº¿ç´¢ï¼Œæ‰¾åˆ°ç¨³å®šå¯å¤ç°çš„æ€è·¯ã€‚</p>
<h2 id="æ¨ªå‘ç§»åŠ¨"><a href="#æ¨ªå‘ç§»åŠ¨" class="headerlink" title="æ¨ªå‘ç§»åŠ¨"></a>æ¨ªå‘ç§»åŠ¨</h2><blockquote>
<p><strong>ä¿¡ä»»å…³ç³»+å‡­è¯æµå‘</strong>: ä»ä»¥æ§åˆ¶ä¸»æœºæŠŠå½±å“åŠ›æ‰©åˆ°æ›´æœ‰ä»·å€¼çš„ä¸»æœº&#x2F;è´¦å·&#x2F;ç½‘æ®µç­‰ã€‚</p>
</blockquote>
<hr>
<p>â­<strong>æŒç»­æ›´æ–° To be continuedâ€¦â€¦</strong></p>
]]></content>
      <categories>
        <category>OSCP</category>
      </categories>
      <tags>
        <tag>OSCP</tag>
        <tag>Penetration Test</tag>
      </tags>
  </entry>
  <entry>
    <title>HEXOä½¿ç”¨è®°å½•</title>
    <url>/2025/12/04/HEXO%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<h1 id="Hexo-ä½¿ç”¨è®°å½•"><a href="#Hexo-ä½¿ç”¨è®°å½•" class="headerlink" title="Hexo ä½¿ç”¨è®°å½•"></a>Hexo ä½¿ç”¨è®°å½•</h1><p>å‚è€ƒæ–‡çŒ®ï¼š <a href="https://theme-next.js.org/docs/getting-started/">https://theme-next.js.org/docs/getting-started/</a></p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://hexo.io/zh-cn/">https://hexo.io/zh-cn/</a></p>
<h2 id="HEXO-ç®€ä»‹"><a href="#HEXO-ç®€ä»‹" class="headerlink" title="HEXO ç®€ä»‹"></a>HEXO ç®€ä»‹</h2><p>Hexo æ˜¯ä¸€ä¸ªåŸºäº Node.js çš„å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„é™æ€åšå®¢æ¡†æ¶ã€‚å®ƒæ‹¥æœ‰è¶…å¿«çš„æ¸²æŸ“é€Ÿåº¦ã€çµæ´»çš„é…ç½®æ–¹å¼ï¼Œä»¥åŠä¸°å¯Œçš„ä¸»é¢˜ä¸æ’ä»¶ç”Ÿæ€ã€‚å€ŸåŠ© Markdown å†™ä½œï¼Œå¯ä»¥è½»æ¾ç”Ÿæˆä¼˜é›…çš„é™æ€ç½‘é¡µï¼Œå¹¶éƒ¨ç½²åˆ° GitHub Pagesã€Vercelã€Netlify ç­‰ä»»æ„é™æ€æ‰˜ç®¡å¹³å°ã€‚æ— è®ºæ˜¯æƒ³å»ºç«‹ä¸ªäººåšå®¢ã€æ–‡æ¡£ç«™ç‚¹ï¼Œè¿˜æ˜¯æ‰“é€ ç‹¬ç‰¹çš„æŠ€æœ¯åˆ†äº«ç©ºé—´ï¼ŒHexo éƒ½èƒ½æä¾›æµç•…è€Œé«˜æ•ˆçš„åˆ›ä½œä½“éªŒã€‚</p>
<span id="more"></span>

<h2 id="ä¸€ã€Hexo-å®‰è£…"><a href="#ä¸€ã€Hexo-å®‰è£…" class="headerlink" title="ä¸€ã€Hexo å®‰è£…"></a>ä¸€ã€Hexo å®‰è£…</h2><p>Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€å•ä¸”åŠŸèƒ½å¼ºå¤§çš„åšå®¢æ¡†æ¶ï¼Œå¯ä»¥ä½¿ç”¨ Markdown ï¼ˆæˆ–å…¶ä»–æ ‡è®°è¯­è¨€ï¼‰ç¼–å†™æ–‡ç« ï¼ŒHexo ä¼šåœ¨å‡ ç§’é’Ÿå†…ç”Ÿæˆå¸¦æœ‰å¯¹åº”ä¸»é¢˜çš„é™æ€æ–‡ä»¶ã€‚</p>
<p>å®‰è£… Hexo éœ€è¦ Node.js ä»¥åŠ Git ç¯å¢ƒã€‚</p>
<p>Node.js ä¸‹è½½åœ°å€ <a href="https://nodejs.org/en/download">Node.js Download</a></p>
<p>Git ä¸‹è½½åœ°å€ <a href="https://git-scm.com/install/windows">Git Download</a></p>
<p>æ‰€æœ‰å¿…éœ€ç»„ä»¶å®‰è£…å®Œæ¯•åï¼Œå³å¯ä½¿ç”¨ npm å®‰è£… Hexoï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<p>åˆå§‹åŒ– Hexo ç«™ç‚¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init hexo-site</span><br></pre></td></tr></table></figure>
<p>hexo-site ä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºå…¶ä»–è·¯å¾„åï¼Œä»¥ hexo-site ä¸ºä¾‹ï¼Œç½‘ç«™æ ¹ç›®å½•è¢«ç§°ä¸º <code>hexo-site</code>ã€‚ </p>
<p>åˆå§‹åŒ–å®Œæˆåï¼Œå¯ä»¥åˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹ï¼Œä¸‹è½½å¯¹åº”ä¸»é¢˜å¹¶è¿›è¡Œå‡çº§ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> hexo-site</span><br><span class="line"></span><br><span class="line">npm install hexo-theme-next</span><br><span class="line"></span><br><span class="line">npm install hexo-theme-next@latest</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<p>è¿è¡Œ npm install æ—¶ï¼Œå¯¹ node_modules ç›®å½•ä¸‹ä¸»é¢˜æ‰€åšçš„ä»»ä½•æœ¬åœ°æ›´æ”¹éƒ½å°†ä¸¢å¤±ã€‚å¦‚æœå¯¹ä¸»é¢˜è¿›è¡Œäº†æ›´æ”¹ï¼Œåˆ™åº”åœ¨è¿è¡Œ npm install ä¹‹å‰å¤‡ä»½è¿™äº›æ›´æ”¹ï¼Œç„¶ååœ¨å®‰è£…å®Œæˆåæ¢å¤è¿™äº›æ›´æ”¹ã€‚</p>
<p>å®‰è£…å®Œ Hexo å’Œ NexT ä¸»é¢˜åï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥è‡ªå®šä¹‰åšå®¢ã€‚å®‰è£… Hexo æ—¶ï¼Œé…å¥—çš„é…ç½®æ–‡ä»¶ä½äºç½‘ç«™æ ¹ç›®å½•ã€‚åšå®¢é…ç½®æ–‡ä»¶åä¸º _config.yml ï¼›æˆ‘ä»¬ç§°ä¹‹ä¸º Hexo é…ç½®æ–‡ä»¶ NexT ä¸»é¢˜çš„é…ç½®æ–‡ä»¶éœ€è¦æ‚¨è‡ªè¡Œåˆ›å»ºï¼›è¯·åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª _config.next.yml æ–‡ä»¶ã€‚ ç½‘ç«™æ ¹ç›®å½•æˆ‘ä»¬å°†å…¶ç§°ä¸º Next é…ç½®æ–‡ä»¶åœ¨ä»¥ä¸‹æ–‡æœ¬ä¸­ã€‚</p>
<p>åˆ›å»ºç©ºçš„ _config.next.yml æ–‡ä»¶åï¼Œå¯ä»¥å°†ä¸»é¢˜æ–‡ä»¶å¤¹ä¸­çš„é»˜è®¤é…ç½®é€‰é¡¹å¤åˆ¶åˆ°è¯¥æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿è¿›è¡Œä¿®æ”¹å’Œè‡ªå®šä¹‰ã€‚æ ¹æ®å®‰è£…æ–¹å¼ï¼ŒNexT ä¸»é¢˜çš„é»˜è®¤é…ç½®æ–‡ä»¶å¯èƒ½ä½äº themes&#x2F;next&#x2F;_config.yml æˆ– node_modules&#x2F;hexo-theme-next&#x2F;_config.yml ä¸­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> node_modules/hexo-theme-next/_config.yml _config.next.yml</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€Hexo-ä¸ªæ€§åŒ–è®¾ç½®"><a href="#äºŒã€Hexo-ä¸ªæ€§åŒ–è®¾ç½®" class="headerlink" title="äºŒã€Hexo ä¸ªæ€§åŒ–è®¾ç½®"></a>äºŒã€Hexo ä¸ªæ€§åŒ–è®¾ç½®</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Allow to cache content generation.</span></span><br><span class="line">cache:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Remove unnecessary files after hexo generate.</span></span><br><span class="line">minify: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Schemes</span></span><br><span class="line"><span class="comment"># scheme: Muse</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="comment">#scheme: Pisces</span></span><br><span class="line">scheme: Gemini</span><br><span class="line"></span><br><span class="line"><span class="comment"># Dark Mode</span></span><br><span class="line">darkmode: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: git@github.com:zyufoye/zyufoye.github.io.git</span><br><span class="line">  branch: main</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€Hexo-æ–°å»ºå‘å¸ƒæ–‡ç« "><a href="#ä¸‰ã€Hexo-æ–°å»ºå‘å¸ƒæ–‡ç« " class="headerlink" title="ä¸‰ã€Hexo æ–°å»ºå‘å¸ƒæ–‡ç« "></a>ä¸‰ã€Hexo æ–°å»ºå‘å¸ƒæ–‡ç« </h2><p>æ–°å»ºå‘å¸ƒæ–‡ç« ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new post <span class="string">&quot;æ–‡ç« åç§°&quot;</span></span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆå¹¶éƒ¨ç½²ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp;  hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure>

<p>åŒæ­¥æ›´æ–°éƒ¨ç½²åˆ°githubï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>åšå®¢ä¾§è¾¹æ æ·»åŠ  menu èœå•ï¼Œä»¥ tags å’Œ categories ä¸ºä¾‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page tags</span><br><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure>

<p>åŒæ—¶åœ¨index.md ä¸­è®¾ç½®ç±»åˆ«ï¼Œä¸ç„¶ç‚¹å‡»è·³è½¬åä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">type</span>: categories</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®æ–‡ç« æƒ³è¦æ˜¾ç¤ºçš„å†…å®¹æ—¶ï¼Œå¯ä»¥ç”¨ more è¿›è¡Œåˆ‡åˆ†ï¼Œ moreä»¥ä¸Šçš„ä½œä¸ºæ˜¾ç¤ºå†…å®¹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;!-- more --&gt;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸ŠåŸºæœ¬é…ç½®å’Œç®€å•ä½¿ç”¨è®°å½•å®Œæ¯•ï¼Œåç»­æœ‰æ›´å¤šéœ€è¦å†æŒç»­æ›´æ–°è®°å½•ã€‚  </p>
]]></content>
      <categories>
        <category>Config</category>
      </categories>
      <tags>
        <tag>Config</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>CodeQLå…¥é—¨</title>
    <url>/2025/12/07/CodeQL%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h1 id="CodeQL-å…¥é—¨"><a href="#CodeQL-å…¥é—¨" class="headerlink" title="CodeQL å…¥é—¨"></a>CodeQL å…¥é—¨</h1><p>åœ¨ç½‘ç»œå®‰å…¨å’Œä»£ç å®¡è®¡çš„é¢†åŸŸï¼Œé™æ€åº”ç”¨ç¨‹åºå®‰å…¨æµ‹è¯•ï¼ˆStatic application security testingï¼ŒSASTï¼‰å·¥å…·å±‚å‡ºä¸ç©·ã€‚ä½†åœ¨ 2019 å¹´ GitHub æ”¶è´­ Semmle ä¹‹åï¼ŒCodeQL è¿…é€Ÿæˆä¸ºäº†ä¸šç•Œé¡¶æµã€‚</p>
<p>ä¼ ç»Ÿçš„æ‰«æå·¥å…·å¾€å¾€åƒæ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œä½ è¾“å…¥ä»£ç ï¼Œå®ƒåå‡ºæŠ¥å‘Šã€‚ä½† CodeQL ä¸åŒï¼Œå®ƒçš„æ ¸å¿ƒç†å¿µéå¸¸æœ‰æ„æ€ï¼š <code>Code as Data</code> ä»£ç å³æ•°æ®ï¼ŒCodeQL æŠŠæºä»£ç è½¬åŒ–æˆä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ï¼Œè€Œæ¼æ´æŒ–æ˜çš„è¿‡ç¨‹ï¼Œå°±å˜æˆäº†ä¸€æ¬¡æ¬¡ç¼–å†™ SQLï¼ˆå…¶å®æ˜¯ QLï¼‰æŸ¥è¯¢è¯­å¥çš„è¿‡ç¨‹ã€‚</p>
<p>CodeQL å·¥å…·åŒ…å«ä¸¤å¤§éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li>æ ¸å¿ƒå¼•æ“(é—­æº)ï¼šç”¨äºè§£ææºä»£ç å¹¶å­˜å‚¨äºæ•°æ®åº“ï¼Œä»¥åŠæ‰§è¡Œ QL è¯­å¥ä»æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ï¼›</li>
<li>SDKä»£ç åº“(å¼€æº)ï¼šåŒ…å«å„ç¼–ç¨‹è¯­è¨€å¯¹åº”çš„ QL ä»£ç åº“(å±æ€§&#x2F;è°“è¯&#x2F;ç­‰)ï¼Œä»¥ä¾¿å¿«é€Ÿç¼–å†™æŸ¥è¯¢è¯­å¥ã€‚</li>
</ul>
<p>è¿™ç»™äº†å®‰å…¨ç ”ç©¶å‘˜å’Œå¼€å‘è€…æå¤§çš„è‡ªç”±åº¦â€”â€”ä¸å†å—é™äºå·¥å…·å†…ç½®çš„è§„åˆ™ï¼Œå¯ä»¥è‡ªå·±å®šä¹‰â€œä»€ä¹ˆæ ·çš„ä»£ç é•¿ç›¸å­˜åœ¨æ¼æ´â€ã€‚è¿™ç¯‡ Blog è®°å½•äº†æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨ CodeQL è¿›è¡Œé™æ€ä»£ç åˆ†æçš„è¿‡ç¨‹ã€‚</p>
<span id="more"></span>

<h2 id="ä¸€ã€CodeQL-æ ¸å¿ƒå·¥ä½œæµ"><a href="#ä¸€ã€CodeQL-æ ¸å¿ƒå·¥ä½œæµ" class="headerlink" title="ä¸€ã€CodeQL æ ¸å¿ƒå·¥ä½œæµ"></a>ä¸€ã€CodeQL æ ¸å¿ƒå·¥ä½œæµ</h2><p>ä½¿ç”¨ CodeQL ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li><p><strong>åˆ›å»ºæ•°æ®åº“ï¼ˆCreate Databaseï¼‰</strong>ï¼š åœ¨ç¼–è¯‘&#x2F;æ„å»ºä»£ç çš„è¿‡ç¨‹ä¸­ï¼ŒCodeQL ä¼šâ€œæ—è·¯ç›‘å¬â€ï¼Œæ•æ‰æ‰€æœ‰çš„ç¼–è¯‘å‘½ä»¤ã€æ–‡ä»¶ç»“æ„ã€å‡½æ•°è°ƒç”¨å…³ç³»ï¼Œç”Ÿæˆä¸€ä¸ªå¿«ç…§æ•°æ®åº“ï¼›</p>
</li>
<li><p><strong>ç¼–å†™&#x2F;è¿è¡ŒæŸ¥è¯¢ï¼ˆAnalyzeï¼‰</strong>ï¼š ä½¿ç”¨ä¸€ç§ç±»ä¼¼ SQL çš„é¢å‘å¯¹è±¡æŸ¥è¯¢è¯­è¨€ï¼ˆQLï¼‰ï¼Œåœ¨æ•°æ®åº“ä¸­æŸ¥æ‰¾ç¬¦åˆç‰¹å¾çš„ä»£ç ç‰‡æ®µï¼›</p>
</li>
<li><p><strong>ç”Ÿæˆç»“æœï¼ˆResultsï¼‰</strong>ï¼š è¾“å‡ºåˆ†ææŠ¥å‘Šï¼ˆé€šå¸¸æ˜¯ SARIF æ ¼å¼ï¼‰ï¼Œå®šä½åˆ°å…·ä½“çš„ä»£ç è¡Œå·ã€‚</p>
</li>
</ol>
<h2 id="äºŒã€CodeQL-å®‰è£…"><a href="#äºŒã€CodeQL-å®‰è£…" class="headerlink" title="äºŒã€CodeQL å®‰è£…"></a>äºŒã€CodeQL å®‰è£…</h2><p>è¿è¡Œ CodeQL éœ€è¦å®‰è£… CodeQL CLI å·¥å…·ï¼Œåˆ†å¼€ä¸‹è½½çš„è¯éœ€è¦åˆ†åˆ«ä¸‹è½½ CodeQL binary å’Œ SDKï¼Œéœ€è¦æ”¾åœ¨ç›¸åŒç›®å½•ä¸‹ä¸”ç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½æ†ç»‘åŒ…ï¼Œä»¥ Ubuntu ç¯å¢ƒä¸ºä¾‹ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://github.com/github/codeql-action/releases/download/codeql-bundle-v2.16.1/codeql-bundle-linux64.tar.gz</span><br><span class="line"></span><br><span class="line">tar -xvzf codeql-bundle-linux64.tar.gz</span><br><span class="line"></span><br><span class="line">vi /etc/profile</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/home/aono/codeqlsrc/codeql</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>

<p>æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">codeql --version</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨  <code>codeQL resolve languages</code> å¯ä»¥æŸ¥çœ‹æ”¯æŒçš„ç¼–ç¨‹è¯­è¨€ã€‚</p>
<h2 id="ä¸‰ã€CodeQL-ç®€å•ä½¿ç”¨"><a href="#ä¸‰ã€CodeQL-ç®€å•ä½¿ç”¨" class="headerlink" title="ä¸‰ã€CodeQL ç®€å•ä½¿ç”¨"></a>ä¸‰ã€CodeQL ç®€å•ä½¿ç”¨</h2><p>æŒ‡å®šé¡¹ç›®åˆ›å»ºæ•°æ®åº“ï¼Œä»¥ Java ç›®æ ‡ï¼ˆ<a href="https://github.com/l4yn3/micro_service_seclab%EF%BC%89%E4%B8%BA%E4%BE%8B%EF%BC%8C%E9%A1%B9%E7%9B%AE%E9%80%9A%E8%BF%87">https://github.com/l4yn3/micro_service_seclabï¼‰ä¸ºä¾‹ï¼Œé¡¹ç›®é€šè¿‡</a> mvn æ„å»ºï¼Œé¦–å…ˆå®‰è£… mvnï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt install maven -y</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºæ•°æ®åº“ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./codeql/codeql database create java_db --language=java --source-root=./test/micro_service_seclab/</span><br></pre></td></tr></table></figure>

<p><img src="/../uploads/codeql_1.png"></p>
<p>ä½¿ç”¨é»˜è®¤è§„åˆ™è¿›è¡ŒæŸ¥è¯¢ï¼Œç”Ÿæˆ SARIF æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./codeql/codeql database analyze java_db/ --format=sarif-latest --output=java_result.sarif</span><br></pre></td></tr></table></figure>

<p><img src="/../uploads/codeql_2.png"></p>
]]></content>
      <categories>
        <category>SAST</category>
      </categories>
      <tags>
        <tag>SAST</tag>
        <tag>CodeQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Windowsç»“æŸè¿›ç¨‹</title>
    <url>/2025/12/09/Windows%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B/</url>
    <content><![CDATA[<p>ä»Šå¤©åœ¨è·‘ Springboot çš„ Java é¡¹ç›®æ—¶ï¼Œé‡åˆ°äº†ç«¯å£å ç”¨é—®é¢˜ï¼Œè®°ä¸€ä¸‹ Windows çš„æ ¹æ®ç›¸å…³ç«¯å£æ€è¿›ç¨‹å‘½ä»¤ã€‚</p>
<p>é¦–å…ˆæŸ¥æ‰¾å ç”¨ 8080 çš„ PIDï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">netstat -ano | findstr :8080</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ ¹æ® PID å¼ºåˆ¶ç»“æŸè¿›ç¨‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">taskkill /F /PID 3836</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<ol start="3">
<li>å®éªŒ</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">C:\Users\77319&gt;netstat -ano | findstr :8080</span><br><span class="line">  TCP    0.0.0.0:8080           0.0.0.0:0              LISTENING       3836</span><br><span class="line">  TCP    [::]:8080              [::]:0                 LISTENING       3836</span><br><span class="line"></span><br><span class="line">C:\Users\77319&gt;taskkill /F /PID 3836</span><br><span class="line">æˆåŠŸ: å·²ç»ˆæ­¢ PID ä¸º 3836 çš„è¿›ç¨‹ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Windows</category>
      </categories>
      <tags>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Win11 Javaç¯å¢ƒå˜é‡é…ç½®</title>
    <url>/2025/12/04/Win11-Java%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p>æ‰¾åˆ°JDKçš„è·¯å¾„ï¼Œåœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æ–°å»ºå˜é‡åå’Œå˜é‡å€¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">JAVA_HOME</span><br><span class="line">C:\Program Files\Java\jdk1.8.0_202</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨ç³»ç»Ÿå˜é‡pathä¸­ï¼Œæ–°å»ºä¸¤æ¡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">%JAVA_HOME%\bin</span><br><span class="line">%JAVA_HOME%\jre\bin</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<p>éªŒè¯é…ç½®æ˜¯å¦æˆåŠŸï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">C:\Users\77319&gt;java -version</span><br><span class="line">java version <span class="string">&quot;1.8.0_202&quot;</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_202-b08)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.202-b08, mixed mode)</span><br><span class="line"></span><br><span class="line">C:\Users\77319&gt;javac -version</span><br><span class="line">javac 1.8.0_202</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Config</category>
      </categories>
      <tags>
        <tag>Config</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>SARIFæ–‡ä»¶æ¶æ„è§£è¯»</title>
    <url>/2025/12/10/SARIF%E6%96%87%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%A7%A3%E8%AF%BB/</url>
    <content><![CDATA[<h2 id="SARIF-æ–‡ä»¶æ¶æ„æ¶æ„è§£è¯»"><a href="#SARIF-æ–‡ä»¶æ¶æ„æ¶æ„è§£è¯»" class="headerlink" title="SARIF æ–‡ä»¶æ¶æ„æ¶æ„è§£è¯»"></a>SARIF æ–‡ä»¶æ¶æ„æ¶æ„è§£è¯»</h2><p>SARIFï¼ˆStatic Analysis Results Interchange Formatï¼‰æœ¬è´¨æ˜¯ä¸€ä¸ª JSON æ—¥å¿—è§„èŒƒï¼Œç”¨äºç»Ÿä¸€è¡¨è¾¾é™æ€åˆ†æï¼ˆSASTã€Lintã€CodeQLã€ä¾èµ–æ‰«æç­‰ï¼‰çš„æ‰«æç»“æœï¼Œæ–¹ä¾¿ä¸åŒå·¥å…·ä¹‹é—´å…±äº«ã€èšåˆã€å±•ç¤ºä¸è¿½è¸ªã€‚</p>
<p>SARIF ç®€å•æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;$schema&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;https://json.schemastore.org/sarif-2.1.0.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;2.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;runs&quot;</span> <span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;tool&#x27;<span class="punctuation">,</span> &#x27;invocations&#x27;<span class="punctuation">,</span> &#x27;artifacts&#x27;<span class="punctuation">,</span> &#x27;results&#x27;<span class="punctuation">,</span> &#x27;columnKind&#x27;<span class="punctuation">,</span>&#x27;properties&#x27;<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>SARIF &#x3D; å¤šæ¬¡è¿è¡Œ runs çš„é›†åˆï¼Œæ¯æ¬¡è¿è¡ŒåŒ…å«ï¼šå·¥å…·ä¿¡æ¯ + è¿è¡Œå…ƒæ•°æ® + è¢«åˆ†æå¯¹è±¡ï¼ˆartifactsï¼‰+ åˆ†æç»“æœï¼ˆresultsï¼‰</p>
</blockquote>
<p>å¯¹å„éƒ¨åˆ†å†…å®¹ä»‹ç»å¦‚ä¸‹ï¼š</p>
<ol>
<li>tool å·¥å…·ä¿¡æ¯ï¼šæ£€æŸ¥å‘˜èº«ä»½ä¿¡æ¯å’Œæ£€æŸ¥æ‰‹å†Œï¼Œè®°å½•äº†ç”¨å“ªä¸ªå·¥å…·è¿›è¡Œäº†æ‰«æï¼Œç‰ˆæœ¬å·æ˜¯å¤šå°‘ï¼ŒåŒ…å«äº† driver é©±åŠ¨ç¨‹åºä¿¡æ¯ å’Œ rules æ£€æŸ¥è§„åˆ™æ¸…å•ï¼›</li>
<li>invocations è°ƒç”¨ä¿¡æ¯ï¼šæ£€æŸ¥å‘˜çš„å·¥ä½œæ—¥å¿—ï¼Œè®°å½•äº†è¿™æ¬¡æ£€æŸ¥æ˜¯åœ¨ä»€ä¹ˆç¯å¢ƒä¸‹è¿›è¡Œçš„ï¼Œä»¥åŠæ˜¯å¦é¡ºåˆ©å®Œæˆï¼ŒexecutionSuccessful: true&#x2F;falseï¼›</li>
<li>artifacts è¢«æ‰«æçš„æ–‡ä»¶ï¼šæ£€æŸ¥äº†å“ªäº›åœ°ç‚¹ï¼Œåˆ—å‡ºäº†æ‰€æœ‰è¢« CodeQL æ‰«æè¿‡çš„æºæ–‡ä»¶ï¼ˆSource Codeï¼‰ï¼ŒåŒ…å«æ–‡ä»¶çš„è·¯å¾„ï¼ˆlocationï¼‰ï¼Œæœ‰æ—¶ä¹ŸåŒ…å«æ–‡ä»¶çš„å…·ä½“å†…å®¹æˆ–å“ˆå¸Œå€¼ï¼Œæ–¹ä¾¿åç»­å®šä½ï¼›</li>
<li><strong>results ç»“æœ</strong> ï¼šè¿™æ˜¯é—®é¢˜æ¸…å•ï¼Œè¿™æ˜¯æ•´ä»½æŠ¥å‘Šé‡Œæœ€é‡è¦çš„éƒ¨åˆ†ï¼Œåˆ—å‡ºäº†æ‰«æå‡ºæ¥çš„æ‰€æœ‰ Bugå’Œæ¼æ´ä¿¡æ¯ï¼Œå…³é”®å•ï¼šruleId è®°å½•è¿åäº†å“ªæ¡è§„åˆ™ï¼ˆå¯¹åº” tool é‡Œçš„è§„åˆ™ï¼‰ï¼Œmessage è®°å½•é—®é¢˜çš„å…·ä½“æè¿°ï¼Œlocations è®°å½•äº†é—®é¢˜åœ¨å“ªä¸ªæ–‡ä»¶çš„ç¬¬å‡ è¡Œã€ç¬¬å‡ åˆ—ï¼›</li>
<li>columnKind åˆ—çš„è®¡ç®—æ–¹å¼ï¼šç”¨äºå‘Šè¯‰ IDEï¼ˆå¦‚ VS Codeï¼‰å¦‚ä½•æ­£ç¡®é«˜äº®ä»£ç ï¼›</li>
<li>properties é™„åŠ å±æ€§ï¼šè®°å½•äº†æ‚é¡¹ä¿¡æ¯ï¼Œå­˜æ”¾æ ‡å‡†å­—æ®µé‡Œæ”¾ä¸ä¸‹çš„ã€æˆ–è€…å·¥å…·ç‰¹æœ‰çš„è‡ªå®šä¹‰æ•°æ®ï¼Œå¯èƒ½ä¼šåŒ…å«æ„å»ºæ—¶çš„æ ‡ç­¾ï¼ˆBuild Tagsï¼‰ã€é¡¹ç›®çš„å…ƒæ•°æ®ï¼ˆProject Metadataï¼‰å’Œä¸€äº›ç»™ç‰¹å®šæ˜¾ç¤ºé¢æ¿ç”¨çš„ç»Ÿè®¡æ•°æ®ï¼›</li>
</ol>
<p>é€šä¿—çš„è®²ï¼Œå°±æ˜¯è¿™ä¸€æ¬¡æ‰«æ (run)ï¼Œæ˜¯ç”±åä¸º CodeQL çš„ (tool) è¿›è¡Œçš„ã€‚å®ƒåœ¨ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´ä»¥ç‰¹å®šçš„å‚æ•°è¿è¡Œ (invocations)ï¼ŒæŒ‰ç…§ç‰¹å®šçš„åˆ»åº¦æ ‡å‡† (columnKind)ï¼Œæ‰«æäº†è¿™ä¸€å †æ–‡ä»¶ (artifacts)ï¼Œæœ€åå‘ç°äº†è¿™äº›æ¼æ´ (results)ï¼Œå¹¶åœ¨æœ€åè´´äº†ä¸€äº›æ ‡ç­¾ (properties)ã€‚</p>
<span id="more"></span>

<h2 id="å…³é”®ä¿¡æ¯æå–"><a href="#å…³é”®ä¿¡æ¯æå–" class="headerlink" title="å…³é”®ä¿¡æ¯æå–"></a>å…³é”®ä¿¡æ¯æå–</h2><p>è¦åœ¨ CodeQL ç”Ÿæˆçš„ SARIF æŠ¥å‘Šä¸­æå–<strong>æ¼æ´ç‚¹ï¼ˆSinkï¼‰</strong>ã€<strong>æ¼æ´ä½ç½®</strong>ã€<strong>æ•°æ®æµï¼ˆSource åˆ° Sinkï¼‰ä»¥åŠæ§åˆ¶æµ</strong>ä¿¡æ¯ï¼Œéœ€è¦ç ”ç©¶ <code>runs</code> -&gt; <code>results</code> æ•°ç»„ä¸­çš„å¯¹è±¡ã€‚</p>
<p>SARIF å°†è¿™äº›å¤æ‚çš„é€»è¾‘å°è£…åœ¨äº†ä¸€ä¸ªå±‚çº§åˆ†æ˜çš„ç»“æ„ä¸­ã€‚ä»¥ä¸‹æ˜¯æå–è¿™äº›å…³é”®ä¿¡æ¯æ‰€å¯¹åº”çš„å…·ä½“å­—æ®µå’Œè§£æé€»è¾‘ï¼š</p>
<hr>
<h3 id="æå–æ ¸å¿ƒæ¨¡å—ï¼šresults-æ•°ç»„"><a href="#æå–æ ¸å¿ƒæ¨¡å—ï¼šresults-æ•°ç»„" class="headerlink" title="æå–æ ¸å¿ƒæ¨¡å—ï¼šresults æ•°ç»„"></a>æå–æ ¸å¿ƒæ¨¡å—ï¼š<code>results</code> æ•°ç»„</h3><p>æ‰€æœ‰çš„æ¼æ´ä¿¡æ¯éƒ½åœ¨ <code>runs[0].results</code> åˆ—è¡¨é‡Œï¼Œéœ€è¦éå†è¿™ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡ä»£è¡¨ä¸€ä¸ªå…·ä½“çš„æ¼æ´å®ä¾‹ã€‚</p>
<h3 id="è¯¦ç»†æå–æŒ‡å—"><a href="#è¯¦ç»†æå–æŒ‡å—" class="headerlink" title="è¯¦ç»†æå–æŒ‡å—"></a>è¯¦ç»†æå–æŒ‡å—</h3><p>éœ€è¦å…³æ³¨ <code>results</code> å¯¹è±¡ä¸‹çš„ä»¥ä¸‹å­—æ®µï¼š</p>
<h4 id="A-æ¼æ´çš„åŸºæœ¬ä¿¡æ¯"><a href="#A-æ¼æ´çš„åŸºæœ¬ä¿¡æ¯" class="headerlink" title="A. æ¼æ´çš„åŸºæœ¬ä¿¡æ¯"></a>A. æ¼æ´çš„åŸºæœ¬ä¿¡æ¯</h4><ul>
<li><strong>æ¼æ´åç§°&#x2F;ç±»å‹</strong>ï¼š<code>ruleId</code><ul>
<li>ä¾‹å¦‚ï¼š<code>java/sql-injection</code></li>
</ul>
</li>
<li><strong>æ¼æ´ç®€è¦æè¿°</strong>ï¼š<code>message.text</code><ul>
<li>ä¾‹å¦‚ï¼šâ€This query depends on a user-provided value.â€</li>
</ul>
</li>
</ul>
<h4 id="B-æ¼æ´ä½ç½®-çˆ†å‘ç‚¹-Sink"><a href="#B-æ¼æ´ä½ç½®-çˆ†å‘ç‚¹-Sink" class="headerlink" title="B. æ¼æ´ä½ç½® &#x2F; çˆ†å‘ç‚¹ &#x2F; Sink"></a>B. æ¼æ´ä½ç½® &#x2F; çˆ†å‘ç‚¹ &#x2F; Sink</h4><p>è¿™æ˜¯ CodeQL è®¤ä¸ºæ¼æ´æœ€ç»ˆå‘ç”Ÿçš„åœ°æ–¹ï¼ˆä¾‹å¦‚æ‰§è¡Œ SQL æŸ¥è¯¢çš„é‚£ä¸€è¡Œï¼‰ã€‚</p>
<ul>
<li><strong>æå–å­—æ®µ</strong>ï¼š<code>locations</code> æ•°ç»„</li>
<li><strong>å…³é”®é€»è¾‘</strong>ï¼šé€šå¸¸å– <code>locations[0]</code>ï¼ˆæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ä½œä¸ºä¸»è¦ä½ç½®ã€‚</li>
<li><strong>å…·ä½“å†…å®¹</strong>ï¼š<ul>
<li><strong>æ–‡ä»¶è·¯å¾„</strong>ï¼š<code>locations[0].physicalLocation.artifactLocation.uri</code></li>
<li><strong>èµ·å§‹è¡Œå·</strong>ï¼š<code>locations[0].physicalLocation.region.startLine</code></li>
<li><strong>ä»£ç ç‰‡æ®µ</strong>ï¼ˆå¦‚æœæœ‰ï¼‰ï¼š<code>locations[0].physicalLocation.region.snippet.text</code></li>
</ul>
</li>
</ul>
<h4 id="C-æ•°æ®æµä¸æ§åˆ¶æµ"><a href="#C-æ•°æ®æµä¸æ§åˆ¶æµ" class="headerlink" title="C. æ•°æ®æµä¸æ§åˆ¶æµ"></a>C. æ•°æ®æµä¸æ§åˆ¶æµ</h4><p>è¿™æ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æœ€æœ‰ä»·å€¼çš„éƒ¨åˆ†ï¼Œæè¿°äº†æ±¡ç‚¹æ•°æ®ï¼ˆTaint Dataï¼‰æ˜¯å¦‚ä½•ä»<strong>è¾“å…¥æºï¼ˆSourceï¼‰</strong>ä¸€æ­¥æ­¥æµå‘<strong>çˆ†å‘ç‚¹ï¼ˆSinkï¼‰</strong>çš„ã€‚</p>
<p>CodeQL å°†æ•°æ®æµå’Œæ§åˆ¶æµç»Ÿä¸€æ”¾åœ¨ <code>codeFlows</code> å­—æ®µä¸­ã€‚</p>
<ul>
<li><strong>æå–å­—æ®µ</strong>ï¼š<code>codeFlows</code> æ•°ç»„</li>
<li><strong>ç»“æ„é€»è¾‘</strong>ï¼š<ol>
<li><code>codeFlows</code> ä¸‹é€šå¸¸åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª <code>threadFlows</code>ï¼ˆCodeQL é€šå¸¸åªç»™å‡ºä¸€ä¸ªæœ€å…·ä»£è¡¨æ€§çš„è·¯å¾„ï¼‰ã€‚</li>
<li><code>threadFlows</code> ä¸‹æ˜¯ä¸€ä¸ª <code>locations</code> åˆ—è¡¨ï¼Œè¿™æ˜¯ä¸€ä¸ª<strong>æœ‰åºæ•°ç»„</strong>ï¼Œä»£è¡¨äº†ä»£ç æ‰§è¡Œçš„æ­¥éª¤ã€‚</li>
</ol>
</li>
</ul>
<p><strong>å¦‚ä½•è§£æè¿™ä¸ªè·¯å¾„é“¾æ¡ï¼š</strong></p>
<ul>
<li><strong>Sourceï¼ˆæ±¡ç‚¹æºå¤´&#x2F;ç”¨æˆ·è¾“å…¥ï¼‰</strong>ï¼š<ul>
<li>é€šå¸¸æ˜¯ <code>threadFlows[0].locations</code> æ•°ç»„çš„<strong>ç¬¬ä¸€ä¸ªå…ƒç´ </strong>ã€‚</li>
<li>æå–ï¼š<code>...locations[0].location.physicalLocation</code> (æ–‡ä»¶å’Œè¡Œå·)</li>
<li>å«ä¹‰ï¼šä¾‹å¦‚ <code>request.getParameter(&quot;id&quot;)</code>ï¼Œè¿™æ˜¯æ•°æ®è¿›å…¥ç³»ç»Ÿçš„ä½ç½®ã€‚</li>
</ul>
</li>
<li><strong>Flow Pathï¼ˆä¼ æ’­è·¯å¾„&#x2F;æ§åˆ¶æµï¼‰</strong>ï¼š<ul>
<li>æ˜¯ <code>threadFlows[0].locations</code> æ•°ç»„çš„<strong>ä¸­é—´å…ƒç´ </strong>ã€‚</li>
<li>è¿™äº›æ­¥éª¤å±•ç¤ºäº†æ•°æ®ç»è¿‡äº†å“ªäº›å‡½æ•°è°ƒç”¨ã€èµ‹å€¼æ“ä½œæˆ–åˆ¤æ–­é€»è¾‘ã€‚</li>
<li><strong>å…³é”®æå–</strong>ï¼š<code>location.message.text</code> â€”â€” è¿™é‡Œé€šå¸¸ä¼šè¯´æ˜â€œæ•°æ®è¢«ä¼ é€’ç»™å‚æ•° xâ€æˆ–â€œæ•°æ®é€šè¿‡å‡½æ•°è¿”å›å€¼ä¼ æ’­â€ã€‚</li>
</ul>
</li>
<li><strong>Sinkï¼ˆçˆ†å‘ç‚¹&#x2F;æœ€ç»ˆä½ç½®ï¼‰</strong>ï¼š<ul>
<li>é€šå¸¸æ˜¯ <code>threadFlows[0].locations</code> æ•°ç»„çš„<strong>æœ€åä¸€ä¸ªå…ƒç´ </strong>ã€‚</li>
<li>è¿™åº”è¯¥ä¸ä¸Šé¢æåˆ°çš„ <strong>B. æ¼æ´ä½ç½®</strong> é‡åˆã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="æ€»ç»“ï¼šéœ€è¦æå–çš„-JSON-è·¯å¾„æ˜ å°„è¡¨"><a href="#æ€»ç»“ï¼šéœ€è¦æå–çš„-JSON-è·¯å¾„æ˜ å°„è¡¨" class="headerlink" title="æ€»ç»“ï¼šéœ€è¦æå–çš„ JSON è·¯å¾„æ˜ å°„è¡¨"></a>æ€»ç»“ï¼šéœ€è¦æå–çš„ JSON è·¯å¾„æ˜ å°„è¡¨</h3><p>ä¸ºäº†æ–¹ä¾¿ç¼–å†™è„šæœ¬ï¼ˆå¦‚ Pythonï¼‰æå–ï¼Œè¿™æ˜¯ä¸€ä¸ªé€ŸæŸ¥è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th align="left">ä¿¡æ¯ç±»å‹</th>
<th align="left">SARIF JSON è·¯å¾„ (å‡è®¾å½“å‰åœ¨ results[i] å¯¹è±¡ä¸‹)</th>
<th align="left">è§£é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>æ¼æ´ç±»å‹</strong></td>
<td align="left"><code>ruleId</code></td>
<td align="left">æ¼æ´çš„ IDï¼Œå¦‚ SQL æ³¨å…¥</td>
</tr>
<tr>
<td align="left"><strong>æ¼æ´æè¿°</strong></td>
<td align="left"><code>message.text</code></td>
<td align="left">äººç±»å¯è¯»çš„è§£é‡Š</td>
</tr>
<tr>
<td align="left"><strong>æ¼æ´æ–‡ä»¶</strong></td>
<td align="left"><code>locations[0].physicalLocation.artifactLocation.uri</code></td>
<td align="left">å‘ç”Ÿæ¼æ´çš„æ–‡ä»¶å</td>
</tr>
<tr>
<td align="left"><strong>æ¼æ´è¡Œå·</strong></td>
<td align="left"><code>locations[0].physicalLocation.region.startLine</code></td>
<td align="left">å‘ç”Ÿæ¼æ´çš„è¡Œå·</td>
</tr>
<tr>
<td align="left"><strong>æ•°æ®æµè·¯å¾„</strong></td>
<td align="left"><code>codeFlows[0].threadFlows[0].locations</code></td>
<td align="left">è¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«å®Œæ•´è·¯å¾„</td>
</tr>
<tr>
<td align="left"><strong>æ•°æ®æº (Source)</strong></td>
<td align="left"><code>codeFlows[0].threadFlows[0].locations[0]</code></td>
<td align="left">è·¯å¾„çš„ç¬¬ä¸€æ­¥</td>
</tr>
<tr>
<td align="left"><strong>ä¼ æ’­è¿‡ç¨‹</strong></td>
<td align="left"><code>codeFlows[0].threadFlows[0].locations[1:-1]</code></td>
<td align="left">è·¯å¾„çš„ä¸­é—´æ­¥éª¤</td>
</tr>
<tr>
<td align="left"><strong>çˆ†å‘ç‚¹ (Sink)</strong></td>
<td align="left"><code>codeFlows[0].threadFlows[0].locations[-1]</code></td>
<td align="left">è·¯å¾„çš„æœ€åä¸€æ­¥</td>
</tr>
</tbody></table>
<h3 id="4-ä¸¾ä¾‹è¯´æ˜"><a href="#4-ä¸¾ä¾‹è¯´æ˜" class="headerlink" title="4. ä¸¾ä¾‹è¯´æ˜"></a>4. ä¸¾ä¾‹è¯´æ˜</h3><p>å‡è®¾è¿™æ˜¯ä¸€ä¸ª SQL æ³¨å…¥çš„ <code>result</code> ç‰‡æ®µï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;ruleId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java/sql-injection&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Query depends on user input.&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;locations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  <span class="comment">// ---&gt; è¿™é‡Œæ˜¯ B: æ¼æ´æœ€ç»ˆçˆ†å‘çš„ä½ç½® (Sink)</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;physicalLocation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;artifactLocation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/DB.java&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;region&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;startLine&quot;</span><span class="punctuation">:</span> <span class="number">42</span> <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;codeFlows&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// ---&gt; è¿™é‡Œæ˜¯ C: å®Œæ•´çš„æ•°æ®æµ/æ§åˆ¶æµè·¯å¾„</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;threadFlows&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;locations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="comment">// æ­¥éª¤ 1: Source (æ•°æ®æº)</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;physicalLocation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/Controller.java&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;region&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;startLine&quot;</span><span class="punctuation">:</span> <span class="number">15</span> <span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;User input source...&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">              <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="comment">// æ­¥éª¤ 2: ä¸­é—´ä¼ æ’­</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;physicalLocation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/Service.java&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;region&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;startLine&quot;</span><span class="punctuation">:</span> <span class="number">20</span> <span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Data passed to function...&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">              <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="comment">// æ­¥éª¤ 3: Sink (é€šå¸¸ä¸ locations[0] ä¸€è‡´)</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;physicalLocation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/DB.java&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;region&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;startLine&quot;</span><span class="punctuation">:</span> <span class="number">42</span> <span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Data used in SQL query...&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">              <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><ol>
<li><strong>åˆ¤ç©ºå¤„ç†</strong>ï¼šä¸æ˜¯æ‰€æœ‰çš„ <code>results</code> éƒ½æœ‰ <code>codeFlows</code>ã€‚ç®€å•çš„ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆæ¯”å¦‚â€œå˜é‡æœªä½¿ç”¨â€ï¼‰é€šå¸¸åªæœ‰ <code>locations</code>ï¼Œæ²¡æœ‰æ•°æ®æµè·¯å¾„ã€‚åªæœ‰å®‰å…¨ç±»æ¼æ´ï¼ˆå¦‚æ³¨å…¥ã€XSSï¼‰é€šå¸¸ä¼šæœ‰ <code>codeFlows</code>ã€‚</li>
<li><strong>è·¯å¾„ç®€ç¹</strong>ï¼šCodeQL ç”Ÿæˆçš„ <code>codeFlows</code> æœ‰æ—¶éå¸¸è¯¦ç»†ï¼Œå¦‚æœåªå…³æ³¨å…³é”®è·³æ¿ï¼Œå…³æ³¨ <code>location.message</code> æ¯”è¾ƒæœ‰å¸®åŠ©ã€‚</li>
<li><strong>å…³è”ä½ç½®</strong>ï¼šæœ‰æ—¶è¿˜ä¼šçœ‹åˆ° <code>relatedLocations</code> å­—æ®µï¼Œè¿™é€šå¸¸ç”¨äºè¾…åŠ©è¯´æ˜ï¼ˆä¾‹å¦‚ï¼šæŒ‡å‡ºå˜é‡å®šä¹‰çš„ä½ç½®ï¼‰ï¼Œå¦‚æœä¸éœ€è¦æé«˜ç²¾åº¦ï¼Œå¯ä»¥æš‚æ—¶å¿½ç•¥ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>CodeQL</category>
      </categories>
      <tags>
        <tag>SAST</tag>
        <tag>CodeQL</tag>
        <tag>SARIF</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³VScodeå’ŒTraeç­‰æ— æ³•åŠ è½½condaè™šæ‹Ÿç¯å¢ƒçš„é—®é¢˜</title>
    <url>/2025/12/02/%E8%A7%A3%E5%86%B3VScode%E5%92%8CTrae%E7%AD%89%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BDconda%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h1 id="ä¸€ã€é—®é¢˜æè¿°"><a href="#ä¸€ã€é—®é¢˜æè¿°" class="headerlink" title="ä¸€ã€é—®é¢˜æè¿°"></a>ä¸€ã€é—®é¢˜æè¿°</h1><p>ä½¿ç”¨ conda æˆ– miniconda é…ç½®è™šæ‹Ÿç¯å¢ƒæ—¶ï¼Œå½“å¯åŠ¨è™šæ‹Ÿç¯å¢ƒæ—¶ï¼Œé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CondaError: Run <span class="string">&#x27;conda init&#x27;</span> before <span class="string">&#x27;conda activate&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œè¿è¡Œ <code>conda init</code> åè¿˜æ˜¯ä¸èµ·ä½œç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Î» conda init</span><br><span class="line">no change     C:\Users\Username\miniconda3\Scripts\conda.exe</span><br><span class="line">no change     C:\Users\Username\miniconda3\Scripts\conda-env.exe</span><br><span class="line">......</span><br><span class="line">no change     C:\Users\Username\Documents\WindowsPowerShell\profile.ps1</span><br><span class="line">modified      HKEY_CURRENT_USER\Software\Microsoft\Command Processor\AutoRun</span><br></pre></td></tr></table></figure>

<h1 id="äºŒã€è§£å†³æ–¹æ¡ˆ"><a href="#äºŒã€è§£å†³æ–¹æ¡ˆ" class="headerlink" title="äºŒã€è§£å†³æ–¹æ¡ˆ"></a>äºŒã€è§£å†³æ–¹æ¡ˆ</h1><p>æˆ‘æ˜¯ win11 æ“ä½œç³»ç»Ÿï¼Œéœ€è¦ä»¥ <strong>ç®¡ç†å‘˜èº«ä»½</strong> æ‰“å¼€powershellçª—å£ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Set-ExecutionPolicy RemoteSigned</span><br></pre></td></tr></table></figure>

<p>é‡æ–°åŠ è½½å³å¯ç”Ÿæ•ˆã€‚</p>
<span id="more"></span>

<h1 id="ä¸‰ã€åŸç†"><a href="#ä¸‰ã€åŸç†" class="headerlink" title="ä¸‰ã€åŸç†"></a>ä¸‰ã€åŸç†</h1><p>ç®€å•è¯´ï¼Œè¿™ä¸ªé—®é¢˜æœ¬è´¨ä¸Šæ˜¯ï¼š<strong>Conda çš„åˆå§‹åŒ–è„šæœ¬è¢« PowerShell çš„å®‰å…¨ç­–ç•¥æ‹¦ä½äº†ï¼Œæ‰€ä»¥æ¯æ¬¡æ–°å¼€ç»ˆç«¯æ—¶ï¼ŒConda éƒ½æ²¡çœŸæ­£â€œæ¥ç®¡â€å½“å‰ Shellã€‚</strong></p>
<h2 id="1-conda-init-å®é™…åœ¨åšä»€ä¹ˆï¼Ÿ"><a href="#1-conda-init-å®é™…åœ¨åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. conda init å®é™…åœ¨åšä»€ä¹ˆï¼Ÿ"></a>1. <code>conda init</code> å®é™…åœ¨åšä»€ä¹ˆï¼Ÿ</h2><p>åœ¨ Windows + PowerShell ä¸‹ï¼ŒConda å¹¶ä¸æ˜¯ç®€å•åœ°é  <code>conda.exe</code> æ¥å®Œæˆç¯å¢ƒæ¿€æ´»çš„ï¼Œè€Œæ˜¯é€šè¿‡ä¸€å¥— <strong>Shell Hook è„šæœ¬</strong> æ¥æ¥ç®¡å½“å‰ä¼šè¯ï¼š</p>
<p><code>conda init</code> ä¼šåœ¨ <code>C:\Users\Username\Documents\WindowsPowerShell\profile.ps1</code> é‡Œå†™å…¥ä¸€æ®µåˆå§‹åŒ–ä»£ç ï¼Œè¿™äº›è„šæœ¬ä¼šå»è°ƒç”¨ <code>miniconda3\shell\condabin\conda-hook.ps1</code> ç­‰æ–‡ä»¶ï¼Œå¾€å½“å‰ PowerShell é‡Œæ³¨å…¥ <code>conda</code> &#x2F; <code>conda activate</code> ç­‰å‡½æ•°ï¼Œå¹¶è®¾ç½®å¥½ PATHã€ç¯å¢ƒå˜é‡ç­‰ã€‚</p>
<p><strong>åªæœ‰è¿™äº› Hook æ¯æ¬¡æ‰“å¼€ PowerShell æ—¶èƒ½é¡ºåˆ©æ‰§è¡Œï¼Œå½“å‰ç»ˆç«¯æ‰çœŸæ­£â€œæ”¯æŒâ€ <code>conda activate</code>ã€‚</strong></p>
<p>æ‰€ä»¥å½“ä½ çœ‹åˆ°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CondaError: Run <span class="string">&#x27;conda init&#x27;</span> before <span class="string">&#x27;conda activate&#x27;</span></span><br></pre></td></tr></table></figure>

<p>å…¶å®æ„æ€æ˜¯ï¼š<strong>å½“å‰è¿™ä¸ª PowerShell ä¼šè¯é‡Œæ²¡æœ‰è¢«æ³¨å…¥ Conda çš„ Hook è„šæœ¬</strong>ï¼Œæ‰€ä»¥å®ƒæ„Ÿè§‰è‡ªå·±è¿˜æ²¡ initã€‚</p>
<h2 id="2-PowerShell-æ‰§è¡Œç­–ç•¥çš„é™åˆ¶"><a href="#2-PowerShell-æ‰§è¡Œç­–ç•¥çš„é™åˆ¶" class="headerlink" title="2. PowerShell æ‰§è¡Œç­–ç•¥çš„é™åˆ¶"></a>2. PowerShell æ‰§è¡Œç­–ç•¥çš„é™åˆ¶</h2><p>PowerShell ä¸ºäº†å®‰å…¨ï¼Œæœ‰ä¸€ä¸ª <strong>æ‰§è¡Œç­–ç•¥ï¼ˆExecution Policyï¼‰</strong>ï¼Œå†³å®šå“ªäº›è„šæœ¬å¯ä»¥è¢«æ‰§è¡Œï¼š</p>
<p>å¸¸è§å‡ ç§ï¼š</p>
<ul>
<li><code>Restricted</code>ï¼šå®Œå…¨ç¦æ­¢æ‰§è¡Œè„šæœ¬ï¼›</li>
<li><code>AllSigned</code>ï¼šæ‰€æœ‰è„šæœ¬éƒ½å¿…é¡»æ˜¯ç­¾åçš„ï¼›</li>
<li><code>RemoteSigned</code>ï¼šæœ¬åœ°è„šæœ¬å¯ä»¥æ‰§è¡Œï¼Œä»äº’è”ç½‘ä¸‹è½½çš„è„šæœ¬å¿…é¡»ç­¾åã€‚</li>
</ul>
<p>åœ¨æˆ‘æœºå™¨ä¸Šçš„æƒ…å†µæ˜¯ï¼š</p>
<ul>
<li><p>Conda çš„è¿™äº› hook &#x2F; profile è„šæœ¬å±äº <strong>æœ¬åœ°è„šæœ¬</strong>ï¼›</p>
</li>
<li><p>ä½†é»˜è®¤é…ç½®ç­–ç•¥è¿‡äºä¸¥æ ¼ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>æ‰“å¼€ PowerShell æ—¶ï¼Œ<code>profile.ps1</code> &#x2F; <code>conda-hook.ps1</code> æ²¡æœ‰è¢«æ‰§è¡Œï¼›</li>
<li>äºæ˜¯ <code>conda</code> å‡½æ•°ã€è‡ªåŠ¨æ¿€æ´»é€»è¾‘ç»Ÿç»Ÿéƒ½æ²¡åŠ è½½è¿›å½“å‰ä¼šè¯ï¼›</li>
<li>ç»ˆç«¯è‡ªç„¶å°±ä¼šæç¤ºä½ å…ˆ <code>conda init</code>ã€‚</li>
</ul>
</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š<code>conda init</code> å†™å…¥çš„é…ç½®å·²ç»åœ¨é‚£å„¿äº†ï¼Œä½†æ¯æ¬¡å¯åŠ¨ PowerShell æ—¶éƒ½è¢«ç­–ç•¥æŒ¡åœ¨é—¨å¤–ã€‚ å½“ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Set-ExecutionPolicy RemoteSigned</span><br></pre></td></tr></table></figure>

<p>ç­‰äºå…è®¸ç³»ç»Ÿæ‰§è¡Œæœ¬åœ°è„šæœ¬ï¼Œåªå¯¹æ¥æºä¸æ˜çš„è¿œç¨‹è„šæœ¬åšé™åˆ¶ã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œå†æ¬¡æ‰“å¼€ PowerShell &#x2F; VSCode å†…ç½®ç»ˆç«¯æ—¶ï¼Œ<code>profile.ps1</code> ä¼šè¢«æ­£å¸¸åŠ è½½ï¼Œé‡Œé¢è°ƒç”¨çš„ <code>conda-hook.ps1</code> ç­‰æœ¬åœ°è„šæœ¬å¯ä»¥é¡ºåˆ©æ‰§è¡Œï¼Œ VSCode &#x2F; Trae é‡Œå°±å¯ä»¥æ­£å¸¸åŠ è½½å’Œæ¿€æ´» Conda è™šæ‹Ÿç¯å¢ƒï¼Œä¸å†æŠ¥ Run â€˜conda initâ€™ before â€˜conda activateâ€™é”™è¯¯ã€‚</p>
]]></content>
      <categories>
        <category>Trouble shooting</category>
      </categories>
      <tags>
        <tag>Config</tag>
        <tag>Trouble shooting</tag>
      </tags>
  </entry>
  <entry>
    <title>uvä½¿ç”¨</title>
    <url>/2025/12/10/uv%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>uvæ˜¯ä¸€ä¸ªç”¨ Rust ç¼–å†™çš„æå¿«çš„ Python åŒ…å’Œé¡¹ç›®ç®¡ç†å·¥å…·ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£å‚è€ƒï¼š<a href="https://docs.astral.sh/uv/">https://docs.astral.sh/uv/</a></p>
<h2 id="uvå®‰è£…"><a href="#uvå®‰è£…" class="headerlink" title="uvå®‰è£…"></a>uvå®‰è£…</h2><p>Linux &amp; MacOS å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -LsSf https://astral.sh/uv/install.sh | sh</span><br></pre></td></tr></table></figure>

<p>Windows powershell å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">powershell -ExecutionPolicy ByPass -c <span class="string">&quot;irm https://astral.sh/uv/install.ps1 | iex&quot;</span></span><br></pre></td></tr></table></figure>

<span id="more"></span>

<p>ä»¥Windowsä¸ºä¾‹ï¼Œä¸‹è½½uvå¹¶é…ç½®ç¯å¢ƒå˜é‡ï¼Œåœ¨powershellä¸­ã€‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">(base) <span class="built_in">PS</span> C:\Users\<span class="number">77319</span>&gt; powershell <span class="literal">-ExecutionPolicy</span> ByPass <span class="literal">-c</span> <span class="string">&quot;irm https://astral.sh/uv/install.ps1 | iex&quot;</span></span><br><span class="line">Downloading uv <span class="number">0.9</span>.<span class="number">17</span> (x86_64<span class="literal">-pc-windows-msvc</span>)</span><br><span class="line">Installing to C:\Users\<span class="number">77319</span>\.local\bin</span><br><span class="line">  uv.exe</span><br><span class="line">  uvx.exe</span><br><span class="line">  uvw.exe</span><br><span class="line">everything<span class="string">&#x27;s installed!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To add C:\Users\77319\.local\bin to your PATH, either restart your shell or run:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    set Path=C:\Users\77319\.local\bin;%Path%   (cmd)</span></span><br><span class="line"><span class="string">    $env:Path = &quot;C:\Users\77319\.local\bin;$env:Path&quot;   (powershell)</span></span><br><span class="line"><span class="string">(base) PS C:\Users\77319&gt; $env:Path = &quot;C:\Users\77319\.local\bin;$env:Path&quot;</span></span><br></pre></td></tr></table></figure>

<p>è¾“å…¥uv -h</p>
<p><img src="/../uploads/uv.png"></p>
<p>å³è¡¨ç¤ºå®‰å…¨æˆåŠŸã€‚</p>
<h2 id="uvä½¿ç”¨"><a href="#uvä½¿ç”¨" class="headerlink" title="uvä½¿ç”¨"></a>uvä½¿ç”¨</h2><p>ä»¥å®˜æ–¹å®è·µä¸ºä¾‹ï¼Œå±•ç¤ºuvå¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ª Python é¡¹ç›®ã€æ·»åŠ ä¾èµ–ã€è¿è¡Œå·¥å…·ã€ç”Ÿæˆé”æ–‡ä»¶å¹¶åŒæ­¥ç¯å¢ƒã€‚  </p>
<p><code>uv init example</code> â€” åˆ›å»ºä¸€ä¸ªæ–°çš„ Python é¡¹ç›®æ¨¡æ¿  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(base) zyu@zyu-virtual-machine:~$ uv init myproject_test</span><br><span class="line">Initialized project `myproject-test` at `/home/zyu/myproject_test`</span><br><span class="line">(base) zyu@zyu-virtual-machine:~$ <span class="built_in">cd</span> myproject_test/</span><br><span class="line">(base) zyu@zyu-virtual-machine:~/myproject_test$ tree .</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ main.py</span><br><span class="line">â”œâ”€â”€ pyproject.toml</span><br><span class="line">â””â”€â”€ README.md</span><br><span class="line"></span><br><span class="line">0 directories, 3 files</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>uv add ruff</code> â€” å®‰è£…ä¾èµ–å¹¶æ›´æ–° pyproject  </p>
<p>è‡ªåŠ¨åˆ›å»ºé¡¹ç›®è™šæ‹Ÿç¯å¢ƒï¼Œå®‰è£…ä¾èµ–åŒ…ruffï¼ŒæŠŠä¾èµ–å†™å…¥pyproject.tomlï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(base) zyu@zyu-virtual-machine:~/myproject_test$ uv add ruff</span><br><span class="line">Using CPython 3.13.9 interpreter at: /home/zyu/miniconda3/bin/python3</span><br><span class="line">Creating virtual environment at: .venv</span><br><span class="line">Resolved 2 packages <span class="keyword">in</span> 864ms</span><br><span class="line">Prepared 1 package <span class="keyword">in</span> 1.30s</span><br><span class="line">Installed 1 package <span class="keyword">in</span> 1ms</span><br><span class="line"> + ruff==0.14.8</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>uv run ruff check</code> â€” è¿è¡Œ ruff æ£€æŸ¥ä»£ç   </p>
<p> ä½¿ç”¨é¡¹ç›®è™šæ‹Ÿç¯å¢ƒé‡Œçš„ ruff æ‰§è¡Œä»£ç é£æ ¼æ£€æŸ¥ :</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(base) zyu@zyu-virtual-machine:~/myproject_test$ uv run ruff check</span><br><span class="line">All checks passed!</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>uv lock</code> â€” ç”Ÿæˆé”æ–‡ä»¶ : è§£ææ‰€æœ‰ä¾èµ–ç‰ˆæœ¬  , ç”Ÿæˆ <code>uv.lock</code>ï¼ˆç±»ä¼¼ Pipfile.lock &#x2F; poetry.lockï¼‰ï¼Œä¿è¯è¿™ä¸ªé¡¹ç›®æœªæ¥ä¾èµ–å®‰è£…ä¸€è‡´ã€å¯å¤ç°ã€‚  </p>
<p><code>uv sync</code> â€” æŒ‰é”æ–‡ä»¶åŒæ­¥è™šæ‹Ÿç¯å¢ƒ ï¼š æ ¹æ® <code>uv.lock</code> å®‰è£…æˆ–æ›´æ–°ä¾èµ–  ï¼Œ ç¡®ä¿ <code>.venv/</code> å®Œå…¨åŒ¹é…é”æ–‡ä»¶ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(base) zyu@zyu-virtual-machine:~/myproject_test$ uv lock</span><br><span class="line">Resolved 2 packages <span class="keyword">in</span> 0.84ms</span><br><span class="line">(base) zyu@zyu-virtual-machine:~/myproject_test$ uv <span class="built_in">sync</span></span><br><span class="line">Resolved 2 packages <span class="keyword">in</span> 0.70ms</span><br><span class="line">Audited 1 package <span class="keyword">in</span> 0.09ms</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>uvx pycowsay &#39;hello world!&#39; </code> uvx ç­‰ä»·äº <code>uv tool run</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(base) zyu@zyu-virtual-machine:~/myproject_test$ uvx pycowsay <span class="string">&#x27;hello world!&#x27;</span></span><br><span class="line">Installed 1 package <span class="keyword">in</span> 5ms</span><br><span class="line">/home/zyu/.cache/uv/archive-v0/nYZiOnUm3DMddg7I9DLwr/lib/python3.13/site-packages/pycowsay/main.py:27: SyntaxWarning: invalid escape sequence <span class="string">&#x27;\ &#x27;</span></span><br><span class="line">  \   ^__^</span><br><span class="line"></span><br><span class="line">  ------------</span><br><span class="line">&lt; hello world! &gt;</span><br><span class="line">  ------------</span><br><span class="line">   \   ^__^</span><br><span class="line">    \  (oo)\_______</span><br><span class="line">       (__)\       )\/\</span><br><span class="line">           ||----w |</span><br><span class="line">           ||     ||</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šå°±æ˜¯å®˜æ–¹æä¾›çš„ç¤ºä¾‹Demoã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ï¼ˆä»¥<a href="https://github.com/JordyZomer/codeql-mcp#">https://github.com/JordyZomer/codeql-mcp#</a>ä¸ºä¾‹ï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(base) PS D:\Code\codeql-mcp&gt; uv pip install -r .\requirements.txt</span><br><span class="line">error: No virtual environment found; run `uv venv` to create an environment, or pass `--system` to install into a non-virtual environment</span><br></pre></td></tr></table></figure>

<p> ä½¿ç”¨ <code>uv pip</code> å®‰è£…ä¾èµ–ï¼Œä½†å½“å‰ç›®å½•æ²¡æœ‰è™šæ‹Ÿç¯å¢ƒï¼Œæ‰€ä»¥ uv ä¸çŸ¥é“è¯¥æŠŠåŒ…è£…åˆ°å“ªé‡Œã€‚  uv çš„åŸåˆ™æ˜¯å¦‚æœä¸æŒ‡å®šè£…åˆ°å“ªé‡Œï¼Œå®ƒé»˜è®¤è¦æ‰¾ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼ˆ.venvï¼‰ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±æŠ¥é”™ã€‚æ‰€ä»¥éœ€è¦å…ˆåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(base) PS D:\Code\codeql-mcp&gt; uv venv</span><br><span class="line">Using CPython 3.11.7 interpreter at: C:\Users\77319\anaconda3\python.exe</span><br><span class="line">Creating virtual environment at: .venv</span><br><span class="line">Activate with: .venv\Scripts\activate</span><br><span class="line">(base) PS D:\Code\codeql-mcp&gt; uv pip install -r .\requirements.txt</span><br><span class="line">Resolved 60 packages <span class="keyword">in</span> 1.61s</span><br><span class="line">Prepared 60 packages <span class="keyword">in</span> 3.56s</span><br><span class="line">â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ [0/60] Installing wheels...                                                warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance.                                                                                            </span><br><span class="line">         If the cache and target directories are on different filesystems, hardlinking may not be supported.                                                                                    </span><br><span class="line">         If this is intentional, <span class="built_in">set</span> `<span class="built_in">export</span> UV_LINK_MODE=copy` or use `--link-mode=copy` to suppress this warning.                                                                             </span><br><span class="line">Installed 60 packages <span class="keyword">in</span> 4.17s</span><br><span class="line"> + annotated-types==0.7.0                                                                       </span><br><span class="line"> + anyio==4.12.0                                                                                </span><br><span class="line"> + attrs==25.4.0                                                                                </span><br><span class="line"> + authlib==1.6.5                                                                               </span><br><span class="line"> + beartype==0.22.8                                                                             </span><br><span class="line"> + cachetools==6.2.2</span><br><span class="line"> + certifi==2025.11.12</span><br><span class="line"> + cffi==2.0.0</span><br><span class="line"> + charset-normalizer==3.4.4</span><br><span class="line"> + click==8.3.1</span><br><span class="line"> + colorama==0.4.6</span><br><span class="line"> + cryptography==46.0.3</span><br><span class="line"> + cyclopts==4.3.0</span><br><span class="line"> + diskcache==5.6.3</span><br><span class="line"> + dnspython==2.8.0</span><br><span class="line"> + docstring-parser==0.17.0</span><br><span class="line"> + docutils==0.22.3</span><br><span class="line"> + email-validator==2.3.0</span><br><span class="line"> + exceptiongroup==1.3.1</span><br><span class="line"> + fastmcp==2.13.3</span><br><span class="line"> + h11==0.16.0</span><br><span class="line"> + httpcore==1.0.9</span><br><span class="line"> + httpx==0.28.1</span><br><span class="line"> + httpx-sse==0.4.3</span><br><span class="line"> + idna==3.11</span><br><span class="line"> + jsonschema==4.25.1</span><br><span class="line"> + jsonschema-path==0.3.4</span><br><span class="line"> + jsonschema-specifications==2025.9.1</span><br><span class="line"> + markdown-it-py==4.0.0</span><br><span class="line"> + mcp==1.22.0</span><br><span class="line"> + mdurl==0.1.2</span><br><span class="line"> + openapi-pydantic==0.5.1</span><br><span class="line"> + pathable==0.4.4</span><br><span class="line"> + pathvalidate==3.3.1</span><br><span class="line"> + platformdirs==4.5.1</span><br><span class="line"> + py-key-value-aio==0.3.0</span><br><span class="line"> + py-key-value-shared==0.3.0</span><br><span class="line"> + pycparser==2.23</span><br><span class="line"> + pydantic==2.12.5</span><br><span class="line"> + pydantic-core==2.41.5</span><br><span class="line"> + pydantic-settings==2.12.0</span><br><span class="line"> + pygments==2.19.2</span><br><span class="line"> + pyjwt==2.10.1</span><br><span class="line"> + pyperclip==1.11.0</span><br><span class="line"> + python-dotenv==1.2.1</span><br><span class="line"> + python-multipart==0.0.20</span><br><span class="line"> + pywin32==311</span><br><span class="line"> + pyyaml==6.0.3</span><br><span class="line"> + referencing==0.36.2</span><br><span class="line"> + requests==2.32.5</span><br><span class="line"> + rich==14.2.0</span><br><span class="line"> + rich-rst==1.3.2</span><br><span class="line"> + rpds-py==0.30.0</span><br><span class="line"> + sse-starlette==3.0.3</span><br><span class="line"> + starlette==0.50.0</span><br><span class="line"> + typing-extensions==4.15.0</span><br><span class="line"> + typing-inspection==0.4.2</span><br><span class="line"> + urllib3==2.6.1</span><br><span class="line"> + uvicorn==0.38.0</span><br><span class="line"> + websockets==15.0.1</span><br></pre></td></tr></table></figure>

<p>å…³äºæŠ¥é”™ä¿¡æ¯å¯ä»¥å¿½ç•¥ï¼Œå¤§è‡´æ„æ€æ˜¯ï¼š uv æƒ³ç”¨ç¡¬é“¾æ¥ï¼ˆhardlinkï¼‰åŠ é€Ÿä¾èµ–å®‰è£…ï¼Œä½†æˆ‘ä»¬çš„ç¼“å­˜ç›®å½•å’Œå®‰è£…ç›®å½•ä¸åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸Š â†’ æ— æ³•ç¡¬é“¾æ¥ â†’ åªèƒ½é€€å›åˆ°â€œå®Œæ•´å¤åˆ¶â€æ–‡ä»¶ï¼Œæ€§èƒ½ç¨æ…¢ä¸€ç‚¹ã€‚  åº”è¯¥ç¼“å­˜ç›®å½•åœ¨Cç›˜ï¼Œä½†æ˜¯å®‰è£…ç›®å½•åœ¨Dç›˜ã€‚</p>
<p>è¿è¡ŒmcpæœåŠ¡å™¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(base) PS D:\Code\codeql-mcp&gt; uv run mcp run server.py -t sse</span><br><span class="line">Error: typer is required. Install with <span class="string">&#x27;pip install mcp[cli]&#x27;</span></span><br><span class="line">(base) PS D:\Code\codeql-mcp&gt; uv pip install mcp[cli]</span><br><span class="line">Resolved 37 packages <span class="keyword">in</span> 710ms</span><br><span class="line">Prepared 2 packages <span class="keyword">in</span> 138ms</span><br><span class="line">â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ [0/2] Installing wheels...                                                 warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance.</span><br><span class="line">         If the cache and target directories are on different filesystems, hardlinking may not be supported.</span><br><span class="line">         If this is intentional, <span class="built_in">set</span> `<span class="built_in">export</span> UV_LINK_MODE=copy` or use `--link-mode=copy` to suppress this warning.</span><br><span class="line">Installed 2 packages <span class="keyword">in</span> 56ms</span><br><span class="line"> + shellingham==1.5.4</span><br><span class="line"> + typer==0.20.0</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Config</category>
      </categories>
      <tags>
        <tag>Config</tag>
        <tag>uv</tag>
      </tags>
  </entry>
  <entry>
    <title>kaliå®‰è£…ssh</title>
    <url>/2025/12/10/kali%E5%AE%89%E8%A3%85ssh/</url>
    <content><![CDATA[<h1 id="kali-linux-å®‰è£…sshæœåŠ¡"><a href="#kali-linux-å®‰è£…sshæœåŠ¡" class="headerlink" title="kali linux å®‰è£…sshæœåŠ¡"></a>kali linux å®‰è£…sshæœåŠ¡</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get install ssh</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> systemctl start ssh</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> ssh <span class="comment">#è®¾ç½®å¼€æœºè‡ªå¯</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> systemctl status ssh <span class="comment">#æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Config</category>
      </categories>
      <tags>
        <tag>Config</tag>
        <tag>Kali Linux</tag>
      </tags>
  </entry>
</search>
